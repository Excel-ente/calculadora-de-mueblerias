################################################################################
# ARCHIVO: .\acerca_de_muebles.html
################################################################################

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acerca de [Tu Nombre o Nombre del Proyecto] | Calculadora de Recetas</title> 
    <meta name="description" content="Conoce m√°s sobre [Tu Nombre], el creador de Calculadora de Recetas, y su misi√≥n de ayudar a emprendedores.">
    <link rel="stylesheet" href="styles.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        main { padding-top: 2rem; padding-bottom: 3rem; }
        .about-content img.profile-pic { /* Estilo opcional para una foto */
            display: block;
            margin: 1rem auto 2rem;
            border-radius: 50%; /* Foto redonda */
            max-width: 180px;
            border: 5px solid var(--pink-100);
            box-shadow: var(--shadow-md);
        }
        .about-content h2 {
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.6rem;
            color: var(--purple-800);
        }
        .about-content p {
            margin-bottom: 1rem;
            text-align: left; /* O 'justify' si prefieres */
            line-height: 1.7;
            color: var(--purple-700); 
        }
        .about-content .highlight { /* Para resaltar alguna frase */
             background-color: var(--pink-50);
             padding: 0.1rem 0.4rem;
             border-radius: 4px;
             font-weight: 500;
        }
         .about-content .cta-section { /* Secci√≥n Llamada a la acci√≥n */
             background-color: var(--purple-50);
             padding: 2rem;
             margin-top: 3rem;
             border-radius: var(--radius);
             text-align: center;
         }
          .about-content .cta-section p {
              text-align: center;
              margin-bottom: 1.5rem;
          }
           .container {
               max-width: 800px; /* Limitar ancho para mejor lectura */
           }
           .video-container { /* Contenedor para video de YT */
                position: relative;
                padding-bottom: 56.25%; /* 16:9 aspect ratio */
                height: 0;
                overflow: hidden;
                max-width: 100%;
                background: #000;
                margin: 2rem 0;
                border-radius: var(--radius);
                box-shadow: var(--shadow-lg);
           }
            .video-container iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: 0;
           }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <a href="index.html"> <img src="logo_excelente.svg" alt="Logo Tu Taller Eficiente" class="logo-image">
                </a>
            </div>
            </div>
    </header>
    <main>
        <div class="container">
            <div class="about-content">
                <h1>¬°Hola! Soy Kevin üëã</h1>

                <p>Detr√°s de <span class="highlight">Excel-ente</span> hay una sola idea: <em>hacerte la vida m√°s f√°cil</em> con herramientas digitales gratuitas y al grano. No me considero un gur√∫ creativo; solo un tipo curioso que disfruta compartir lo que aprende.</p>

                <p>Las soluciones tienen que ser <span class="highlight">simples, pr√°cticas y accesibles</span>. Por eso combino mi experiencia en Python/Django con muchos √≠ndices de mate para crear cosas que cualquiera pueda aplicar en su negocio, sin tecnicismos ni vueltas.</p>

                <h2>¬øQu√© vas a encontrar en el canal?</h2>

                <p>Tutoriales claros, hojas de c√°lculo para descargar y gu√≠as paso a paso: desde costear una torta hasta automatizar un reporte. Todo explicado con ejemplos reales, lenguaje cotidiano y, cuando se puede, un toque de humor.</p>

                <div class="video-container">
                    <iframe
                        src="https://www.youtube.com/embed/wi4FaHYXtig"
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen>
                    </iframe>
                </div>

                <p>Si lo que ves ac√° te sirve, te invito a sumarte a la comunidad y compartir tus avances. ¬°Mientras m√°s aprendemos juntos, mejor!</p>

                <div class="cta-section">
                    <h2>¬°Conectemos!</h2>
                    <p>Suscribite al canal o seguime en redes para no perderte las pr√≥ximas herramientas.</p>
                    <a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" class="btn btn-primary">Suscribirme en YouTube</a>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com/excel.entes" target="_blank" rel="noopener noreferrer" aria-label="Instagram Excel-ente" title="Instagram Excel-ente">
                    <!-- SVG Instagram -->
                </a>
                <a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" aria-label="Youtube Excel-ente" title="Youtube Excel-ente">
                    <!-- SVG YouTube -->
                </a>
                <a href="https://www.tiktok.com/@excel.entes" target="_blank" rel="noopener noreferrer" aria-label="TikTok Excel-ente" title="TikTok Excel-ente">
                    <!-- SVG TikTok -->
                </a>
            </div>

            <p class="footer-note">Hecho con ‚ù§Ô∏è por <a href="https://excel-ente.com/" target="_blank" rel="noopener noreferrer">Excel-ente</a> para ayudar a emprendedor@s como vos üöÄ</p>

            <p class="copyright">
                ¬© <span id="current-year"></span> Excel-ente | Todos los derechos reservados |
                <a href="politica_privacidad_muebles.html">Pol√≠tica de Privacidad</a> |
                <a href="acerca_de_muebles.html">Acerca de</a> |
                <a href="contacto.html">Contacto</a>
            </p>
        </div>
    </footer>

    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
</body>


</html>

################################################################################
# ARCHIVO: .\contacto.html
################################################################################

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto | Calculadora de Recetas</title> 
    <meta name="description" content="Ponte en contacto con el equipo de Calculadora de Recetas para consultas, sugerencias o colaboraciones.">
    <link rel="stylesheet" href="styles.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        main { padding-top: 2rem; padding-bottom: 3rem; }
        .contact-content h1 {
            margin-bottom: 1.5rem;
            text-align: center;
        }
         .contact-content h2 {
             margin-top: 2rem;
             margin-bottom: 1rem;
             text-align: left;
             font-size: 1.4rem;
             color: var(--purple-800);
         }
        .contact-content p, .contact-content ul {
            margin-bottom: 1.5rem;
            text-align: left; 
            line-height: 1.7;
            color: var(--purple-700); 
        }
         .contact-content .contact-methods li {
             margin-bottom: 1rem;
             list-style: none; /* Quita puntos de lista */
             padding-left: 0;
         }
         .contact-content .contact-methods strong {
             color: var(--purple-800);
             margin-right: 0.5rem;
         }
         .contact-content .contact-methods a {
             font-weight: 500;
             text-decoration: underline;
         }
         /* Estilo para el email */
         .email-link {
            font-weight: 600;
            color: var(--pink-700);
         }
          .container {
               max-width: 700px; /* Ancho contenido */
           }
            .social-links-contact { /* Reutiliza estilo de footer si quieres o personaliza */
                 display: flex;
                 gap: 1.5rem; /* M√°s espacio */
                 margin-top: 1rem;
                 list-style: none;
                 padding-left: 0;
            }
             .social-links-contact a svg {
                 width: 28px; /* Iconos un poco m√°s grandes */
                 height: 28px;
                 color: var(--purple-600);
                 transition: color 0.2s ease;
            }
            .social-links-contact a:hover svg { color: var(--purple-800); }

            /* NOTA: Estilos para un FORMULARIO (si decides a√±adirlo despu√©s) */
            /*
            .contact-form .form-group { margin-bottom: 1.5rem; }
            .contact-form textarea { min-height: 150px; resize: vertical; }
            .contact-form .btn-primary { margin-top: 1rem; }
            */

    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <a href="index.html"> <img src="logo_excelente.svg" alt="Logo Tu Taller Eficiente" class="logo-image">
                </a>
            </div>
            </div>
    </header>

    <main>
        <div class="container">
            <div class="contact-content">
                <h1>Ponerse en Contacto</h1>
                <p>¬°Me encanta escuchar a los usuarios de la Calculadora y del canal! Si tienes alguna pregunta, sugerencia, comentario, o simplemente quieres saludar, no dudes en contactarme a trav√©s de los siguientes medios.</p>

                <h2>C√≥mo Contactarme</h2>
                <ul class="contact-methods">
                    <li>
                        <strong>Correo Electr√≥nico:</strong> Es la forma m√°s directa. Puedes escribirme a: <br>
                        <span id="email-placeholder">[Habilita JavaScript para ver el correo]</span> 
                        <br><small>(Intento responder lo antes posible, pero por favor ten paciencia si tardo un poquito).</small>
                    </li>
                    <li>
                        <strong>Redes Sociales:</strong> Tambi√©n puedes encontrarme y enviarme un mensaje a trav√©s de mis redes:
                        <ul class="social-links-contact">
                             <li><a href="https://www.instagram.com/excel.entes" target="_blank" rel="noopener noreferrer" aria-label="Instagram Excel-ente" title="Instagram Excel-ente"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9 26.3 26.2 58 34.4 93.9 36.2 37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></a></li>
                             <li><a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" aria-label="Youtube Excel-ente" title="Youtube Excel-ente"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg></a></li>
                             <li><a href="https://www.tiktok.com/@excel.entes" target="_blank" rel="noopener noreferrer" aria-label="TikTok Excel-ente" title="TikTok Excel-ente"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg></a></li>
                             <li><a href="https://www.linkedin.com/in/kevinturkienich" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn [Tu Nombre]" title="LinkedIn [Tu Nombre]"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 53.79-54.3c29.7 0 53.79 24.2 53.79 54.3a53.79 53.79 0 0 1-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg></a></li>
                        </ul>
                    </li>
                </ul>

                </div>
        </div>
    </main>

    <footer>
        <div class="container"> 
            <div class="social-links">
                 <a href="https://www.instagram.com/excel.entes" target="_blank" rel="noopener noreferrer" aria-label="Instagram Excel-ente" title="Instagram Excel-ente">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9 26.3 26.2 58 34.4 93.9 36.2 37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                </a>
                <a href="[TU_ENLACE_YOUTUBE]" target="_blank" rel="noopener noreferrer" aria-label="Youtube Excel-ente" title="Youtube Excel-ente"> 
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor" height="1.5em"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg>
                </a>
                <a href="https://www.tiktok.com/@excel.entes" target="_blank" rel="noopener noreferrer" aria-label="TikTok Excel-ente" title="TikTok Excel-ente">
                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg>
                </a>
                 <a href="[TU_LINKEDIN_URL]" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn [Tu Nombre]" title="LinkedIn [Tu Nombre]">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 53.79-54.3c29.7 0 53.79 24.2 53.79 54.3a53.79 53.79 0 0 1-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
                </a>
            </div>

            <p class="footer-note">Hecho con ‚ù§Ô∏è por <a href="https://excel-ente.com/" target="_blank" rel="noopener noreferrer">Excel-ente</a> para ayudar a emprendedor@s como vos üöÄ</p> 
            
            <p class="copyright">
                ¬© <span id="current-year"></span> [Tu Nombre o Nombre del Proyecto] | Todos los derechos reservados | 
                <a href="politica_privacidad_muebles.html">Pol√≠tica de Privacidad</a> | 
                <a href="acerca_de_muebles.html">Acerca de</a> | 
                <a href="contacto.html">Contacto</a>
            </p>
        </div>
    </footer>

    <script>
        // Script para actualizar a√±o (si no lo tienes global)
        document.getElementById('current-year').textContent = new Date().getFullYear();
        // --- Script para ofuscar el email ---
        function displayEmail() {
            // !! Reemplaza con tus datos reales !!
            const user = "kevin_turkienich"; // Parte antes del @
            const domain = "outlook.com"; // Parte despu√©s del @
            const email = `${user}@${domain}`;
            const mailtoLink = `mailto:${email}`;
            
            const placeholder = document.getElementById('email-placeholder');
            if (placeholder) {
                // Crea el enlace y lo muestra
                const linkElement = document.createElement('a');
                linkElement.href = mailtoLink;
                linkElement.textContent = email;
                linkElement.classList.add('email-link'); // Aplica el estilo que definimos
                
                // Reemplaza el span con el enlace
                placeholder.parentNode.replaceChild(linkElement, placeholder);
            }
        }

        // Llama a la funci√≥n para mostrar el email cuando el DOM est√© listo
        // Usar un peque√±o retraso puede enga√±ar a algunos bots muy simples, pero no es esencial
        // setTimeout(displayEmail, 50); 
        // O llamarla directamente:
        displayEmail();

    </script>

</body>
</html>

################################################################################
# ARCHIVO: .\guia_costos_muebles.html
################################################################################

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de Costos para fabricantes de muesbles | Excel-ente</title>
    <meta name="description" content="Calcul√° paso a paso el costo de fabricaci√≥n de tus muebles, desde los materiales hasta tu ganancia. ¬°F√°cil y r√°pido!">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="index.css"> <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon_muebles.ico" type="image/x-icon">

    </head>
<body>
    <header class="site-header">
        <div class="container logo-container">
            <a href="index.html" aria-label="Volver al inicio de Tu Taller Eficiente">
                <img src="logo_muebles.svg" alt="Logo Tu Taller Eficiente" class="logo-image">
            </a>
        </div>
    </header>

<main>
    <section class="cost-guide-section">
        <div class="container">
            <h1>ü™ë Gu√≠a Interactiva: ¬°Calcul√° el Costo de Tu Mueble!</h1>
            <p class="section-intro">Te acompa√±o paso a paso para que descubras cu√°nto te cuesta fabricar ese mueble y a qu√© precio venderlo. ¬°Es m√°s f√°cil de lo que pens√°s!</p>

            <div class="cost-guide-container">
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progressBarFill" style="width: 0%;"></div>
                    </div>
                    <div class="progress-steps">
                        <span class="progress-step active" data-step="1">Nombre</span>
                        <span class="progress-step" data-step="2">Materiales</span>
                        <span class="progress-step" data-step="3">Otros Costos</span>
                        <span class="progress-step" data-step="4">Tu Tiempo</span>
                        <span class="progress-step" data-step="5">Gastos Taller</span>
                        <span class="progress-step" data-step="6">Precio Final</span>
                    </div>
                </div>

                <div class="step active" id="step-1">
                    <h2>Paso 1: ¬øC√≥mo se llama tu creaci√≥n? üè∑Ô∏è</h2>
                    <div class="form-group">
                        <label for="guide-mueble-name">Nombre del Mueble, Dise√±o, Proyecto, etc.:</label>
                        <input type="text" id="guide-mueble-name" placeholder="Ej: Mesa de Luz 'N√≥rdica', Silla 'Escandinava'" required>
                        <div class="error-message hidden" id="error-mueble-name">¬°Dale un nombre a tu mueble!</div>
                    </div>
                    <div class="step-nav">
                        <button class="btn btn-primary next-step-btn">Siguiente: Materiales ‚Üí</button>
                    </div>
                </div>

                <div class="step" id="step-2">
                    <h2>Paso 2: Los Materiales que Usaste ü™µüî©</h2>
                    <p>Agreg√° uno por uno los materiales que lleva tu mueble (madera, placas, herrajes, tornillos, etc.).</p>

                    <div class="add-ingredient-guide-form calculator-card"> <h4>A√±adir Material:</h4>
                        <div class="form-grid compact-form-grid">
                            <div class="form-group">
                                <label for="guide-mat-name">Material:</label>
                                <input type="text" id="guide-mat-name" placeholder="Ej: Placa MDF 18mm, Pino Elliotis 1x4">
                                <div class="error-message hidden" id="error-mat-name">¬øQu√© material es?</div>
                            </div>
                            <div class="form-group">
                                <label for="guide-mat-price">Compra: Precio Total ($)</label>
                                <input type="number" id="guide-mat-price" placeholder="Ej: 8500 (por la placa entera)" min="0.01" step="any">
                                <div class="error-message hidden" id="error-mat-price">¬øCu√°nto te cost√≥?</div>
                            </div>
                            <div class="form-group">
                                <label for="guide-mat-total-qty">Compra: Cantidad Total</label>
                                <div class="input-with-select">
                                    <input type="number" id="guide-mat-total-qty" placeholder="Ej: 1 (placa), 3.05 (metros)" min="0.001" step="any">
                                    <select id="guide-mat-total-unit">
                                        <option value="unid">Unidades (unid)</option>
                                        <option value="m2">Metros Cuadrados (m¬≤)</option>
                                        <option value="m">Metros Lineales (m)</option>
                                        <option value="kg">Kilos (kg)</option>
                                        <option value="g">Gramos (g)</option>
                                        <option value="lt">Litros (lt)</option>
                                        <option value="ml">Mililitros (ml)</option>
                                        <option value="placa">Placa Entera</option>
                                        <option value="varilla">Varilla Entera</option>
                                        <option value="rollo">Rollo Entero</option>
                                        <option value="par">Par</option>
                                        <option value="set">Set/Juego</option>
                                    </select>
                                </div>
                                 <div class="error-message hidden" id="error-mat-total-qty">¬øCu√°nto compraste en total?</div>
                            </div>
                            <div class="form-group">
                                <label for="guide-mat-used-qty">Cantidad Usada en ESTE Mueble</label>
                                <div class="input-with-select">
                                    <input type="number" id="guide-mat-used-qty" placeholder="Ej: 0.75 (m¬≤), 20 (unid)" min="0" step="any">
                                     <select id="guide-mat-used-unit">
                                        </select>
                                </div>
                                <div id="guide-mat-unit-warning" class="unit-warning hidden"></div>
                                <div class="error-message hidden" id="error-mat-used-qty">¬øCu√°nto usaste para este mueble?</div>
                            </div>
                        </div>
                        <button id="add-material-guide-btn" class="btn btn-secondary">Agregar Material a la Lista</button>
                        <div class="error-message hidden" id="error-add-material">Revis√° los datos del material.</div>
                    </div>

                    <h4>Materiales Agregados a este Mueble:</h4>
                    <div class="table-responsive-container">
                        <ul id="guide-materials-list" class="ingredients-summary-list"> <li class="list-header">
                                 <span>Material</span>
                                 <span>Costo para el Mueble</span>
                                 <span>Borrar</span>
                             </li>
                             <li class="list-empty">Todav√≠a no agregaste materiales. ¬°Empez√° ahora!</li>
                         </ul>
                    </div>
                    <div class="ingredients-total"> <strong>Costo Total de Materiales: <span id="guide-materials-total">$0.00</span></strong>
                    </div>
                    <div class="error-message hidden" id="error-materials-list">¬°Acordate de agregar al menos un material!</div>

                    <div class="step-nav">
                        <button class="btn btn-outline prev-step-btn">‚Üê Anterior</button>
                        <button class="btn btn-primary next-step-btn">Siguiente: Otros Costos ‚Üí</button>
                    </div>
                </div>

                <div class="step" id="step-3">
                    <h2>Paso 3: Acabados, Consumibles y Embalaje üé®üì¶</h2>
                    <p>Estim√° cu√°nto gast√°s en pintura, barniz, lijas, pegamento (si no lo mediste antes como material), y el embalaje para ESTE mueble en particular (estos son opcionales).</p>
                    <div class="form-grid">
                         <div class="form-group">
                             <label for="guide-finishes-cost">Costo de Acabados (pintura, barniz, laca, etc.) para ESTE mueble ($):</label>
                             <input type="number" id="guide-finishes-cost" placeholder="Ej: 1200 (total pintura y barniz)" min="0" step="any" value="0">
                             <div class="error-message hidden" id="error-finishes-cost">Si gastaste en acabados, pon√© un n√∫mero (o 0).</div>
                         </div>
                         <div class="form-group">
                            <label for="guide-consumables-cost">Costo de Consumibles (lijas, mechas, cola extra, etc.) para ESTE mueble ($):</label>
                            <input type="number" id="guide-consumables-cost" placeholder="Ej: 350 (total lijas, etc.)" min="0" step="any" value="0">
                            <div class="error-message hidden" id="error-consumables-cost">Si gastaste en consumibles, pon√© un n√∫mero (o 0).</div>
                        </div>
                         <div class="form-group">
                             <label for="guide-packaging-cost">Costo de Embalaje (film, cart√≥n, telgopor, etc.) si lo lleva ($):</label>
                             <input type="number" id="guide-packaging-cost" placeholder="Ej: 250 (si lo embal√°s)" min="0" step="any" value="0">
                             <div class="error-message hidden" id="error-packaging-cost">Si lo embal√°s, pon√© un n√∫mero (o 0).</div>
                         </div>
                    </div>
                     <div class="step-nav">
                        <button class="btn btn-outline prev-step-btn">‚Üê Anterior</button>
                        <button class="btn btn-primary next-step-btn">Siguiente: Tu Tiempo ‚Üí</button>
                    </div>
                </div>

                <div class="step" id="step-4">
                    <h2>Paso 4: ¬°Tu Tiempo de Laburo Vale! ‚è≥üí™</h2>
                    <p>¬øCu√°nto tiempo te llev√≥ dise√±ar, preparar, cortar, armar, lijar, pintar y terminar este mueble? ¬øY cu√°nto vale tu hora de trabajo calificado?</p>
                     <div class="form-grid">
                         <div class="form-group">
                             <label for="guide-time">Tiempo Total de Fabricaci√≥n (Dise√±o, Corte, Armado, Pintura, etc.) (en Minutos):</label>
                             <input type="number" id="guide-time" placeholder="Ej: 360 (para 6 horas de laburo)" min="0" step="1" required>
                             <div class="error-message hidden" id="error-time">¬øCu√°ntos minutos te llev√≥ en total?</div>
                         </div>
                         <div class="form-group">
                             <label for="guide-hourly-rate">¬øCu√°nto quer√©s ganar por Hora de Trabajo como Carpintero/a? ($):</label>
                             <input type="number" id="guide-hourly-rate" placeholder="Ej: 3500 (tu valor por hora)" min="0" step="any" required>
                             <div class="error-message hidden" id="error-hourly-rate">¬øCu√°nto vale tu hora de experto?</div>
                         </div>
                     </div>
                     <div class="calculated-result">
                         Costo de tu Mano de Obra para este mueble: <strong id="guide-labor-cost-display">$0.00</strong>
                     </div>
                     <div class="step-nav">
                        <button class="btn btn-outline prev-step-btn">‚Üê Anterior</button>
                        <button class="btn btn-primary next-step-btn">Siguiente: Gastos del Taller ‚Üí</button>
                    </div>
                </div>

                <div class="step" id="step-5">
                    <h2>Paso 5: Tu "Pedacito" de Gastos Fijos del Taller üè†üîß</h2>
                     <p>Este es el "poquito" de tus gastos generales del taller (alquiler, luz general, monotributo, tu sueldo fijo si ten√©s, etc.) que le "carg√°s" a cada mueble que hac√©s. Es opcional, pero muy recomendable.</p>
                     <div class="form-group">
                         <label for="guide-fixed-cost">Monto de Gasto Fijo del Taller por Mueble/Proyecto ($):</label>
                         <input type="number" id="guide-fixed-cost" placeholder="Us√° el valor de la 'Calculadora de Gastos Fijos'" min="0" step="any" value="0">
                         <small>Si no lo calculaste todav√≠a, pod√©s ir a la secci√≥n <a href="index_muebles.html#fixed-costs-calculator" target="_blank" rel="noopener noreferrer">Calculadora de Gastos Fijos del Taller</a> en la p√°gina principal (se abre en otra pesta√±a) para sacarlo f√°cil.</small>
                         <div class="error-message hidden" id="error-fixed-cost">Si ten√©s este dato, ponelo (o 0).</div>
                     </div>
                     <div class="step-nav">
                        <button class="btn btn-outline prev-step-btn">‚Üê Anterior</button>
                        <button class="btn btn-primary next-step-btn">Siguiente: ¬°El Precio Final! ‚Üí</button>
                    </div>
                </div>

                <div class="step" id="step-6">
                    <h2>Paso 6: ¬°A Sacar el Precio Final de tu Mueble! ü§ëüè∑Ô∏è</h2>
                    <p>Ya casi estamos. Ahora definamos tu ganancia y cu√°ntos muebles iguales son (si es una tanda).</p>
                     <div class="form-grid">
                         <div class="form-group">
                             <label for="guide-profit">Porcentaje de Ganancia que quer√©s tener (%):</label>
                             <input type="number" id="guide-profit" value="50" min="0" step="1" required>
                             <small>Pens√° cu√°nto quer√©s que te quede limpio despu√©s de cubrir todos los gastos.</small>
                             <div class="error-message hidden" id="error-profit">¬øQu√© porcentaje de ganancia busc√°s?</div>
                         </div>
                         <div class="form-group">
                             <label for="guide-units">¬øCu√°ntos muebles id√©nticos son en esta tanda/pedido?</label>
                             <input type="number" id="guide-units" value="1" min="1" step="1" required>
                             <small>Si es un solo mueble, dej√° 1. Si son varios iguales, pon√© la cantidad.</small>
                             <div class="error-message hidden" id="error-units">¬øCu√°ntos son? (M√≠nimo 1)</div>
                         </div>
                     </div>
                     <button id="calculate-final-guide-btn" class="btn btn-primary full-width btn-lg">¬°Calcular Precio Sugerido del Mueble!</button>

                     <div id="guide-final-results" class="final-results-card hidden">
                         <h3>Resumen del C√°lculo para: <span id="res-mueble-name">Tu Mueble</span></h3>
                         <p>Costo Total de Materiales, Acabados y Embalaje: <strong id="res-material-otros">$0.00</strong></p>
                         <p>Costo de Mano de Obra (Tu Tiempo): <strong id="res-labor">$0.00</strong></p>
                         <p>Costo de Gastos Fijos del Taller (asignado a este mueble): <strong id="res-fixed">$0.00</strong></p>
                         <hr>
                         <p class="total-cost-row">COSTO TOTAL DE FABRICACI√ìN DEL MUEBLE: <strong id="res-total-cost">$0.00</strong></p>
                         <hr>
                         <p>Tu Ganancia Estimada (<span id="res-profit-perc">0</span>%): <strong id="res-profit">$0.00</strong></p>
                         <p class="final-price-row">PRECIO DE VENTA SUGERIDO (por <span id="res-units-info1">1</span> mueble): <strong id="res-final-price">$0.00</strong></p>
                         <p id="res-unit-price-row" class="hidden">Precio Sugerido por cada Mueble (si son varios): <strong id="res-unit-price">$0.00</strong></p>
                         <p class="disclaimer small-text">Record√° que este es un precio <strong>sugerido</strong>. ¬°Consider√° tambi√©n la calidad de tus materiales, tu dise√±o √∫nico, los precios de la competencia en tu zona y cu√°nto valora el cliente tu trabajo artesanal!</p>

                         <div class="pdf-actions">
                            <button id="generate-pdf-btn" class="btn btn-secondary" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor"><path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V304H176c-35.3 0-64 28.7-64 64V512H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V464 416 352zm64 88c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h48zM480 352h-8c-6.6 0-12 5.4-12 12v100c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V364c0-6.6-5.4-12-12-12zM416 352c-8.8 0-16 7.2-16 16v80c0 8.8 7.2 16 16 16s16-7.2 16-16V368c0-8.8-7.2-16-16-16z"/></svg>
                                Guardar Resumen en PDF
                            </button>
                            <div id="pdf-loader" class="loader hidden"></div>
                            <div class="error-message hidden" id="error-pdf">Hubo un problema al generar el PDF.</div>
                        </div>
                     </div>

                     <div class="step-nav">
                        <button class="btn btn-outline prev-step-btn">‚Üê Anterior</button>
                    </div>
                </div>

            </div> </div> </section>
</main>

<dialog id="post-pdf-modal" class="post-download-modal">
    <div class="modal-content">
        <button class="modal-close-btn" aria-label="Cerrar modal" data-close-modal>X</button>
        <div class="modal-logo-container">
            <img src="logo_muebles.svg" alt="Logo Tu Taller Eficiente" class="modal-logo">
        </div>
        <h3>¬°Listo! Tu resumen est√° guardado.</h3>
        <p>Espero que esta gu√≠a te ayude un mont√≥n a ponerle precios justos a tus muebles. üòä</p>
        <p class="contribution-text">Si esta herramienta gratuita te sirvi√≥ y quer√©s dar una mano para que siga creciendo y ayudando a m√°s fabricantes, pod√©s considerar estas opciones:</p>
        <div class="modal-actions">
            <a href="[TU_LINK_CAFECITO_O_PAYPAL]" target="_blank" rel="noopener noreferrer" class="btn btn-secondary modal-btn">
                ‚òï Invitarme un Cafecito (Donaci√≥n)
            </a>
            <a href="[TU_LINK_YOUTUBE_MUEBLES]" target="_blank" rel="noopener noreferrer" class="btn btn-primary modal-btn">
                ‚ñ∂Ô∏è Suscribirse al Canal de YouTube
            </a>
        </div>
        <button class="btn btn-outline modal-btn reset-btn" data-close-modal>Cerrar y Seguir Calculando</button>
    </div>
</dialog>

<footer>
    <div class="container">
        <div class="subscribe-pitch">
             <p><strong>¬øTe sirvi√≥ la calculadora?</strong> ¬°Genial! Si quer√©s m√°s data, herramientas y novedades para tu taller de muebles, ¬°seguime en las redes y suscribite a mi canal de YouTube!</p>
        </div>
        <div class="social-links">
             <a href="[TU_INSTAGRAM_MUEBLES]" target="_blank" rel="noopener noreferrer" aria-label="Instagram" title="Instagram de Tu Taller Eficiente">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9 26.3 26.2 58 34.4 93.9 36.2 37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
            </a>
            <a href="[TU_YOUTUBE_MUEBLES]" target="_blank" rel="noopener noreferrer" aria-label="Youtube" title="Canal de YouTube de Tu Taller Eficiente">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor" height="1.5em"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg>
            </a>
        </div>
        <p class="footer-note">Hecho con ‚ù§Ô∏è por <a href="[TU_DOMINIO_PERSONAL_O_MARCA_LINK]" target="_blank" rel="noopener noreferrer">[Tu Nombre o Marca]</a> para ayudar a fabricant@s de muebles como vos üöÄ</p>
        <p class="copyright">
            ¬© <span id="current-year-footer"></span> Tu Taller Eficiente | Todos los derechos reservados |
            <a href="politica_privacidad_muebles.html">Pol√≠tica de Privacidad</a> |
            <a href="acerca_de_muebles.html">Acerca de</a> |
            <a href="contacto_muebles.html">Contacto</a>
        </p>
    </div>
</footer>

<script src="guia_costos_script_muebles.js"></script>
<script>
    // Script simple para el a√±o en el footer de esta p√°gina
    document.getElementById('current-year-footer').textContent = new Date().getFullYear();

    // Manejo b√°sico del modal (si no est√° en el script principal)
    const postPdfModal = document.getElementById('post-pdf-modal');
    const closeButtons = postPdfModal.querySelectorAll('[data-close-modal]');

    closeButtons.forEach(button => {
        button.addEventListener('click', () => {
            postPdfModal.close();
        });
    });
    // Opcional: cerrar si se hace clic fuera del contenido del modal (en el backdrop)
    postPdfModal.addEventListener('click', function(event) {
      if (event.target === postPdfModal) {
        postPdfModal.close();
      }
    });
</script>
</body>
</html>

################################################################################
# ARCHIVO: .\guia_costos_script_muebles.js
################################################################################

/**
 * Script para la Gu√≠a Interactiva de Costos de MUEBLES.
 * Adaptado de la versi√≥n para recetas.
 * Maneja la navegaci√≥n por pasos, validaci√≥n, c√°lculo de costos de materiales,
 * mano de obra, gastos fijos, precio final y exportaci√≥n a PDF.
 *
 * DEPENDENCIAS (si se usa PDF, deben estar en el HTML o importadas):
 * - jsPDF library (https://github.com/parallax/jsPDF)
 * - jsPDF-AutoTable plugin (https://github.com/simonbengtsson/jsPDF-AutoTable)
 */
document.addEventListener('DOMContentLoaded', () => {

    // Verificaci√≥n de Dependencias para PDF (Opcional pero recomendado)
    let jsPDF_is_loaded = (typeof jspdf !== 'undefined' && typeof jspdf.jsPDF !== 'undefined');
    let jsPDF_AutoTable_is_loaded = false;

    if (jsPDF_is_loaded) {
        try {
            const jsPdfInstance = new jspdf.jsPDF();
            if (typeof jsPdfInstance.autoTable === 'function') {
                jsPDF_AutoTable_is_loaded = true;
            } else {
                console.warn("Plugin jsPDF-AutoTable no cargado. Las tablas en PDF tendr√°n formato b√°sico o no funcionar√°n.");
            }
        } catch(e) {
            console.error("Error al instanciar jsPDF para verificar AutoTable:", e);
            jsPDF_is_loaded = false;
        }
    } else {
        console.warn("Librer√≠a jsPDF no est√° cargada. La exportaci√≥n a PDF no funcionar√°. Pod√©s descargarla desde https://cdnjs.com/libraries/jspdf");
    }


    // ===================================================================
    // == FUNCIONES UTILITARIAS INTEGRADAS (adaptadas para MUEBLES) ==
    // ===================================================================
    const baseConversionFactorsMuebles = {
      kg:    { group: "weight", baseUnit: "g",    factor: 1000 },
      g:     { group: "weight", baseUnit: "g",    factor: 1 },
      m:     { group: "length", baseUnit: "m",    factor: 1 },
      cm:    { group: "length", baseUnit: "m",    factor: 0.01 },
      mm:    { group: "length", baseUnit: "m",    factor: 0.001 },
      varilla: {group: "length_discrete", baseUnit: "varilla", factor: 1},
      m2:    { group: "area",   baseUnit: "m2",   factor: 1 },
      placa: { group: "area_discrete", baseUnit: "placa", factor: 1},
      lt:    { group: "volume", baseUnit: "ml",   factor: 1000 },
      ml:    { group: "volume", baseUnit: "ml",   factor: 1 },
      unid:  { group: "discrete", baseUnit: "unid", factor: 1 },
      par:   { group: "discrete", baseUnit: "unid", factor: 2 },
      set:   { group: "discrete", baseUnit: "unid", factor: 1 }, // Simplificado, podr√≠a ser N
      rollo: { group: "length_discrete", baseUnit: "rollo", factor: 1}
    };

    const getUnitGroupMuebles = (unit) => {
        return baseConversionFactorsMuebles[unit]?.group || null;
    };
    
    const formatCurrency = (amount) => {
      if (isNaN(amount) || amount === null) return "$0.00";
      return amount.toLocaleString('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 2, maximumFractionDigits: 2 });
    };

    const parseFloatInput = (value, allowNegative = false) => {
      if (value === null || value === undefined || String(value).trim() === "") return 0;
      const parsed = parseFloat(String(value).replace(',', '.'));
      if (isNaN(parsed)) return 0;
      return allowNegative ? parsed : (parsed < 0 ? 0 : parsed);
    };

    const parseIntInput = (value, min = 1) => {
      if (value === null || value === undefined || String(value).trim() === "") return min;
      const parsed = parseInt(String(value).replace(',', '.'), 10);
      const minimum = min === 0 ? 0 : (isNaN(min) ? 1 : min);
      return isNaN(parsed) || parsed < minimum ? minimum : parsed;
    };

    const areUnitsCompatibleMuebles = (unit1, unit2) => {
      if (!unit1 || !unit2) return false;
      const group1 = getUnitGroupMuebles(unit1);
      const group2 = getUnitGroupMuebles(unit2);
      if (group1 && group1.endsWith("_discrete")) {
          return group1 === group2 || (group2 === "discrete" && baseConversionFactorsMuebles[unit2]?.baseUnit === "unid");
      }
      if (group2 && group2.endsWith("_discrete")) {
          return group1 === group2 || (group1 === "discrete" && baseConversionFactorsMuebles[unit1]?.baseUnit === "unid");
      }
      return group1 === group2 && group1 !== null;
    };

    const getCompatibleUnitsForSelect = (purchasedUnitValue) => {
        const group = getUnitGroupMuebles(purchasedUnitValue);
        if (!group) return [purchasedUnitValue];

        const compatible = new Set(); // Usar Set para evitar duplicados
        for (const unitKey in baseConversionFactorsMuebles) {
            if (getUnitGroupMuebles(unitKey) === group) {
                compatible.add(unitKey);
            }
            if (group.endsWith("_discrete") && getUnitGroupMuebles(unitKey) === "discrete" && baseConversionFactorsMuebles[unitKey].baseUnit === "unid") {
                compatible.add(unitKey);
            }
            if (group === "discrete" && baseConversionFactorsMuebles[purchasedUnitValue].baseUnit === "unid" && getUnitGroupMuebles(unitKey)?.endsWith("_discrete")) {
                 compatible.add(unitKey);
            }
        }
        // Asegurarse que la unidad de compra est√©, por si acaso
        compatible.add(purchasedUnitValue);
        return Array.from(compatible);
    };
    
    const toggleWarning = (warningElement, message = "", isError = true) => {
      if (!warningElement) return;
      warningElement.textContent = message;
      warningElement.classList.toggle("hidden", !message);
      warningElement.style.color = isError ? 'var(--error-color)' : 'var(--warning-color)'; // Opcional: diferente color para advertencias vs errores
    };

    const convertToStandardBase = (quantity, unit) => {
        const unitInfo = baseConversionFactorsMuebles[unit];
        if (!unitInfo) return { quantity, unit, originalUnit: unit, factor: 1 };
        if (unitInfo.baseUnit === unit) {
             return { quantity: quantity * unitInfo.factor, unit: unitInfo.baseUnit, originalUnit: unit, factor: unitInfo.factor };
        }
        if (["g", "m", "ml", "m2"].includes(unitInfo.baseUnit)) {
             return { quantity: quantity * unitInfo.factor, unit: unitInfo.baseUnit, originalUnit: unit, factor: unitInfo.factor };
        }
        return { quantity, unit, originalUnit: unit, factor: 1 }; // Caso por defecto, trata la unidad como su propia base si no hay conversi√≥n directa
    };

    const updateCompatibleUsedUnits = (purchasedUnitSelectEl, usedUnitSelectEl, defaultUsedUnit = null) => {
        if (!purchasedUnitSelectEl || !usedUnitSelectEl) return;
        const purchasedUnitValue = purchasedUnitSelectEl.value;
        const compatibleUnits = getCompatibleUnitsForSelect(purchasedUnitValue);
        const currentUsedUnitInSelect = usedUnitSelectEl.value;

        let selectedValue = null;
        if (compatibleUnits.includes(currentUsedUnitInSelect)) {
            selectedValue = currentUsedUnitInSelect;
        } else if (defaultUsedUnit && compatibleUnits.includes(defaultUsedUnit)) {
            selectedValue = defaultUsedUnit;
        } else if (compatibleUnits.length > 0) {
            selectedValue = compatibleUnits[0]; // Por defecto la primera compatible
        }

        usedUnitSelectEl.innerHTML = ""; // Limpiar opciones
        const originalSelectOptions = Array.from(purchasedUnitSelectEl.options).reduce((acc, opt) => {
            acc[opt.value] = opt.textContent;
            return acc;
        }, {});

        compatibleUnits.forEach(unitKey => {
            const option = document.createElement("option");
            option.value = unitKey;
            option.textContent = originalSelectOptions[unitKey] || unitKey; // Usar texto amigable si est√° disponible
            usedUnitSelectEl.appendChild(option);
        });

        if (selectedValue) {
            usedUnitSelectEl.value = selectedValue;
        } else if (usedUnitSelectEl.options.length > 0) {
            usedUnitSelectEl.value = usedUnitSelectEl.options[0].value;
        }
    };

    const calculateItemCost = (totalQty, totalUnit, price, usedQty, usedUnit) => {
        if (!areUnitsCompatibleMuebles(totalUnit, usedUnit)) {
             console.error(`Intento de c√°lculo con unidades incompatibles: ${totalUnit} y ${usedUnit}`);
             return 0;
        }
        if (totalQty <= 0 || price <= 0 || usedQty < 0) {
            return 0;
        }

        const baseTotal = convertToStandardBase(totalQty, totalUnit);
        const baseUsed = convertToStandardBase(usedQty, usedUnit);

        // Solo calcular si las unidades base son iguales despu√©s de la conversi√≥n a est√°ndar, o si hay una conversi√≥n directa conocida.
        // Esta l√≥gica es crucial y puede necesitar ajustes finos seg√∫n c√≥mo se definan las unidades "discretas" y sus factores.
        if (baseTotal.unit !== baseUsed.unit) {
             // Excepci√≥n: si compramos una "placa" (que es 1 unidad discreta) y queremos usar una porci√≥n en "m2".
             // Necesitar√≠amos el √°rea total de la placa para hacer la proporci√≥n.
             // Esta funci√≥n simple no maneja esos casos complejos. Deber√≠an ser 0 o NaN.
             // Para la gu√≠a interactiva, es mejor que el usuario ya sepa el costo de la porci√≥n si las unidades no son directamente proporcionales.
            console.warn(`Las unidades base ${baseTotal.unit} y ${baseUsed.unit} no son directamente comparables aqu√≠ para el c√°lculo simple de costo.`);
            return 0; // O un valor que indique error
        }

        if (baseTotal.quantity === 0) return 0; // Evitar divisi√≥n por cero

        const costPerBase = price / baseTotal.quantity;
        const finalCost = costPerBase * baseUsed.quantity;

        return isNaN(finalCost) ? 0 : finalCost;
    };

    // --- Selectores del DOM (Gu√≠a Interactiva de Muebles) ---
    const steps = document.querySelectorAll('.step');
    const nextButtons = document.querySelectorAll('.next-step-btn');
    const prevButtons = document.querySelectorAll('.prev-step-btn');
    const progressBarFill = document.getElementById('progressBarFill');
    const progressSteps = document.querySelectorAll('.progress-step');
    const calculateFinalBtn = document.getElementById('calculate-final-guide-btn');
    const generatePdfBtn = document.getElementById('generate-pdf-btn');
    const finalResultsDiv = document.getElementById('guide-final-results');
    const pdfLoader = document.getElementById('pdf-loader');
    const pdfError = document.getElementById('error-pdf');
    const postPdfModal = document.getElementById('post-pdf-modal');
    const modalCloseButtons = postPdfModal?.querySelectorAll('[data-close-modal]');

    // Inputs y Elementos de Datos por Paso
    // Paso 1
    const muebleNameInput = document.getElementById('guide-mueble-name');
    // Paso 2
    const matNameInput = document.getElementById('guide-mat-name');
    const matPriceInput = document.getElementById('guide-mat-price');
    const matTotalQtyInput = document.getElementById('guide-mat-total-qty');
    const matTotalUnitSelect = document.getElementById('guide-mat-total-unit');
    const matUsedQtyInput = document.getElementById('guide-mat-used-qty');
    const matUsedUnitSelect = document.getElementById('guide-mat-used-unit');
    const matUnitWarning = document.getElementById('guide-mat-unit-warning');
    const addMaterialBtn = document.getElementById('add-material-guide-btn');
    const materialsListUl = document.getElementById('guide-materials-list');
    const materialsTotalSpan = document.getElementById('guide-materials-total');
    const emptyMaterialsListMsg = materialsListUl?.querySelector('.list-empty');
    // Paso 3
    const finishesCostInput = document.getElementById('guide-finishes-cost');
    const consumablesCostInput = document.getElementById('guide-consumables-cost');
    const packagingCostInput = document.getElementById('guide-packaging-cost');
    // Paso 4
    const timeInput = document.getElementById('guide-time');
    const hourlyRateInput = document.getElementById('guide-hourly-rate');
    const laborCostDisplay = document.getElementById('guide-labor-cost-display');
    // Paso 5
    const fixedCostInput = document.getElementById('guide-fixed-cost');
    // Paso 6
    const profitInput = document.getElementById('guide-profit');
    const unitsInput = document.getElementById('guide-units'); // Cantidad de muebles id√©nticos
    // Resultados Finales (Spans)
    const resMuebleName = document.getElementById('res-mueble-name');
    const resMaterialOtros = document.getElementById('res-material-otros'); // Materiales + Acabados + Consumibles + Embalaje
    const resLabor = document.getElementById('res-labor');
    const resFixed = document.getElementById('res-fixed');
    const resTotalCost = document.getElementById('res-total-cost');
    const resProfitPerc = document.getElementById('res-profit-perc');
    const resProfit = document.getElementById('res-profit');
    const resUnitsInfo1 = document.getElementById('res-units-info1'); // Para "por X mueble(s)"
    const resFinalPrice = document.getElementById('res-final-price');
    const resUnitPriceRow = document.getElementById('res-unit-price-row');
    const resUnitPrice = document.getElementById('res-unit-price');

    // --- Estado de la Gu√≠a ---
    let currentStep = 1;
    const totalSteps = steps.length;
    let muebleData = {
        name: '',
        materials: [], // Array de objetos {name, totalQty, totalUnit, price, usedQty, usedUnit, cost, id}
        finishesCost: 0,
        consumablesCost: 0,
        packagingCost: 0,
        time: 0, // en minutos
        hourlyRate: 0,
        laborCost: 0,
        fixedCost: 0, // Porci√≥n asignada a este mueble
        profitPercentage: 50, // Default para muebles
        units: 1, // Cantidad de muebles id√©nticos
        totalMaterialCost: 0, // Solo materiales directos del paso 2
        totalOtrosCostosDirectos: 0, // Acabados + Consumibles + Embalaje (Paso 3)
        totalCost: 0, // Costo total de fabricaci√≥n
        profitAmount: 0,
        finalPrice: 0, // Precio total para todas las unidades
        unitPrice: 0 // Precio por cada mueble si son varios
    };

    // --- Funciones de Validaci√≥n y UI Espec√≠ficas de la Gu√≠a ---
    const showError = (fieldIdOrElement, message) => {
        const errorDiv = typeof fieldIdOrElement === 'string' ? document.getElementById(`error-${fieldIdOrElement}`) : fieldIdOrElement.closest('.form-group')?.querySelector('.error-message');
        const inputElement = typeof fieldIdOrElement === 'string' ? document.getElementById(`guide-${fieldIdOrElement}`) || document.getElementById(fieldIdOrElement) : fieldIdOrElement;

        if (errorDiv) {
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }
        if (inputElement && inputElement.tagName !== 'DIV') { // No aplicar 'invalid' a divs de error
            inputElement.classList.add('invalid');
        }
    };

    const clearError = (fieldIdOrElement) => {
        const errorDiv = typeof fieldIdOrElement === 'string' ? document.getElementById(`error-${fieldIdOrElement}`) : fieldIdOrElement.closest('.form-group')?.querySelector('.error-message');
        const inputElement = typeof fieldIdOrElement === 'string' ? document.getElementById(`guide-${fieldIdOrElement}`) || document.getElementById(fieldIdOrElement) : fieldIdOrElement;

        if (errorDiv) {
            errorDiv.classList.add('hidden');
        }
         if (inputElement && inputElement.tagName !== 'DIV') {
            inputElement.classList.remove('invalid');
        }
    };

    const clearStepErrors = (stepElement) => {
        stepElement?.querySelectorAll('.error-message').forEach(el => el.classList.add('hidden'));
        stepElement?.querySelectorAll('.invalid').forEach(el => el.classList.remove('invalid'));
        stepElement?.querySelectorAll('.unit-warning').forEach(el => el.classList.add('hidden'));
    };

    const validateStep = (stepNumber) => {
        let isValid = true;
        const currentStepElement = document.getElementById(`step-${stepNumber}`);
        if (!currentStepElement) return true;

        clearStepErrors(currentStepElement);

        switch (stepNumber) {
            case 1: // Nombre del Mueble
                if (!muebleNameInput?.value.trim()) {
                    showError(muebleNameInput, 'Por favor, dale un nombre a tu mueble o proyecto.');
                    isValid = false;
                }
                break;
            case 2: // Materiales
                if (muebleData.materials.length === 0) {
                    showError('materials-list', '¬°No te olvides de agregar los materiales que usaste!'); // usa el ID del div de error
                    isValid = false;
                } else { clearError('materials-list'); }
                break;
            case 3: // Otros Costos Directos
                if (isNaN(parseFloatInput(finishesCostInput?.value))) { showError(finishesCostInput, 'Ingres√° un n√∫mero v√°lido o 0.'); isValid = false; }
                if (isNaN(parseFloatInput(consumablesCostInput?.value))) { showError(consumablesCostInput, 'Ingres√° un n√∫mero v√°lido o 0.'); isValid = false; }
                if (isNaN(parseFloatInput(packagingCostInput?.value))) { showError(packagingCostInput, 'Ingres√° un n√∫mero v√°lido o 0.'); isValid = false; }
                break;
            case 4: // Tiempo y Mano de Obra
                if (parseIntInput(timeInput?.value, 0) <= 0 && hourlyRateInput?.value > 0) { showError(timeInput, 'Si pon√©s valor/hora, el tiempo debe ser mayor a 0.'); isValid = false; }
                else if (parseIntInput(timeInput?.value, 0) < 0) { showError(timeInput, 'El tiempo no puede ser negativo.'); isValid = false;}
                if (parseFloatInput(hourlyRateInput?.value) < 0) { showError(hourlyRateInput, 'El valor por hora no puede ser negativo.'); isValid = false; }
                break;
            case 5: // Gastos Fijos
                if (isNaN(parseFloatInput(fixedCostInput?.value))) { showError(fixedCostInput, 'Ingres√° un n√∫mero v√°lido o 0.'); isValid = false; }
                break;
            case 6: // Precio Final (validar ANTES de calcular)
                if (parseFloatInput(profitInput?.value) < 0) { showError(profitInput, 'La ganancia no puede ser negativa.'); isValid = false; }
                if (parseIntInput(unitsInput?.value, 1) < 1) { showError(unitsInput, 'La cantidad de muebles debe ser al menos 1.'); isValid = false; }
                break;
        }
        return isValid;
    };

    // --- Funciones de Navegaci√≥n y Estado ---
    const updateProgress = () => {
        const progressPercentage = totalSteps > 1 ? (((currentStep - 1) / (totalSteps -1 )) * 100) : 0;
        if (progressBarFill) progressBarFill.style.width = `${progressPercentage}%`;

        progressSteps?.forEach((stepIndicator) => {
            const stepNum = parseInt(stepIndicator.dataset.step);
            stepIndicator.classList.remove('active', 'completed');
            if (stepNum === currentStep) {
                stepIndicator.classList.add('active');
            } else if (stepNum < currentStep) {
                stepIndicator.classList.add('completed');
            }
        });
    };

    const showStep = (stepNumber) => {
        steps?.forEach(step => step.classList.remove('active'));
        const nextStepElement = document.getElementById(`step-${stepNumber}`);
        if (nextStepElement) {
            nextStepElement.classList.add('active');
            clearStepErrors(nextStepElement);
            // Scroll to the top of the step content, especially useful on mobile
            if (window.innerWidth < 768) {
                nextStepElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        } else {
            console.error(`Elemento del paso ${stepNumber} no encontrado.`);
        }
        updateProgress();
    };

    const saveCurrentStepData = () => {
        try {
            switch(currentStep) {
                case 1: muebleData.name = muebleNameInput?.value.trim() || 'Mueble sin nombre'; break;
                case 2: /* Materiales se guardan al agregar/eliminar */ break;
                case 3:
                    muebleData.finishesCost = parseFloatInput(finishesCostInput?.value);
                    muebleData.consumablesCost = parseFloatInput(consumablesCostInput?.value);
                    muebleData.packagingCost = parseFloatInput(packagingCostInput?.value);
                    break;
                case 4:
                    muebleData.time = parseIntInput(timeInput?.value, 0);
                    muebleData.hourlyRate = parseFloatInput(hourlyRateInput?.value);
                    muebleData.laborCost = (muebleData.time / 60) * muebleData.hourlyRate;
                    calculateAndUpdateLaborCostDisplay(); // Actualizar display intermedio
                    break;
                case 5: muebleData.fixedCost = parseFloatInput(fixedCostInput?.value); break;
                case 6: // Se guardan antes de calcular en calculateFinalResults()
                    muebleData.profitPercentage = parseFloatInput(profitInput?.value);
                    muebleData.units = parseIntInput(unitsInput?.value, 1);
                    break;
            }
        } catch (error) {
            console.error("Error guardando datos del paso:", currentStep, error);
        }
    };

    const goToNextStep = () => {
        if (validateStep(currentStep)) {
            saveCurrentStepData();
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }
    };

    const goToPrevStep = () => {
        // No es necesario guardar datos al retroceder, ya que se validan al avanzar.
        if (currentStep > 1) {
            currentStep--;
            showStep(currentStep);
        }
    };

    // --- L√≥gica Espec√≠fica de Pasos ---

    // == PASO 2: Materiales ==
    const renderMaterialsList = () => {
        if (!materialsListUl) return;
        materialsListUl.querySelectorAll('li:not(.list-header):not(.list-empty)').forEach(li => li.remove());

        if (muebleData.materials.length === 0) {
            emptyMaterialsListMsg?.classList.remove('hidden');
        } else {
            emptyMaterialsListMsg?.classList.add('hidden');
            muebleData.materials.forEach(mat => {
                const li = document.createElement('li');
                li.dataset.id = mat.id;
                // Obtener el texto de la unidad seleccionada para mostrarlo
                const totalUnitText = matTotalUnitSelect.querySelector(`option[value="${mat.totalUnit}"]`)?.textContent || mat.totalUnit;
                const usedUnitText = matUsedUnitSelect.querySelector(`option[value="${mat.usedUnit}"]`)?.textContent || mat.usedUnit;

                li.innerHTML = `
                    <span>${mat.name} (${mat.usedQty} ${usedUnitText})</span>
                    <span>${formatCurrency(mat.cost)}</span>
                    <span><button class="btn-delete-ing" title="Eliminar ${mat.name}">X</button></span>
                `;
                // Insertar antes del mensaje de lista vac√≠a (si existe y est√° visible) o al final.
                if(emptyMaterialsListMsg && !emptyMaterialsListMsg.classList.contains('hidden')) {
                    materialsListUl.insertBefore(li, emptyMaterialsListMsg);
                } else if (emptyMaterialsListMsg) {
                     materialsListUl.insertBefore(li, emptyMaterialsListMsg); // Siempre antes si existe
                }
                 else {
                    materialsListUl.appendChild(li);
                }
                li.querySelector('.btn-delete-ing')?.addEventListener('click', handleDeleteMaterial);
            });
        }
        updateTotalMaterialCost();
    };

    const updateTotalMaterialCost = () => {
        muebleData.totalMaterialCost = muebleData.materials.reduce((sum, mat) => sum + (mat.cost || 0), 0);
        if (materialsTotalSpan) {
            materialsTotalSpan.textContent = formatCurrency(muebleData.totalMaterialCost);
        }
    };

    const handleDeleteMaterial = (event) => {
        const button = event.target;
        const li = button.closest('li');
        if (!li || !li.dataset.id) return;
        const idToDelete = parseInt(li.dataset.id);
        muebleData.materials = muebleData.materials.filter(mat => mat.id !== idToDelete);
        renderMaterialsList();
        validateStep(2); // Revalidar por si queda vac√≠o (mostrar√° el error si es el caso)
    };

    const addMaterialHandler = () => {
        clearError(matNameInput); clearError(matPriceInput);
        clearError(matTotalQtyInput); clearError(matUsedQtyInput);
        clearError('add-material'); // Error general del formulario de material
        toggleWarning(matUnitWarning); // Limpiar advertencia de unidades

        const name = matNameInput?.value.trim();
        const price = parseFloatInput(matPriceInput?.value);
        const totalQty = parseFloatInput(matTotalQtyInput?.value);
        const totalUnit = matTotalUnitSelect?.value;
        const usedQty = parseFloatInput(matUsedQtyInput?.value);
        const usedUnit = matUsedUnitSelect?.value;
        let materialValid = true;

        if (!name) { showError(matNameInput, 'Dale un nombre al material.'); materialValid = false; }
        if (price <= 0) { showError(matPriceInput, 'El precio debe ser mayor a 0.'); materialValid = false; }
        if (totalQty <= 0) { showError(matTotalQtyInput, 'La cantidad comprada debe ser mayor a 0.'); materialValid = false; }
        if (usedQty < 0) { showError(matUsedQtyInput, 'La cantidad usada no puede ser negativa (puede ser 0).'); materialValid = false; }

        if (!areUnitsCompatibleMuebles(totalUnit, usedUnit)) {
            toggleWarning(matUnitWarning, `Las unidades '${matTotalUnitSelect.options[matTotalUnitSelect.selectedIndex].text}' y '${matUsedUnitSelect.options[matUsedUnitSelect.selectedIndex].text}' no son compatibles para un c√°lculo directo.`);
            materialValid = false;
        }

        if (!materialValid) {
            showError('add-material', "Revis√° los campos marcados en el formulario del material.");
            return;
        }

        const itemCost = calculateItemCost(totalQty, totalUnit, price, usedQty, usedUnit);
        if (isNaN(itemCost)) { // Deber√≠a ser manejado por calculateItemCost devolviendo 0
             showError('add-material', 'Error al calcular costo del material. Revis√° valores y unidades.');
             return;
        }

        muebleData.materials.push({ name, totalQty, totalUnit, price, usedQty, usedUnit, cost: itemCost, id: Date.now() });
        renderMaterialsList();
        clearError('materials-list'); // Limpiar error de lista vac√≠a si se agreg√≥ uno

        // Limpiar formulario
        if(matNameInput) matNameInput.value = '';
        if(matPriceInput) matPriceInput.value = '';
        if(matTotalQtyInput) matTotalQtyInput.value = '';
        if(matUsedQtyInput) matUsedQtyInput.value = '';
        // No resetear los selects de unidad, para facilitar ingresos m√∫ltiples
        matNameInput?.focus();
    };

    // == PASO 4: Mano de Obra ==
    const calculateAndUpdateLaborCostDisplay = () => {
        const timeMins = parseIntInput(timeInput?.value, 0);
        const rate = parseFloatInput(hourlyRateInput?.value);
        const cost = (rate >= 0 && timeMins >= 0) ? (timeMins / 60) * rate : 0;
        if (laborCostDisplay) {
            laborCostDisplay.textContent = formatCurrency(cost);
        }
        // El guardado en muebleData.laborCost se hace en saveCurrentStepData
    };

    // == PASO 6: C√°lculo Final ==
    const calculateFinalResults = () => {
        saveCurrentStepData(); // Asegurar que los datos del paso 6 (profit, units) est√©n guardados

        if (!validateStep(1) || !validateStep(2) || !validateStep(3) || !validateStep(4) || !validateStep(5) || !validateStep(6)) {
             finalResultsDiv?.classList.add('hidden');
             if(generatePdfBtn) generatePdfBtn.disabled = true;
             alert("¬°Ojo! Parece que faltan datos o hay errores en algunos pasos anteriores. Revisalos y volv√© a calcular.");
             return false; // Detener si alg√∫n paso previo o el actual no es v√°lido
        }


        // Recalcular totales de costos (algunos ya est√°n en muebleData por saveCurrentStepData)
        muebleData.totalMaterialCost = muebleData.materials.reduce((sum, mat) => sum + (mat.cost || 0), 0); // Actualizar por si acaso
        muebleData.totalOtrosCostosDirectos = muebleData.finishesCost + muebleData.consumablesCost + muebleData.packagingCost;
        muebleData.laborCost = (muebleData.time / 60) * muebleData.hourlyRate; // Recalcular por si acaso
        // fixedCost ya est√° en muebleData.fixedCost

        muebleData.totalCost = muebleData.totalMaterialCost + muebleData.totalOtrosCostosDirectos + muebleData.laborCost + muebleData.fixedCost;
        muebleData.profitAmount = muebleData.totalCost * (muebleData.profitPercentage / 100);
        muebleData.finalPrice = muebleData.totalCost + muebleData.profitAmount; // Este es el precio para la cantidad total de unidades
        muebleData.unitPrice = muebleData.units > 0 ? muebleData.finalPrice / muebleData.units : 0;

        // Mostrar resultados
        if(resMuebleName) resMuebleName.textContent = muebleData.name || 'Tu Mueble';
        if(resMaterialOtros) resMaterialOtros.textContent = formatCurrency(muebleData.totalMaterialCost + muebleData.totalOtrosCostosDirectos);
        if(resLabor) resLabor.textContent = formatCurrency(muebleData.laborCost);
        if(resFixed) resFixed.textContent = formatCurrency(muebleData.fixedCost);
        if(resTotalCost) resTotalCost.textContent = formatCurrency(muebleData.totalCost);
        if(resProfitPerc) resProfitPerc.textContent = muebleData.profitPercentage;
        if(resProfit) resProfit.textContent = formatCurrency(muebleData.profitAmount);

        if(resUnitsInfo1) resUnitsInfo1.textContent = muebleData.units;
        if(resFinalPrice) resFinalPrice.textContent = formatCurrency(muebleData.finalPrice);

        if (muebleData.units > 1) {
            if(resUnitPrice) resUnitPrice.textContent = formatCurrency(muebleData.unitPrice);
            if(resUnitPriceRow) resUnitPriceRow.classList.remove('hidden');
             if(resFinalPrice && resUnitsInfo1) resFinalPrice.closest('p').querySelector('strong').previousSibling.textContent = `PRECIO DE VENTA SUGERIDO (por ${muebleData.units} muebles): `;
        } else {
            if(resUnitPriceRow) resUnitPriceRow.classList.add('hidden');
            if(resFinalPrice && resUnitsInfo1) resFinalPrice.closest('p').querySelector('strong').previousSibling.textContent = `PRECIO DE VENTA SUGERIDO (por 1 mueble): `;
        }

        finalResultsDiv?.classList.remove('hidden');
        if (generatePdfBtn) {
            generatePdfBtn.disabled = !jsPDF_is_loaded; // Habilitar solo si jsPDF est√° ok
             if (!jsPDF_is_loaded) {
                 showError('pdf', 'La librer√≠a PDF no est√° cargada. No se puede generar.');
             } else { clearError('pdf'); }
        }
        return true;
    };

    // == GENERACI√ìN DE PDF (Adaptado para Muebles) ==
    const generateMueblePDF = () => {
        if (!jsPDF_is_loaded || !jsPDF_AutoTable_is_loaded) {
            showError('pdf', 'Error: La librer√≠a PDF o su plugin de tablas no est√°n cargados.');
            return;
        }
        if (!finalResultsDiv || finalResultsDiv.classList.contains('hidden')) {
            showError('pdf', 'Primero calcul√° los resultados finales para poder generar el PDF.');
            return;
        }

        pdfLoader?.classList.remove('hidden');
        if(generatePdfBtn) generatePdfBtn.disabled = true;
        clearError('pdf');

        setTimeout(() => {
            try {
                const { jsPDF } = window.jspdf; // Asegurar que se toma del global
                const doc = new jsPDF();
                const pageHeight = doc.internal.pageSize.height;
                const pageWidth = doc.internal.pageSize.width;
                const margin = 15;
                let currentY = margin;
                const lineHeight = 7; // Espacio entre l√≠neas de texto simple

                // --- T√≠tulo ---
                doc.setFontSize(18); doc.setFont(undefined, 'bold');
                doc.text('Resumen de Costos de Fabricaci√≥n', pageWidth / 2, currentY, { align: 'center' });
                currentY += lineHeight * 2;

                // --- Nombre del Mueble ---
                doc.setFontSize(14); doc.setFont(undefined, 'normal');
                doc.text(`Mueble/Proyecto: ${muebleData.name || 'Sin Nombre'}`, margin, currentY);
                currentY += lineHeight * 2;

                // --- Tabla de Materiales ---
                doc.setFontSize(12); doc.setFont(undefined, 'bold');
                doc.text('Materiales Directos Usados:', margin, currentY);
                currentY += lineHeight;

                const headMaterials = [['Material', 'Cant. Compra', 'Precio Compra', 'Cant. Usada', 'Costo para Mueble']];
                const bodyMaterials = muebleData.materials.map(mat => [
                    mat.name,
                    `${mat.totalQty} ${matTotalUnitSelect.querySelector(`option[value="${mat.totalUnit}"]`)?.textContent || mat.totalUnit}`,
                    formatCurrency(mat.price),
                    `${mat.usedQty} ${matUsedUnitSelect.querySelector(`option[value="${mat.usedUnit}"]`)?.textContent || mat.usedUnit}`,
                    formatCurrency(mat.cost)
                ]);
                doc.autoTable({
                    head: headMaterials, body: bodyMaterials, startY: currentY,
                    margin: { left: margin, right: margin }, theme: 'grid',
                    headStyles: { fillColor: [147, 51, 234] }, // --purple-600
                    styles: { fontSize: 9, cellPadding: 2, overflow: 'linebreak' },
                    columnStyles: {
                        0: { cellWidth: 'auto' }, // Nombre material
                        1: { cellWidth: 40 },     // Compra Cant
                        2: { cellWidth: 35, halign: 'right' }, // Compra Precio
                        3: { cellWidth: 35 },     // Usado Cant
                        4: { cellWidth: 35, halign: 'right' }  // Costo
                    },
                    didDrawPage: (data) => addPdfFooter(doc, data.pageNumber, doc.internal.getNumberOfPages())
                });
                currentY = doc.autoTable.previous.finalY + lineHeight;

                // --- Otros Costos Directos ---
                currentY = checkNewPage(doc, currentY, pageHeight, margin, lineHeight * 4);
                doc.setFontSize(12); doc.setFont(undefined, 'bold');
                doc.text('Otros Costos Directos:', margin, currentY);
                currentY += lineHeight;
                doc.setFontSize(10); doc.setFont(undefined, 'normal');
                currentY = drawKeyValueLine(doc, 'Costo Acabados (pintura, barniz, etc.):', formatCurrency(muebleData.finishesCost), margin, currentY, pageWidth, lineHeight);
                currentY = drawKeyValueLine(doc, 'Costo Consumibles (lijas, mechas, etc.):', formatCurrency(muebleData.consumablesCost), margin, currentY, pageWidth, lineHeight);
                currentY = drawKeyValueLine(doc, 'Costo Embalaje (si aplica):', formatCurrency(muebleData.packagingCost), margin, currentY, pageWidth, lineHeight);
                currentY += lineHeight * 0.5; // Un peque√±o espacio extra

                // --- Desglose de Costos Totales y Precio ---
                currentY = checkNewPage(doc, currentY, pageHeight, margin, lineHeight * 10); // Espacio para el resto
                doc.setFontSize(12); doc.setFont(undefined, 'bold');
                doc.text('Resumen de Costos y Precio Sugerido:', margin, currentY);
                currentY += lineHeight;
                doc.setFontSize(10); doc.setFont(undefined, 'normal');

                currentY = drawKeyValueLine(doc, 'Total Materiales + Otros Directos:', formatCurrency(muebleData.totalMaterialCost + muebleData.totalOtrosCostosDirectos), margin, currentY, pageWidth, lineHeight);
                currentY = drawKeyValueLine(doc, 'Total Mano de Obra (Tu Tiempo):', formatCurrency(muebleData.laborCost), margin, currentY, pageWidth, lineHeight);
                currentY = drawKeyValueLine(doc, 'Total Gastos Fijos del Taller (asignado):', formatCurrency(muebleData.fixedCost), margin, currentY, pageWidth, lineHeight);
                doc.setLineWidth(0.5); doc.line(margin, currentY, pageWidth - margin, currentY); // L√≠nea separadora
                currentY += lineHeight;
                doc.setFont(undefined, 'bold');
                currentY = drawKeyValueLine(doc, 'COSTO TOTAL DE FABRICACI√ìN:', formatCurrency(muebleData.totalCost), margin, currentY, pageWidth, lineHeight, [219, 39, 119]); // Rosa oscuro para costo
                doc.setFont(undefined, 'normal');
                doc.setLineWidth(0.2); doc.line(margin, currentY, pageWidth - margin, currentY);
                currentY += lineHeight;

                currentY = drawKeyValueLine(doc, `Tu Ganancia Estimada (${muebleData.profitPercentage}%):`, formatCurrency(muebleData.profitAmount), margin, currentY, pageWidth, lineHeight);
                doc.setFont(undefined, 'bold');
                currentY = drawKeyValueLine(doc, `PRECIO VENTA SUGERIDO (x${muebleData.units} unid.):`, formatCurrency(muebleData.finalPrice), margin, currentY, pageWidth, lineHeight, [22, 163, 74]); // Verde para precio
                if (muebleData.units > 1) {
                    currentY = drawKeyValueLine(doc, 'Precio Sugerido por Unidad:', formatCurrency(muebleData.unitPrice), margin, currentY, pageWidth, lineHeight, [22, 100, 50]);
                }
                doc.setFont(undefined, 'normal');
                currentY += lineHeight;

                // Disclaimer
                currentY = checkNewPage(doc, currentY, pageHeight, margin, lineHeight * 3);
                doc.setFontSize(8); doc.setTextColor(100);
                doc.text("Record√°: Este es un precio sugerido. Analiz√° tu mercado, la calidad de tus materiales, tu dise√±o y el valor que aport√°s.", margin, currentY, { maxWidth: pageWidth - margin * 2 });

                addPdfFooter(doc, doc.internal.getPageInfo(doc.internal.getCurrentPageInfo().pageNumber).pageNumber, doc.internal.getNumberOfPages()); // Pie de p√°gina en la √∫ltima
                doc.save(`Costos_${(muebleData.name || 'Mueble').replace(/[^a-z0-9]/gi, '_')}.pdf`);

                // Mostrar modal de agradecimiento/siguientes pasos
                if (postPdfModal) {
                    try { postPdfModal.showModal(); } catch (e) { console.error("Error al mostrar modal:", e); }
                }

            } catch (error) {
                console.error("Error al generar el PDF del mueble:", error);
                showError('pdf', 'Ups! Hubo un problema al intentar generar el PDF.');
            } finally {
                pdfLoader?.classList.add('hidden');
                if(generatePdfBtn) generatePdfBtn.disabled = false;
            }
        }, 100); // Peque√±o delay para que se muestre el loader
    };

    const checkNewPage = (doc, currentY, pageHeight, margin, spaceNeeded) => {
        if (currentY + spaceNeeded > pageHeight - margin - 15) { // 15 para el footer
            addPdfFooter(doc, doc.internal.getPageInfo(doc.internal.getCurrentPageInfo().pageNumber).pageNumber, doc.internal.getNumberOfPages());
            doc.addPage();
            return margin; // Reset Y to top margin
        }
        return currentY;
    };

    const drawKeyValueLine = (doc, key, value, x, y, pageWidth, lineHeight, color = [0,0,0]) => {
        doc.setTextColor(color[0], color[1], color[2]);
        doc.text(key, x, y);
        doc.text(value, pageWidth - x, y, { align: 'right' });
        doc.setTextColor(0,0,0); // Reset color
        return y + lineHeight;
    };

    const addPdfFooter = (doc, pageNum, totalPages) => {
         const pageHeight = doc.internal.pageSize.height;
         const pageWidth = doc.internal.pageSize.width;
         const margin = 15;
         const footerY = pageHeight - margin + 7; // Un poco m√°s abajo

         doc.setFontSize(8);
         doc.setTextColor(150, 150, 150); // Gris
         const siteName = "Tu Taller Eficiente"; // Reemplazar con el nombre real del sitio
         doc.text(`PDF generado desde ${siteName} (${window.location.hostname})`, margin, footerY);
         doc.text(`P√°gina ${pageNum} de ${totalPages}`, pageWidth - margin, footerY, { align: 'right' });
         doc.setTextColor(0,0,0); // Reset color
    };


    // --- Event Listeners ---
    nextButtons?.forEach(button => button.addEventListener('click', goToNextStep));
    prevButtons?.forEach(button => button.addEventListener('click', goToPrevStep));
    addMaterialBtn?.addEventListener('click', addMaterialHandler);

    matTotalUnitSelect?.addEventListener('change', () => {
        updateCompatibleUsedUnits(matTotalUnitSelect, matUsedUnitSelect);
        toggleWarning(matUnitWarning); // Limpiar advertencia al cambiar
    });
    matUsedUnitSelect?.addEventListener('change', () => { // Validar al cambiar unidad usada
         if (!areUnitsCompatibleMuebles(matTotalUnitSelect.value, matUsedUnitSelect.value)) {
             toggleWarning(matUnitWarning, `Unidades '${matTotalUnitSelect.options[matTotalUnitSelect.selectedIndex].text}' y '${matUsedUnitSelect.options[matUsedUnitSelect.selectedIndex].text}' no son compatibles.`);
         } else { toggleWarning(matUnitWarning); }
    });

    timeInput?.addEventListener('input', calculateAndUpdateLaborCostDisplay);
    hourlyRateInput?.addEventListener('input', calculateAndUpdateLaborCostDisplay);

    calculateFinalBtn?.addEventListener('click', calculateFinalResults);
    generatePdfBtn?.addEventListener('click', generateMueblePDF);

    // Limpiar errores al escribir en los inputs principales de cada paso
    const inputsToClearErrorOnInput = [
        muebleNameInput, matNameInput, matPriceInput, matTotalQtyInput, matUsedQtyInput,
        finishesCostInput, consumablesCostInput, packagingCostInput,
        timeInput, hourlyRateInput, fixedCostInput, profitInput, unitsInput
    ];
    inputsToClearErrorOnInput.forEach(inputEl => {
        inputEl?.addEventListener('input', () => clearError(inputEl));
    });
    
    // Cerrar modal
    modalCloseButtons?.forEach(button => {
        button.addEventListener('click', () => {
            postPdfModal?.close();
        });
    });
    postPdfModal?.addEventListener('click', function(event) { // Cerrar al hacer clic fuera
      if (event.target === postPdfModal) {
        postPdfModal.close();
      }
    });


    // --- Inicializaci√≥n de la Gu√≠a ---
    if (steps.length > 0) {
        showStep(currentStep); // Mostrar el primer paso
        // Inicializar unidades para el formulario de materiales
        if (matTotalUnitSelect && matUsedUnitSelect) {
            // Llenar el select de unidad de compra con las opciones del HTML
            // (esto asume que matTotalUnitSelect ya tiene las options)
            updateCompatibleUsedUnits(matTotalUnitSelect, matUsedUnitSelect, 'unid'); // Default a 'unid' o la primera compatible
        }
        renderMaterialsList(); // Mostrar lista vac√≠a (o con items si se implementa persistencia)
        calculateAndUpdateLaborCostDisplay(); // Calcular costo laboral inicial (ser√° 0 si los inputs est√°n vac√≠os)
    } else {
        console.warn("No se encontraron elementos de pasos (.step) en la p√°gina de la gu√≠a.");
    }

}); // Fin DOMContentLoaded

################################################################################
# ARCHIVO: .\guia_costos_style_muebles.css
################################################################################

/* Estilos espec√≠ficos para la Gu√≠a Interactiva de Costos de Muebles */
/* Aseg√∫rate que style_muebles.css (con variables --) se cargue ANTES */

.cost-guide-section {
    padding: 2rem 0; /* Un poco menos de padding para dar m√°s espacio a la gu√≠a */
}

.cost-guide-container {
    background-color: var(--white);
    padding: 1.5rem; /* Padding ajustado */
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    max-width: 850px; /* Un poco m√°s ancho para la gu√≠a detallada */
    margin: 1.5rem auto;
}

/* Barra de Progreso */
.progress-bar-container {
    margin-bottom: 2.5rem; /* M√°s espacio antes de los pasos */
    padding: 0 0.5rem;
}
.progress-bar {
    width: 100%;
    background-color: var(--gray-200);
    border-radius: 99px;
    overflow: hidden;
    height: 12px; /* Un poco m√°s gruesa para mejor visibilidad */
}
.progress-bar-fill {
    height: 100%;
    width: 0%; /* Inicia en 0, JS la controla */
    background: linear-gradient(to right, var(--purple-400), var(--purple-600)); /* Un degradado diferente */
    border-radius: 99px;
    transition: width 0.4s ease-in-out;
}
.progress-steps {
    display: flex;
    justify-content: space-between;
    margin-top: 0.75rem; /* M√°s cerca de la barra */
}
.progress-step {
    font-size: 0.8rem; /* Ligeramente m√°s peque√±o para acomodar m√°s pasos si es necesario */
    color: var(--gray-500); /* Color m√°s suave para pasos inactivos */
    font-weight: 500;
    text-align: center;
    flex: 1; /* Ocupar espacio igual */
    padding: 0 3px; /* Peque√±o padding */
    transition: color 0.4s ease, font-weight 0.4s ease;
    position: relative;
}
.progress-step.active {
    color: var(--purple-700); /* Color m√°s fuerte para paso activo */
    font-weight: 700;
}
.progress-step.completed {
    color: var(--purple-500); /* Color para pasos completados */
    font-weight: 600;
}

/* Opcional: L√≠nea visual conectora (si se quiere mantener) */
.progress-step:not(:last-child)::after {
    content: '';
    position: absolute;
    top: -1.35rem; /* Ajustar arriba de la barra (considerando altura de barra de 12px) */
    left: 50%;
    right: -50%;
    height: 2px;
    background-color: var(--gray-200);
    z-index: -1;
}
.progress-step.completed::after, .progress-step.active::after {
     background-color: var(--purple-400);
}
.progress-step:last-child::after {
    display: none;
}


/* Estructura de los Pasos de la Gu√≠a */
.step {
    display: none; /* Ocultos por defecto, JS los muestra */
    border: 1px solid var(--purple-100); /* Borde m√°s sutil con color secundario */
    padding: 1.75rem; /* M√°s padding interno en cada paso */
    margin-top: 1.5rem;
    border-radius: var(--radius);
    background-color: var(--purple-50); /* Fondo muy suave para cada paso */
    animation: fadeIn 0.5s ease; /* Misma animaci√≥n que en la web original */
}
.step.active {
    display: block;
}
.step h2 {
    text-align: center;
    color: var(--purple-800); /* Color de t√≠tulo de paso */
    margin-bottom: 1.5rem;
    font-size: 1.7rem; /* T√≠tulos de paso m√°s grandes */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem; /* Espacio para el emoji */
}
.step p.section-intro-step, .step > p:first-of-type { /* Para el p√°rrafo introductorio de cada paso */
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--gray-700); /* Texto introductorio m√°s oscuro */
    font-size: 1.05rem;
    max-width: 650px;
    margin-left: auto;
    margin-right: auto;
}

/* Formulario de A√±adir Material (reutilizando y adaptando de la original) */
.add-ingredient-guide-form { /* Mantener nombre de clase para reutilizar CSS base */
    margin-bottom: 2rem;
    padding: 1.5rem;
    background-color: var(--white);
    border-radius: var(--radius);
    border: 1px solid var(--gray-200); /* Borde m√°s neutro */
    box-shadow: var(--shadow-sm);
}
.add-ingredient-guide-form h4 {
    text-align: center;
    margin-bottom: 1.25rem; /* M√°s espacio */
    color: var(--purple-700); /* T√≠tulo del formulario */
    font-size: 1.2rem;
}
/* Grid Compacto para Materiales (como en la original) */
.compact-form-grid {
    display: grid;
    grid-template-columns: 1fr; /* Mobile: una columna */
    gap: 1.25rem; /* Un poco m√°s de espacio */
    margin-bottom: 1.25rem;
}

/* Estilos de inputs y labels heredados de style_muebles.css */
.input-with-select select {
    min-width: 90px; /* Ajuste para unidades de muebles */
}

/* Mensajes de Error (heredados, pero se puede ajustar si es necesario) */
.error-message {
    color: var(--error-color);
    font-size: 0.85rem; /* Un poco m√°s grande */
    margin-top: 5px;
    font-weight: 500;
}
/* .error-message.hidden se hereda */
/* input.invalid, select.invalid se hereda */


/* Lista Resumen de Materiales (adaptado de ingredientes) */
.table-responsive-container { /* Heredado */
    overflow-x: auto;
    margin-bottom: 1rem;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius);
}
.ingredients-summary-list { /* Mantener nombre para reutilizar, es una lista de "ingredientes" del mueble */
    list-style: none;
    padding: 0;
    margin: 0;
    /* border: 1px solid var(--gray-200); */ /* Quitado, ya est√° en el container */
    /* border-radius: var(--radius); */
    overflow: hidden;
    min-width: 550px; /* Ancho m√≠nimo para que no se apriete tanto */
}
.ingredients-summary-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem 1rem; /* M√°s padding vertical */
    border-bottom: 1px solid var(--gray-100); /* Borde m√°s sutil */
    background-color: var(--white);
    font-size: 0.95rem; /* Texto un poco m√°s grande */
}
.ingredients-summary-list li:last-child {
    border-bottom: none;
}
.ingredients-summary-list li.list-header {
    background-color: var(--gray-100); /* Fondo de cabecera neutro */
    font-weight: 600;
    color: var(--gray-700);
    font-size: 0.85rem; /* Cabecera un poco m√°s grande */
    text-transform: uppercase;
    letter-spacing: 0.5px; /* Mejorar legibilidad */
}
/* Ajustar anchos de columnas en la lista de materiales */
.ingredients-summary-list li span:first-child { /* Nombre del Material */
    flex-grow: 1;
    margin-right: 1rem;
    word-break: break-word;
    color: var(--gray-800); /* Texto m√°s oscuro para el nombre */
}
.ingredients-summary-list li span:nth-child(2) { /* Costo para el Mueble */
    font-weight: 600; /* Costo destacado */
    min-width: 120px; /* Ancho m√≠nimo para costo */
    text-align: right;
    flex-shrink: 0;
    color: var(--purple-700); /* Color de acento para el costo */
}
.ingredients-summary-list li span:nth-child(3) { /* Acci√≥n Borrar */
    min-width: 50px; /* M√°s espacio para el bot√≥n */
    text-align: right;
    flex-shrink: 0;
}
.ingredients-summary-list .btn-delete-ing { /* Bot√≥n Borrar */
    /* Hereda de style_muebles.css, se puede ajustar aqu√≠ si es necesario */
    /* Ejemplo: background-color: var(--gray-400); */
}
.ingredients-summary-list .list-empty {
    text-align: center;
    color: var(--gray-500);
    padding: 1.5rem 1rem; /* M√°s padding si est√° vac√≠o */
    background-color: var(--gray-50);
    font-style: italic;
}

.ingredients-total { /* Total de materiales */
    text-align: right;
    margin-top: 0.75rem;
    font-size: 1.15rem;
    color: var(--purple-800);
    font-weight: 700; /* Total bien destacado */
    padding: 0.5rem;
    background-color: var(--purple-50);
    border-radius: var(--radius);
}

/* Resultados Calculados Intermedios (Mano de Obra en Paso 4) */
.calculated-result {
    text-align: center;
    font-size: 1.15rem;
    margin-top: 1.5rem; /* M√°s separaci√≥n */
    padding: 1rem;
    background-color: var(--purple-100); /* Fondo con color de acento */
    border-radius: var(--radius);
    color: var(--purple-800);
    border: 1px solid var(--purple-200);
}
.calculated-result strong {
    color: var(--purple-900);
    font-weight: 700;
}

/* Tarjeta Final de Resultados (Paso 6) */
.final-results-card {
    margin-top: 2rem;
    padding: 1.75rem; /* M√°s padding */
    border: 2px solid var(--success-color); /* Borde verde √©xito */
    border-radius: var(--radius);
    background-color: #f0fdf4; /* Verde muy p√°lido (relacionado con success-color) */
    box-shadow: var(--shadow-md);
}
.final-results-card h3 {
    text-align: center;
    color: var(--gray-800); /* T√≠tulo del resumen */
    margin-bottom: 1.5rem;
    font-size: 1.4rem;
}
.final-results-card h3 span { /* Para el nombre del mueble */
    color: var(--purple-700);
    font-style: italic;
}
.final-results-card p {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 0.75rem; /* Espacio entre l√≠neas de resultados */
    padding-bottom: 0.75rem;
    border-bottom: 1px dashed var(--gray-300);
    text-align: left;
    font-size: 1rem; /* Texto de resultados m√°s grande */
    color: var(--gray-700); /* Color base para texto de resultados */
}
.final-results-card p:last-of-type {
    border-bottom: none;
}
.final-results-card strong {
    font-weight: 700;
    margin-left: 0.5rem;
    text-align: right;
    flex-shrink: 0;
    color: var(--gray-900); /* Valores en un color m√°s oscuro */
}
.final-results-card .total-cost-row strong {
    color: var(--error-color); /* Costo total en rojo */
    font-size: 1.2em; /* Destacar m√°s */
}
.final-results-card .final-price-row strong {
    color: var(--success-color); /* Precio de venta en verde */
    font-size: 1.4em; /* Destacar mucho m√°s */
}
.final-results-card p.disclaimer {
    font-size: 0.85rem;
    color: var(--gray-600);
    margin-top: 1.5rem;
    text-align: center;
    border-bottom: none;
    padding-bottom: 0;
    line-height: 1.5;
}


/* Acciones PDF (heredado, se puede ajustar) */
.pdf-actions {
    margin-top: 2rem; /* M√°s espacio */
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
}
/* .pdf-actions .btn-secondary (y su :disabled) se hereda de style_muebles.css */
/* .pdf-actions .btn-secondary svg se hereda */

/* Indicador de Carga (Loader) (heredado) */
.loader {
  border: 4px solid var(--gray-200);
  border-top: 4px solid var(--purple-500); /* Loader con color secundario */
  border-radius: 50%;
  width: 30px; /* Un poco m√°s grande */
  height: 30px;
  animation: spin 1s linear infinite;
  margin: 0.75rem auto; /* Centrado */
}
/* .loader.hidden se hereda */
/* @keyframes spin se hereda */


/* Navegaci√≥n entre pasos (botones Anterior/Siguiente) */
.step-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 2.5rem; /* M√°s espacio antes de los botones */
    border-top: 1px solid var(--purple-200); /* L√≠nea separadora m√°s visible */
    padding-top: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}
/* Si solo hay un bot√≥n (ej. primer o √∫ltimo paso), alinearlo */
.step-nav:has(.next-step-btn:last-child:first-child) { /* Solo bot√≥n Siguiente */
     justify-content: flex-end;
}
.step-nav:has(.prev-step-btn:last-child:first-child) { /* Solo bot√≥n Anterior */
     justify-content: flex-start;
}


/* Estilos para el Modal Post-Descarga PDF (reutilizados y adaptados) */
.post-download-modal {
    border: none;
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    padding: 0;
    max-width: 520px; /* Un poco m√°s ancho */
    width: calc(100% - 30px); /* Mejor manejo en m√≥viles */
    overflow: visible; /* Para el bot√≥n de cierre */
}
.post-download-modal[open] {
    animation: fadeInModal 0.3s ease-out;
}
.post-download-modal::backdrop {
    background-color: rgba(31, 25, 45, 0.6); /* Fondo m√°s oscuro, con un toque de p√∫rpura */
    backdrop-filter: blur(4px);
}
.modal-content {
    padding: 2rem 2.5rem; /* M√°s padding */
    text-align: center;
    position: relative;
}
.modal-close-btn { /* Bot√≥n de cerrar el modal */
    position: absolute;
    top: 12px; /* Ajustar posici√≥n */
    right: 12px;
    background: none;
    border: none;
    font-size: 2rem; /* M√°s grande */
    font-weight: 300; /* M√°s liviano */
    color: var(--gray-400);
    cursor: pointer;
    line-height: 1;
    padding: 8px; /* √Årea de click m√°s grande */
    transition: color 0.2s ease;
}
.modal-close-btn:hover { color: var(--gray-700); }

.modal-logo-container { margin-bottom: 1.25rem; }
.modal-logo { max-width: 120px; height: auto; } /* Ajustar tama√±o del logo en modal */

.modal-content h3 {
    color: var(--purple-700); /* T√≠tulo del modal */
    margin-bottom: 1rem;
    font-size: 1.5rem; /* M√°s grande */
}
.modal-content p {
    color: var(--gray-700); /* Texto del modal */
    margin-bottom: 1.25rem;
    line-height: 1.65;
}
.modal-content .contribution-text {
    font-size: 0.95rem;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    color: var(--gray-600);
}
.modal-actions {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
    align-items: center;
}
.modal-btn { /* Botones dentro del modal */
    width: 100%;
    max-width: 300px; /* Ancho m√°ximo botones */
    text-decoration: none;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: 0.6rem; /* Espacio para iconos */
    padding: 0.8rem 1.5rem; /* Padding botones modal */
}
.modal-btn.reset-btn { /* Bot√≥n de cerrar/resetear */
    margin-top: 1rem;
    background-color: var(--gray-100);
    border-color: var(--gray-300);
    color: var(--gray-700);
}
.modal-btn.reset-btn:hover {
    background-color: var(--gray-200);
}

/* Centrado del Modal (heredado) */
.post-download-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin: 0;
}
/* Animaci√≥n (heredada) */
@keyframes fadeInModal {
  from { opacity: 0; transform: translate(-50%, -45%) scale(0.95); } /* Sutil animaci√≥n de entrada */
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}


/* Media Queries para Responsividad de la Gu√≠a */
@media (min-width: 600px) {
    .cost-guide-container {
        padding: 2rem;
    }
    .compact-form-grid {
        grid-template-columns: repeat(2, 1fr); /* 2 columnas en tablet */
    }
    .form-grid:not(.compact-form-grid) { /* Grids normales, ej. Paso 3, 4, 5 */
         grid-template-columns: 1fr 1fr;
    }
     .final-results-card p {
        font-size: 1.05rem; /* Un poco m√°s grande en tablet */
    }
    .modal-actions { /* Botones del modal lado a lado en tablet */
        flex-direction: row;
        justify-content: center;
    }
    .modal-btn { width: auto; }
}

@media (min-width: 768px) {
     .cost-guide-section { padding: 2.5rem 0; }
     .step h2 { font-size: 1.9rem; } /* T√≠tulos de paso m√°s grandes */
     .progress-step { font-size: 0.85rem; }

     .compact-form-grid { /* Para el form de a√±adir materiales */
        /* Podr√≠a ser m√°s flexible si los labels son largos */
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        align-items: end;
    }
     /* Si se quiere que el bot√≥n de "Agregar Material" ocupe todo el ancho en desktop: */
    .add-ingredient-guide-form .btn-secondary {
        /* grid-column: 1 / -1;  Descomentar si se quiere full-width */
        /* margin-top: 0.5rem; */
    }
}
@media (min-width: 992px) { /* Pantallas m√°s grandes */
    .compact-form-grid {
        grid-template-columns: repeat(4, 1fr); /* 4 columnas para a√±adir material en desktop */
    }
    .form-grid:not(.compact-form-grid) { /* Como en Paso 3, 4, 5 */
         grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* M√°s flexible */
    }
}   

################################################################################
# ARCHIVO: .\index.html
################################################################################

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de Costos para fabricantes de muesbles | Excel-ente</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Calculadora GRATIS para fabricantes de muebles. Aprend√© f√°cil a calcular costos de materiales, tu tiempo y pon√© precios justos a tus creaciones.">
    <meta name="keywords" content="calculadora costos muebles, precio muebles argentina, calcular costos carpinteria, emprender muebleria, gastos taller, precio justo muebles">
    <meta name="author" content="Tu Taller Eficiente">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.mueblerias.calculadoradecostos.com.ar"> <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.mueblerias.calculadoradecostos.com.ar"> <meta property="og:title" content="Calculadora de Costos para Muebles | Tu Taller Eficiente">
    <meta property="og:description" content="Calcul√° f√°cil el costo real y el precio justo para tus muebles. ¬°Ideal para carpinteros y emprendedores!">
    <meta property="og:image" content="[URL_IMAGEN_PARA_COMPARTIR]"> <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.mueblerias.calculadoradecostos.com.ar"> <meta property="twitter:title" content="Calculadora de Costos para Muebles | Tu Taller Eficiente">
    <meta property="twitter:description" content="Calcul√° f√°cil el costo real y el precio justo para tus muebles. ¬°Ideal para carpinteros y emprendedores!">
    <meta property="twitter:image" content="[URL_IMAGEN_PARA_COMPARTIR]"> <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon_muebles.ico" type="image/x-icon">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Calculadora de Costos para Muebles - Tu Taller Eficiente",
      "url": "https://www.mueblerias.calculadoradecostos.com.ar", "description": "Herramienta web gratuita para ayudar a fabricantes de muebles y carpinteros a calcular costos y precios de sus trabajos y productos.",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "ARS"
      },
      "author": {
        "@type": "Organization",
        "name": "Tu Taller Eficiente"
      }
    }
    </script>
</head>
<body>

    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <a href="index.html"> <img src="logo_excelente.svg" alt="Logo Tu Taller Eficiente" class="logo-image">
                </a>
            </div>
            </div>
    </header>

        <main>


        <img src="logo.svg" alt="Logo Excel-ente" style="display: block; margin: 2rem auto; max-height: 400px;">



        <section class="hero">
            <div class="container">
                <h1>¬øTe cuesta saber cu√°nto cobrar por tus muebles?</h1>
                <p class="intro-text">Sabemos que te romp√©s la cabeza pensando cu√°nto cobrar por ese mueble que tanto te cost√≥ hacer. Entre la madera, los tornillos, el barniz, y tus horas de laburo... ¬°uff! Esta calculadora es <strong>GRATIS</strong> y te ayuda a sacar esos n√∫meros f√°cil y r√°pido.</p>
                <a href="guia_costos_muebles.html" class="btn btn-primary btn-lg">¬°Calcul√° el Costo Detallado de Tu Mueble!</a>
            </div>
        </section>

        <section id="calculator" class="calculator-section">
            <div class="container">
                <h2>Calculadora R√°pida (Materiales / Cortes)</h2>
                <p class="section-intro">Us√° esta calculadora para saber al toque cu√°nto te cost√≥ ese pedazo de material que usaste, o para calcular el precio de un corte espec√≠fico de una placa.</p>
                <div class="calculator-card">

                    <div class="form-group">
                        <label for="name">
                            Nombre del Material / Placa
                            <span class="tooltip">
                                <span class="tooltip-icon">?</span>
                                <span class="tooltip-text">Ej: Placa MDF 18mm, Pino Elliotis 1x4, Barniz al Agua.</span>
                            </span>
                        </label>
                        <input type="text" id="name" placeholder="Ej: Melamina Blanca 18mm">
                    </div>

                    <div class="form-group">
                        <label for="totalPrice">
                            Precio Total de Compra ($)
                            <span class="tooltip">
                                <span class="tooltip-icon">?</span>
                                <span class="tooltip-text">¬øCu√°nto pagaste por la placa entera, el list√≥n, la lata de barniz, etc.? Ej: 25000</span>
                            </span>
                        </label>
                        <input type="number" id="totalPrice" placeholder="Ej: 25000" min="0" step="any">
                    </div>

                    <div class="form-group">
                        <label for="materialType">Tipo de C√°lculo:</label>
                        <select id="materialType">
                            <option value="general">Calcular costo por Cantidad Usada (General)</option>
                            <option value="placa">Calcular costo por Corte de Placa (√Årea)</option>
                        </select>
                    </div>

                    <hr class="section-divider">

                    <div id="placaInputs" class="hidden conditional-inputs">
                        <h4>Datos de la Placa Comprada:</h4>
                        <div class="form-grid dimensions-grid">
                            <div class="form-group">
                                <label for="purchasedPlacaWidth">Ancho Placa Comprada:</label>
                                <input type="number" id="purchasedPlacaWidth" placeholder="Ej: 1830">
                            </div>
                            <div class="form-group">
                                <label for="purchasedPlacaHeight">Alto Placa Comprada:</label>
                                <input type="number" id="purchasedPlacaHeight" placeholder="Ej: 2750">
                            </div>
                             <div class="form-group">
                                <label for="purchasedPlacaUnit">Unidad Medidas:</label>
                                <select id="purchasedPlacaUnit">
                                    <option value="mm">mm</option>
                                    <option value="cm">cm</option>
                                    <option value="m">m</option>
                                </select>
                            </div>
                        </div>
                        <h4>Dimensiones del Corte Necesario:</h4>
                        <p class="small-text instruction-text">Ingres√° las medidas del corte usando la <strong>misma unidad</strong> que la placa comprada.</p>
                        <div class="form-grid dimensions-grid">
                            <div class="form-group">
                                <label for="cutWidth">Ancho del Corte:</label>
                                <input type="number" id="cutWidth" placeholder="Ej: 600">
                            </div>
                            <div class="form-group">
                                <label for="cutHeight">Alto del Corte:</label>
                                <input type="number" id="cutHeight" placeholder="Ej: 400">
                            </div>
                        </div>
                        <div id="unit-warning-placa" class="unit-warning hidden"></div> </div>

                    <div id="generalInputs" class="conditional-inputs"> <h4>Datos de la Compra y Uso (General):</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="purchasedQuantity">
                                    Cantidad Total Comprada
                                    <span class="tooltip">
                                        <span class="tooltip-icon">?</span>
                                        <span class="tooltip-text">¬øCu√°nto trae el paquete, list√≥n, envase? Ej: 1 (placa), 3.05 (metros), 100 (tornillos).</span>
                                    </span>
                                </label>
                                <div class="input-with-select">
                                    <input type="number" id="purchasedQuantity" placeholder="Ej: 1" min="0.001" step="any">
                                    <select id="purchasedUnit">
                                        <option value="unid">Unidades (unid)</option>
                                        <option value="m2">Metros Cuadrados (m¬≤)</option>
                                        <option value="m">Metros Lineales (m)</option>
                                        <option value="cm">Cent√≠metros (cm)</option>
                                        <option value="mm">Mil√≠metros (mm)</option>
                                        <option value="kg">Kilos (kg)</option>
                                        <option value="g">Gramos (g)</option>
                                        <option value="lt">Litros (lt)</option>
                                        <option value="ml">Mililitros (ml)</option>
                                        <option value="placa">Placa Entera</option>
                                        <option value="varilla">Varilla Entera</option>
                                        <option value="rollo">Rollo Entero</option>
                                        <option value="par">Par</option>
                                        <option value="set">Set/Juego</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="usedQuantity">
                                    Cantidad que Usaste en tu Mueble
                                    <span class="tooltip">
                                        <span class="tooltip-icon">?</span>
                                        <span class="tooltip-text">¬øCu√°nto de ese material necesitaste para ESTE mueble? Ej: 0.5 (m¬≤), 20 (unid), 150 (cm).</span>
                                    </span>
                                </label>
                                <div class="input-with-select">
                                    <input type="number" id="usedQuantity" placeholder="Ej: 0.5" min="0" step="any">
                                    <select id="usedUnit">
                                        </select>
                                </div>
                                <div id="unit-warning-general" class="unit-warning hidden"></div> </div>
                        </div>
                    </div>

                    <div id="result" class="result-card hidden">
                        <h3>Resultado:</h3>
                        <p id="result-text"></p>
                        <div class="result-actions">
                            <button id="copy-btn" class="btn-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="currentColor" style="margin-right: 0.4em;"><path d="M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272c-8.8 0-16-7.2-16-16s7.2-16 16-16H320V256H192c-17.7 0-32-14.3-32-32V192H128V128H64z"/></svg>
                                Copiar
                            </button>
                            <button id="share-btn" class="btn-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="currentColor" style="margin-right: 0.4em;"><path d="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-146.1 84.4c-16.4-13.6-37.8-21.9-61.6-21.9c-53 0-96 43-96 96s43 96 96 96c23.8 0 45.2-8.3 61.6-21.9L256.7 356.1c-.5 3.9-.7 7.9-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-23.8 0-45.2 8.3-61.6 21.9L148.7 307.9c.5-3.9 .7-7.9 .7-11.9s-.2-8-.7-11.9l142.1-81.6c16.4 13.6 37.8 21.9 61.6 21.9zM48 224c0 17.7 14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32zm320 160c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0-256c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"/></svg>
                                Compartir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="educational-section basic-concepts">
            <div class="container">
                <h2>Entendiendo Tus Gastos: ¬°Lo B√°sico para Mueblistas!</h2>
                <p class="section-intro">Para poner un precio justo a tus muebles, primero ten√©s que saber cu√°nto te cuesta hacerlos. Hay dos tipos de gastos principales:</p>

                <div class="edu-grid">
                    <div class="edu-card">
                        <div class="edu-card-header">
                            <h3>Gastos Variables (o Directos)</h3>
                            <span>(los que cambian con cada mueble)</span>
                        </div>
                        <div class="edu-card-content">
                            <p>Son los que ten√©s espec√≠ficamente para hacer un mueble. ¬°Si hac√©s m√°s muebles, gast√°s m√°s de esto!</p>
                            <ul>
                                <li><strong>Maderas y Placas:</strong> Pino, para√≠so, MDF, melamina, etc. (¬°Us√° la calcu de arriba para esto!).</li>
                                <li><strong>Herrajes y Adhesivos:</strong> Tornillos, clavos, bisagras, correderas, manijas, cola de carpintero.</li>
                                <li><strong>Acabados:</strong> Lijas, barniz, pintura, laca, cera, tintes.</li>
                                <li><strong>Embalaje Espec√≠fico:</strong> Si us√°s cart√≥n, film, etc., para proteger ESE mueble al entregarlo.</li>
                                <li><strong>Consumibles Directos:</strong> Mechas que se gastan, discos de corte, etc. (proporcional al uso).</li>
                                <li><strong>Luz de las M√°quinas (Directa):</strong> Lo que gastan la sierra, el taladro, la lijadora *mientras trabaj√°s en ESE mueble*. (¬°La gu√≠a detallada te ayuda con esto!).</li>
                            </ul>
                        </div>
                    </div>

                    <div class="edu-card">
                        <div class="edu-card-header">
                            <h3>Gastos Fijos (o Indirectos)</h3>
                             <span>(los que ten√©s todos los meses)</span>
                        </div>
                        <div class="edu-card-content">
                            <p>Son los gastos que ten√©s s√≠ o s√≠, todos los meses, vendas o no vendas. ¬°Hay que cubrirlos con tus precios!</p>
                            <ul>
                                <li><strong>Alquiler del Taller</strong> (o parte proporcional si es en casa).</li>
                                <li><strong>Servicios del Taller:</strong> Luz general, agua, internet, gas.</li>
                                <li><strong>Impuestos:</strong> Monotributo, Ingresos Brutos, etc.</li>
                                <li><strong>¬°Tu Sueldo!</strong> (Fijate un monto que necesit√°s ganar por mes).</li>
                                <li><strong>Desgaste Herramientas/Amortizaci√≥n:</strong> Una partecita del valor de tus m√°quinas caras.</li>
                                <li><strong>Otros Fijos:</strong> Celular, software, contador, publicidad b√°sica, veh√≠culo (si es del taller).</li>
                            </ul>
                            <p><a href="#fixed-costs-calculator" class="link-highlight">¬°Calcul√° cu√°nto sumar por mueble con la calculadora de abajo!</a></p>
                        </div>
                    </div>
                </div>

                <div class="value-time-note">
                    <h3>¬°Tu Tiempo de Trabajo Vale Oro! ‚è±Ô∏èüí∞</h3>
                    <p>Muchos se olvidan de esto: <strong>tus horas de dise√±o, corte, armado, lijado, pintura... ¬°todo ese tiempo y tu habilidad tienen un costo!</strong> No es solo lo que gast√°s en madera y tornillos.</p>
                    <p><strong>¬øCu√°nto vale tu hora?</strong> Pens√° cu√°nto te gustar√≠a ganar por mes (tu sueldo fijo + ganancias) y dividilo por las horas que realmente trabaj√°s fabricando. ¬°Es un buen punto de partida!</p>
                    <p><small>La <a href="guia_costos_muebles.html" class="link-highlight">Gu√≠a Interactiva Detallada</a> te ayuda a calcular esto f√°cil.</small></p>
                </div>

                <div class="formula-card simplified">
                  <div class="formula-card-header">
                      <h3>La F√≥rmula Simplificada para el Precio</h3>
                  </div>
                  <div class="formula-card-content">
                      <div class="formula-box">
                          <p>( Materiales + Herrajes + Acabados ) + ( Tu Tiempo de Trabajo ) + ( Pedacito de Gastos Fijos ) + ( Tu Ganancia ) = <strong>Precio de Venta</strong></p>
                      </div>
                      <p class="text-center">¬°No te asustes! Con la <a href="guia_costos_muebles.html" class="link-highlight">Gu√≠a Interactiva</a>, esto se calcula paso a paso.</p>
                  </div>
                </div>
            </div>
        </section>

        <section id="fixed-costs-calculator" class="fixed-costs-section">
          <div class="container">
              <div class="section-header">
                  <h2>Calculadora de Gastos Fijos del Taller (Mensuales)</h2>
                  <p class="section-intro">Anot√° ac√° todos tus gastos fijos del mes. Despu√©s, estim√° cu√°ntos muebles (o proyectos grandes) hac√©s por mes para saber cu√°nto "sumarle" de gasto fijo a cada uno.</p>
              </div>

              <div class="fixed-costs-calculator">
                  <div class="fixed-costs-form">
                      <h4>1. List√° tus Gastos Fijos del Mes ($)</h4>
                      <div class="form-grid fixed-costs-grid">
                          <div class="form-group">
                              <label for="rent">Alquiler Taller / Espacio</label>
                              <input type="number" id="rent" placeholder="Ej: 50000" min="0" step="any" value="0">
                          </div>
                          <div class="form-group">
                              <label for="services">Servicios (Luz, Agua, Internet...)</label>
                              <input type="number" id="services" placeholder="Ej: 15000" min="0" step="any" value="0">
                          </div>
                          <div class="form-group">
                              <label for="taxes">Impuestos (Monotributo, IIBB...)</label>
                              <input type="number" id="taxes" placeholder="Ej: 10000" min="0" step="any" value="0">
                          </div>
                          <div class="form-group">
                            <label for="salary">Tu Sueldo Fijo Deseado</label>
                            <input type="number" id="salary" placeholder="Ej: 200000" min="0" step="any" value="0">
                          </div>
                          <div class="form-group">
                              <label for="marketing">Marketing / Publicidad Fija</label>
                              <input type="number" id="marketing" placeholder="Ej: 5000" min="0" step="any" value="0">
                          </div>
                           <div class="form-group">
                              <label for="amortization">Amortizaci√≥n Herramientas</label>
                               <span class="tooltip">
                                  <span class="tooltip-icon">?</span>
                                  <span class="tooltip-text">Estim√° cu√°nto se desgastan tus m√°quinas caras por mes. (Ej: Costo M√°quina / Meses Vida √ötil)</span>
                              </span>
                              <input type="number" id="amortization" placeholder="Ej: 8000" min="0" step="any" value="0">
                          </div>
                          <div class="form-group">
                              <label for="other-fixed">Otros Fijos (Celular, software...)</label>
                              <input type="number" id="other-fixed" placeholder="Ej: 7000" min="0" step="any" value="0">
                          </div>
                      </div>

                      <div class="fixed-costs-total">
                          <h4>Total Gastos Fijos del Mes: <span id="monthly-fixed-total">$0.00</span></h4>
                      </div>

                      <div class="fixed-costs-distribution">
                          <h4>2. Repart√≠ el Gasto Fijo entre tus Muebles</h4>
                          <div class="form-group">
                              <label for="monthly-products">¬øCu√°ntos muebles (o proyectos promedio) estim√°s hacer/vender por mes?</label>
                              <input type="number" id="monthly-products" placeholder="Ej: 10" min="1" step="1" value="10">
                          </div>
                          <div class="distribution-result">
                              <h4>üëâ Gasto Fijo a sumar por CADA Mueble: <span id="fixed-per-product">$0.00</span></h4>
                              <p>Este es el monto que deber√≠as incluir en el costo de CADA mueble que hagas para cubrir tus gastos fijos. ¬°Usalo en la <a href="guia_costos_muebles.html" class="link-highlight">Gu√≠a Detallada</a>!</p>
                          </div>
                      </div>
                      <p class="disclaimer">Nota: Esta es una forma simple de repartir. Si hac√©s muebles muy diferentes (una silla vs. un placard), podr√≠as necesitar un m√©todo m√°s avanzado, pero esto es un buen comienzo.</p>
                  </div>
              </div>
          </div>
        </section>

        <section class="cake-example-section">
            <div class="container">
                <div class="section-header">
                    <h2>Ejemplo Pr√°ctico: Calculando el Costo de una "Repisa Flotante"</h2>
                    <p class="section-intro">Veamos un ejemplo completo, paso a paso. Pod√©s modificar los valores para practicar.</p>
                </div>
                <div class="cake-tabs">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="materials">1. Materiales</button>
                        <button class="tab-btn" data-tab="process">2. Procesos</button>
                        <button class="tab-btn" data-tab="finishes">3. Acabados</button>
                        <button class="tab-btn" data-tab="packaging_ex">4. Embalaje</button>
                        <button class="tab-btn" data-tab="time_ex">5. Tu Tiempo</button>
                        <button class="tab-btn" data-tab="total_ex">6. Precio Final</button>
                    </div>
                     <div class="tabs-content">
                         <div class="tab-content active" id="materials-tab">
                             <h3>1. Costo de Materiales (Madera, Hierro, Tornillos)</h3>
                             <p>Calcul√° el costo de cada material para esta repisa espec√≠fica.</p>
                             <div class="ingredients-calculator">
                                 <table class="ingredients-table responsive-table">
                                     <thead><tr><th>Material</th><th>Compra (Cant.)</th><th>Compra (Precio $)</th><th>Usado (Cant.)</th><th>Costo ($)</th><th>Acci√≥n</th></tr></thead>
                                     <tbody id="materials-tbody-example">
                                         <tr><td>Madera Pino (Tabla 1x6")</td><td>3.05 m (1 tabla)</td><td>$3500</td><td>1.2 m</td><td>$1377.05</td> <td><button class="btn-delete-row">X</button></td></tr>
                                         <tr><td>M√©nsula de Hierro (par)</td><td>1 par</td><td>$2800</td><td>1 par</td><td>$2800.00</td><td><button class="btn-delete-row">X</button></td></tr>
                                         <tr><td>Tornillos Fix 4x50 (caja)</td><td>100 unid</td><td>$900</td><td>8 unid</td><td>$72.00</td> <td><button class="btn-delete-row">X</button></td></tr>
                                     </tbody>
                                     <tfoot><tr><td colspan="4" class="total-label">Total Materiales:</td><td id="materials-total-example" class="total-value">$4249.05</td><td></td></tr></tfoot>
                                 </table>
                                 <div class="add-ingredient-form example-form">
                                     <h4>Agregar Otro Material al Ejemplo</h4>
                                     <div class="form-row compact-form-row">
                                         <div class="form-group"><label for="ex-mat-name">Material</label><input type="text" id="ex-mat-name" placeholder="Ej: Tapa canto PVC"></div>
                                         <div class="form-group"><label for="ex-mat-total-qty">Cant. Comprada</label><div class="input-with-select"><input type="number" id="ex-mat-total-qty" placeholder="10" min="0" step="any"><select id="ex-mat-total-unit"><option value="m">m</option><option value="m2">m¬≤</option><option value="unid">unid</option><option value="kg">kg</option><option value="lt">lt</option><option value="cm">cm</option><option value="mm">mm</option><option value="g">g</option><option value="ml">ml</option></select></div></div>
                                         <div class="form-group"><label for="ex-mat-price">Precio Compra ($)</label><input type="number" id="ex-mat-price" placeholder="600" min="0" step="any"></div>
                                         <div class="form-group"><label for="ex-mat-used-qty">Cant. Usada</label><div class="input-with-select"><input type="number" id="ex-mat-used-qty" placeholder="2" min="0" step="any"><select id="ex-mat-used-unit"></select></div></div>
                                     </div>
                                     <button id="add-material-btn-example" class="btn btn-secondary">Agregar al Ejemplo</button>
                                     <div id="ex-mat-unit-warning" class="unit-warning hidden"></div>
                                 </div>
                             </div>
                             <div class="next-step"><p>Calcul√° todos tus materiales y pas√° al siguiente paso.</p><button class="btn btn-primary next-tab-btn" data-next="process">Siguiente: Procesos</button></div>
                         </div>
                         <div class="tab-content" id="process-tab">
                              <h3>2. Costo de Procesos y Energ√≠a (Corte, Lijado, Ensamblado)</h3>
                              <p>Estim√° cu√°nto gast√°s de luz de m√°quinas, y el desgaste de herramientas peque√±as (lijas, mechas) por CADA repisa.</p>
                              <div class="baking-calculator">
                                  <div class="baking-grid">
                                      <div class="baking-card">
                                          <h4>Consumo El√©ctrico (M√°quinas)</h4>
                                          <div class="form-group"><label for="machine-power-avg">Potencia Promedio M√°quinas (Watts)</label><input type="number" id="machine-power-avg" value="800" min="0"></div>
                                          <div class="form-group"><label for="process-time">Tiempo Uso M√°quinas (Minutos)</label><input type="number" id="process-time" value="30" min="0"></div>
                                          <div class="form-group"><label for="electricity-cost-kwh">Costo Electricidad por kWh ($)</label><input type="number" id="electricity-cost-kwh" value="50" min="0" step="any"></div>
                                          <div class="result-box"><p>Costo Electricidad M√°quinas: $<span id="machine-electricity-result">20.00</span></p></div>
                                      </div>
                                      <div class="baking-card">
                                          <h4>Consumibles Peque√±os</h4>
                                          <div class="form-group"><label for="consumables-cost">Costo Estimado (Lijas, Mechas, etc.) por Repisa ($)</label><input type="number" id="consumables-cost" value="150" min="0" step="any"></div>
                                          <div class="result-box"><p>Costo Consumibles: $<span id="consumables-result">150.00</span></p></div>
                                      </div>
                                      <div class="baking-card">
                                          <h4>Amortizaci√≥n Herramientas Grandes</h4>
                                          <div class="form-group"><label for="tool-total-cost">Costo Total Herramientas (Ej: Sierra)</label><input type="number" id="tool-total-cost" value="300000" min="0"></div>
                                          <div class="form-group"><label for="tool-lifespan-projects">Vida √ötil Estimada (En cantidad de proyectos)</label><input type="number" id="tool-lifespan-projects" value="500" min="1"></div>
                                          <div class="result-box"><p>Costo por Uso Herramienta: $<span id="tool-amortization-result">600.00</span></p></div>
                                      </div>
                                  </div>
                                  <div class="baking-total"><h4>Total Costo Procesos/Energ√≠a: $<span id="process-total-example">770.00</span></h4></div>
                              </div>
                              <div class="next-step"><button class="btn btn-outline prev-tab-btn" data-prev="materials">Anterior</button><button class="btn btn-primary next-tab-btn" data-next="finishes">Siguiente: Acabados</button></div>
                         </div>
                         <div class="tab-content" id="finishes-tab">
                            <h3>3. Costo de Acabados (Barniz, Laca, Cera)</h3>
                            <p>Agreg√° los costos de los productos que us√°s para darle el toque final a la repisa.</p>
                            <div class="decoration-calculator">
                                <table class="decoration-table responsive-table">
                                    <thead><tr><th>Producto de Acabado</th><th>Compra (Cant.)</th><th>Compra (Precio $)</th><th>Usado (Cant.)</th><th>Costo ($)</th><th>Acci√≥n</th></tr></thead>
                                    <tbody id="finishes-tbody-example"><tr><td>Barniz Satinado al Agua</td><td>1 lt</td><td>$4500</td><td>0.1 lt (100ml)</td><td>$450.00</td><td><button class="btn-delete-row">X</button></td></tr></tbody>
                                    <tfoot><tr><td colspan="4" class="total-label">Total Acabados:</td><td id="finishes-total-example" class="total-value">$450.00</td><td></td></tr></tfoot>
                                </table>
                                <div class="add-ingredient-form example-form">
                                    <h4>Agregar Producto de Acabado al Ejemplo</h4>
                                    <div class="form-row compact-form-row">
                                        <div class="form-group"><label>Producto</label><input type="text" id="ex-finish-name" placeholder="Ej: Cera en pasta"></div>
                                        <div class="form-group"><label>Cant. Compra</label><div class="input-with-select"><input type="number" id="ex-finish-total-qty" min="0" step="any" placeholder="250"><select id="ex-finish-total-unit"><option value="ml">ml</option><option value="lt">lt</option><option value="g">g</option><option value="kg">kg</option><option value="unid">unid</option></select></div></div>
                                        <div class="form-group"><label>Precio Compra ($)</label><input type="number" id="ex-finish-price" min="0" step="any" placeholder="1200"></div>
                                        <div class="form-group"><label>Cant. Usada</label><div class="input-with-select"><input type="number" id="ex-finish-used-qty" min="0" step="any" placeholder="50"><select id="ex-finish-used-unit"></select></div></div>
                                    </div>
                                    <button id="add-finish-btn-example" class="btn btn-secondary">Agregar</button>
                                    <div id="ex-finish-unit-warning" class="unit-warning hidden"></div>
                                </div>
                            </div>
                            <div class="next-step"><button class="btn btn-outline prev-tab-btn" data-prev="process">Anterior</button><button class="btn btn-primary next-tab-btn" data-next="packaging_ex">Siguiente: Embalaje</button></div>
                         </div>
                         <div class="tab-content" id="packaging_ex-tab">
                              <h3>4. Costo de Embalaje (Si es necesario para esta repisa)</h3>
                              <p>Sum√° el costo del film, cart√≥n, pluribol, etc., si la repisa se entrega embalada.</p>
                              <div class="packaging-calculator">
                                  <table class="packaging-table responsive-table">
                                      <thead><tr><th>Elemento de Embalaje</th><th>Costo Unitario ($)</th><th>Cantidad Usada</th><th>Costo Total ($)</th><th>Acci√≥n</th></tr></thead>
                                      <tbody id="packaging-tbody-example">
                                          <tr><td>Film Stretch (Rollo de X metros)</td><td>$10/metro (calculado)</td> <td>3 metros</td><td>$30.00</td><td><button class="btn-delete-row">X</button></td></tr>
                                          <tr><td>Etiqueta con logo</td><td>$50</td><td>1</td><td>$50.00</td><td><button class="btn-delete-row">X</button></td></tr>
                                      </tbody>
                                      <tfoot><tr><td colspan="3" class="total-label">Total Embalaje:</td><td id="packaging-total-example" class="total-value">$80.00</td><td></td></tr></tfoot>
                                  </table>
                                  <div class="add-ingredient-form example-form">
                                      <h4>Agregar Elemento de Embalaje al Ejemplo</h4>
                                      <div class="form-row compact-form-row">
                                          <div class="form-group"><label>Elemento</label><input type="text" id="ex-pack-name" placeholder="Ej: Pluribol"></div>
                                          <div class="form-group"><label>Costo Unitario ($)</label><input type="number" id="ex-pack-price" min="0" step="any" placeholder="100"></div>
                                          <div class="form-group"><label>Cantidad Usada</label><input type="number" id="ex-pack-qty" min="1" step="1" value="1" placeholder="1"></div>
                                      </div>
                                      <button id="add-packaging-btn-example" class="btn btn-secondary">Agregar</button> </div>
                              </div>
                              <div class="next-step"><button class="btn btn-outline prev-tab-btn" data-prev="finishes">Anterior</button><button class="btn btn-primary next-tab-btn" data-next="time_ex">Siguiente: Tu Tiempo</button></div>
                          </div>
                         <div class="tab-content" id="time_ex-tab">
                             <h3>5. El Valor de Tu Tiempo de Laburo</h3>
                             <p>Calcul√° cu√°nto tiempo te lleva hacer esta repisa y cu√°nto vale tu hora de carpintero/a.</p>
                             <div class="time-calculator">
                                 <div class="time-grid">
                                     <div class="time-card">
                                         <h4>Tiempo de Fabricaci√≥n (Minutos)</h4>
                                         <div class="form-group"><label>Dise√±o y Planificaci√≥n:</label><input type="number" class="time-input-example" value="20" min="0"></div>
                                         <div class="form-group"><label>Corte de Madera:</label><input type="number" class="time-input-example" value="15" min="0"></div>
                                         <div class="form-group"><label>Lijado y Preparaci√≥n:</label><input type="number" class="time-input-example" value="30" min="0"></div>
                                         <div class="form-group"><label>Ensamblado:</label><input type="number" class="time-input-example" value="25" min="0"></div>
                                     </div>
                                     <div class="time-card">
                                         <h4>Tiempo Adicional (Minutos)</h4>
                                         <div class="form-group"><label>Aplicaci√≥n de Acabados:</label><input type="number" class="time-input-example" value="40" min="0"></div>
                                         <div class="form-group"><label>Limpieza del Taller:</label><input type="number" class="time-input-example" value="15" min="0"></div>
                                         <div class="form-group"><label>Empaquetado (si aplica):</label><input type="number" class="time-input-example" value="5" min="0"></div>
                                         <div class="form-group"><label>Otros (Ej: Compras):</label><input type="number" class="time-input-example" value="10" min="0"></div>
                                     </div>
                                     <div class="time-card">
                                         <h4>Valor de tu Hora de Trabajo</h4>
                                         <div class="form-group">
                                             <label for="hourly-rate-example">¬øCu√°nto vale tu hora de trabajo? ($)</label>
                                             <input type="number" id="hourly-rate-example" value="3500" min="0" step="any">
                                         </div>
                                         <div class="time-results">
                                             <div class="result-item"><span>Tiempo Total Invertido:</span><span id="total-time-example">2 horas 40 min</span></div>
                                             <div class="result-item highlight"><span>Costo Mano de Obra:</span><span id="time-value-example">$9333.33</span></div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <div class="next-step"><button class="btn btn-outline prev-tab-btn" data-prev="packaging_ex">Anterior</button><button class="btn btn-primary next-tab-btn" data-next="total_ex">Siguiente: Precio Final</button></div>
                         </div>
                         <div class="tab-content" id="total_ex-tab">
                             <h3>6. Calculando el Precio Final de la Repisa (Ejemplo)</h3>
                             <p>¬°Lleg√≥ el momento! Sumemos todo y definamos el precio para esta repisa.</p>
                             <div class="total-calculator">
                                 <div class="total-summary">
                                     <table class="total-table responsive-table">
                                         <thead><tr><th>Concepto del Gasto</th><th>Costo ($)</th></tr></thead>
                                         <tbody>
                                             <tr><td>1. Materiales Directos</td><td id="final-materials-example">$4249.05</td></tr>
                                             <tr><td>2. Procesos y Energ√≠a</td><td id="final-process-example">$770.00</td></tr>
                                             <tr><td>3. Acabados</td><td id="final-finishes-example">$450.00</td></tr>
                                             <tr><td>4. Embalaje</td><td id="final-packaging-example">$80.00</td></tr>
                                             <tr><td>5. Tu Tiempo de Laburo (Mano de Obra)</td><td id="final-time-example">$9333.33</td></tr>
                                             <tr class="subtotal-row"><td><strong>Subtotal Costos Directos + Mano Obra</strong></td><td id="subtotal-example"><strong>$14882.38</strong></td></tr>
                                             <tr><td>6. Gastos Fijos del Taller (calculado arriba)</td><td id="final-fixed-costs-example">$0.00</td></tr>
                                             <tr class="total-row"><td><strong>COSTO TOTAL DE FABRICACI√ìN</strong></td><td id="total-cost-example"><strong>$14882.38</strong></td></tr>
                                         </tbody>
                                     </table>
                                     <div class="profit-calculator">
                                         <h4>7. Defin√≠ Tu Ganancia</h4>
                                         <div class="form-group">
                                             <label for="profit-percentage-example">Porcentaje de Ganancia deseado (%)</label>
                                             <div class="range-container">
                                                <input type="range" id="profit-percentage-example" min="10" max="200" value="50" step="5">
                                                <span id="profit-percentage-value-example" class="percentage-display">50%</span>
                                              </div>
                                         </div>
                                         <div class="profit-result">
                                             <div class="result-item"><span>Tu Ganancia Estimada:</span><span id="profit-amount-example">$7441.19</span></div>
                                              <div class="form-group small-margin">
                                                <label for="portions-example">¬øCu√°ntas repisas iguales son?</label>
                                                <input type="number" id="portions-example" value="1" min="1" step="1" style="max-width: 80px;">
                                              </div>
                                             <div class="result-item"><span>Precio por Repisa (si son varias):</span><span id="portion-price-example">$22323.57</span></div>
                                             <div class="result-item highlight"><span>PRECIO VENTA SUGERIDO (Total):</span><span id="final-price-example">$22323.57</span></div>
                                         </div>
                                     </div>
                                 </div>
                                 <div class="pricing-tips">
                                     <h4>¬°Importante! Antes de poner el precio final:</h4>
                                     <ul>
                                         <li><strong>Chusme√° a la competencia:</strong> ¬øCu√°nto cobran otros por repisas parecidas?</li>
                                         <li><strong>Pens√° en tu valor agregado:</strong> ¬øUsaste madera de primera? ¬øDise√±o original? ¬øTerminaciones impecables?</li>
                                         <li><strong>Confianza en tu laburo:</strong> ¬°No tengas miedo de cobrar lo que vale tu trabajo!</li>
                                         <li><strong>Comunic√° el valor:</strong> Explic√° a tus clientes por qu√© tus muebles son especiales.</li>
                                     </ul>
                                 </div>
                             </div>
                             <div class="next-step"><button class="btn btn-outline prev-tab-btn" data-prev="time_ex">Anterior</button><button id="recalculate-example-btn" class="btn btn-primary">Recalcular Ejemplo</button></div>
                         </div>
                    </div>
                </div>
            </div>
        </section>


        <section class="pricing-strategies-section">
            <div class="container">
                <div class="section-header">
                    <h2>¬øC√≥mo Poner el Precio Final? Algunas Ideas</h2>
                    <p class="section-intro">Calcular el costo es el primer gran paso. Despu√©s, pens√° qu√© forma de poner precios te conviene m√°s.</p>
                </div>
                <div class="strategies-grid">
                  <div class="strategy-card">
                    <div class="strategy-icon">üí∞</div>
                    <h3>Costo + Ganancia</h3>
                    <p>Es lo que hicimos en el ejemplo: sum√°s todos tus gastos (costo total) y le agreg√°s el porcentaje de ganancia que quer√©s.</p>
                    <p><strong>Ideal para:</strong> Asegurarte de cubrir todo y tener una ganancia predecible. ¬°Es la base!</p>
                  </div>
                  <div class="strategy-card">
                    <div class="strategy-icon">üåü</div>
                    <h3>Basado en Valor</h3>
                    <p>Pens√°s en cu√°nto est√° dispuesto a pagar tu cliente por la calidad, dise√±o √∫nico, personalizaci√≥n, marca o soluci√≥n que ofreces.</p>
                    <p><strong>Ideal para:</strong> Muebles de dise√±o, trabajos a medida, productos con fuerte diferencial.</p>
                  </div>
                  <div class="strategy-card">
                    <div class="strategy-icon">üëÄ</div>
                    <h3>Basado en Competencia</h3>
                    <p>Investig√° los precios de otros fabricantes o tiendas. Te posicion√°s en un rango similar, superior o inferior seg√∫n tu estrategia.</p>
                    <p><strong>Ideal para:</strong> Entender el mercado, si tus productos son est√°ndar o ten√©s mucha competencia.</p>
                  </div>
                </div>
                <div class="pricing-recommendation">
                  <h3>Nuestro consejo:</h3>
                  <p>Us√° una mezcla: <strong>Calcul√° bien tus costos</strong> (base fundamental), mir√° de reojo a la <strong>competencia</strong> para no estar fuera de mercado, y si tu mueble tiene un <strong>valor especial</strong> (dise√±o, calidad, artesan√≠a), ¬°no dudes en reflejarlo en el precio!</p>
                </div>
            </div>
        </section>

        <section class="articles-section">
            <div class="container">
                <div class="section-header">
                    <h2>Recursos y Ayuditas Extra para tu Taller</h2>
                    <p class="section-intro">Ac√° te dejamos algunas cositas que te pueden servir para optimizar tu trabajo.</p>
                </div>
                <div class="download-card">
                    <div class="download-visual">
                        <img src="imagen_planilla_muebles.jpg" alt="Planilla de Despiece para Muebles" >
                    </div>
                    <div class="download-content">
                        <h2>Planilla Pr√°ctica para Despiece y Cortes</h2>
                        <p>Esta planilla de Excel te puede ayudar a organizar los cortes de madera para aprovechar mejor el material y reducir desperdicios. ¬°Ideal para optimizar tus placas!</p>
                        <p><small>Pod√©s ver un tutorial de c√≥mo usarla en nuestro canal de YouTube: <a href="[TU_LINK_VIDEO_YOUTUBE_PLANILLA]" target="_blank" rel="noopener noreferrer">Ver Video Tutorial</a>.</small></p>
                        <a href="descargas/planilla_despiece_muebles.zip" download class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor" style="margin-right: 0.5em;"><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>
                            Descargar Planilla (.zip)
                        </a>
                    </div>
                </div>
                 </div>
        </section>

        <footer>
            <div class="container">
                <div class="subscribe-pitch">
                    <p><strong>¬øTe sirvi√≥ la calculadora?</strong> ¬°Genial! Si quer√©s m√°s data, herramientas y novedades para tu taller de muebles, ¬°seguime en las redes y suscribite a mi canal de YouTube!</p>
                     <a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">Ir al Canal de YouTube</a>
                </div>
                <div class="social-links">

                    <a href="https://www.instagram.com/excel.entes" target="_blank" rel="noopener noreferrer" aria-label="Instagram Excel-ente" title="Instagram Excel-ente">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9 26.3 26.2 58 34.4 93.9 36.2 37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                    </a>
                    <a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" aria-label="Youtube Excel-ente" title="Youtube Excel-ente"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor" height="1.5em"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg>
                    </a>
                    <a href="https://www.tiktok.com/@excel.entes" target="_blank" rel="noopener noreferrer" aria-label="TikTok Excel-ente" title="TikTok Excel-ente">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg>
                    </a>
                </div>

                <p class="footer-note">Hecho con ‚ù§Ô∏è por <a href="https://excel-ente.com" target="_blank" rel="noopener noreferrer">Excel-ente</a> para ayudar a emprendedores como vos üöÄ</p>

                <p class="copyright">
                    ¬© <span id="current-year"></span> Tu Taller Eficiente | Todos los derechos reservados |
                    <a href="politica_privacidad_muebles.html">Pol√≠tica de Privacidad</a> |
                    <a href="acerca_de_muebles.html">Acerca de</a> |
                    <a href="contacto_muebles.html">Contacto</a>
                </p>
            </div>
        </footer>
    </main>

    <a href="guia_costos_muebles.html" class="fab fab-link" aria-label="Ir a la Gu√≠a Interactiva de Costos de Muebles" title="¬°Calcul√° el costo detallado de tu mueble aqu√≠!">
        <svg xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 512 512" fill="currentColor"><path d="M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c2.1 6 1.7 12.6-1.2 18.1S463.5 224 457.1 224H54.9c-6.4 0-12.2-4.3-14.1-10.6c-2.9-5.5-3.3-12.1-1.2-18.1zM496 272c0-26.5-21.5-48-48-48H64c-26.5 0-48 21.5-48 48V416c0 53 43 96 96 96H416c53 0 96-43 96-96V272zM192 352c0-8.8-7.2-16-16-16s-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V352zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V352zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v64c0 8.8 7.2 16 16 16s16-7.2 16-16V352z"/></svg>
    </a>

    <script src="script.js"></script>
    </body>
</html>

################################################################################
# ARCHIVO: .\politica_privacidad_muebles.html
################################################################################

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pol√≠tica de Privacidad | Calculadora de Recetas</title> 
    <link rel="stylesheet" href="styles.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Puedes a√±adir estilos espec√≠ficos aqu√≠ si quieres diferenciar la p√°gina */
        main { padding-top: 2rem; padding-bottom: 3rem; } 
        .privacy-content h2 { 
            margin-top: 2rem; 
            margin-bottom: 1rem;
            text-align: left; /* Alinear subt√≠tulos a la izquierda */
            font-size: 1.4rem; 
            color: var(--purple-800); /* Usar variable de tu CSS */
            border-bottom: 2px solid var(--pink-200); /* Usar variable */
            padding-bottom: 0.3rem;
            display: inline-block;
        }
         .privacy-content h1 {
             margin-bottom: 2rem;
         }
        .privacy-content p, .privacy-content ul {
            margin-bottom: 1rem;
            text-align: left;
             color: var(--purple-700); /* Usar variable */
        }
         .privacy-content li {
             margin-bottom: 0.5rem;
         }
          .privacy-content a {
              text-decoration: underline; /* Subrayar enlaces para claridad */
          }
           .container {
               max-width: 800px; /* Limitar ancho para mejor lectura */
           }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <a href="index.html"> <img src="logo_excelente.svg" alt="Logo Tu Taller Eficiente" class="logo-image">
                </a>
            </div>
            </div>
    </header>
    <main>
        <div class="container">
            <div class="privacy-content">
                <h1>Pol√≠tica de Privacidad</h1>

                <p><strong>√öltima actualizaci√≥n:</strong> <span id="last-updated">30 de abril de 2025</span></p> 
                <p>Bienvenido/a a calculadora de costos, accesible desde https://www.mueblerias.calculadoradecostos.com.ar (en adelante, "nosotros", "nuestro", "el Sitio"). Tu privacidad es importante para nosotros. Esta Pol√≠tica de Privacidad explica c√≥mo manejamos la informaci√≥n en nuestro sitio web est√°tico y c√≥mo nuestros socios (como Google AdSense) pueden usarla.</p>
                
                <p>Aunque este sitio web es principalmente est√°tico y no recopilamos activamente informaci√≥n personal identificable de nuestros visitantes (como nombres, correos electr√≥nicos a trav√©s de formularios de registro), s√≠ utilizamos servicios de terceros, como Google AdSense, que pueden recopilar ciertos datos para funcionar correctamente y mostrar anuncios relevantes.</p>

                <h2>Informaci√≥n que Recopilan Terceros (Google AdSense)</h2>
                <p>Utilizamos Google AdSense para mostrar anuncios en nuestro Sitio. Google, como proveedor externo, utiliza cookies para publicar anuncios en este sitio.</p>
                <ul>
                    <li>El uso de la cookie DART por parte de Google le permite publicar anuncios a los usuarios basados en sus visitas a este sitio y a otros sitios en Internet.</li>
                    <li>Los usuarios pueden optar por no utilizar la cookie de DART visitando la <a href="https://policies.google.com/technologies/ads" target="_blank" rel="noopener noreferrer">pol√≠tica de privacidad de la red de contenido y anuncios de Google</a>.</li>
                    <li>Utilizamos proveedores externos, incluido Google, que usan cookies para publicar anuncios basados en las visitas anteriores de un usuario a nuestro sitio web o a otros sitios web.</li>
                    <li>El uso de cookies de publicidad por parte de Google permite a Google y a sus socios publicar anuncios basados en la visita que los usuarios realizan a nuestros sitios o a otros sitios de Internet.</li>
                    <li>Los usuarios pueden inhabilitar la publicidad personalizada visitando <a href="https://www.google.com/settings/ads" target="_blank" rel="noopener noreferrer">Configuraci√≥n de anuncios</a>. Alternativamente, pueden visitar <a href="http://www.aboutads.info/choices/" target="_blank" rel="noopener noreferrer">www.aboutads.info</a> para inhabilitar el uso de cookies de un proveedor externo para publicidad personalizada.</li>
                </ul>
                <p>Te recomendamos revisar las pol√≠ticas de privacidad de Google para obtener informaci√≥n m√°s detallada sobre c√≥mo recopilan y utilizan los datos:</p>
                <ul>
                    <li><a href="https://policies.google.com/privacy?hl=es" target="_blank" rel="noopener noreferrer">Pol√≠tica de Privacidad de Google</a></li>
                    <li><a href="https://policies.google.com/technologies/partner-sites?hl=es" target="_blank" rel="noopener noreferrer">C√≥mo utiliza Google la informaci√≥n de sitios o aplicaciones que utilizan nuestros servicios</a></li>
                </ul>

                <h2>Cookies</h2>
                <p>Las cookies son peque√±os archivos de texto que se almacenan en tu navegador cuando visitas sitios web. Como se mencion√≥, utilizamos cookies a trav√©s de Google AdSense.</p>
                <p>Puedes controlar y/o eliminar las cookies como desees. Para m√°s detalles, consulta <a href="https://www.aboutcookies.org" target="_blank" rel="noopener noreferrer">aboutcookies.org</a>. Puedes eliminar todas las cookies que ya est√°n en tu ordenador y puedes configurar la mayor√≠a de los navegadores para evitar que se coloquen. Sin embargo, si haces esto, es posible que tengas que ajustar manualmente algunas preferencias cada vez que visites un sitio y que algunos servicios y funcionalidades no funcionen.</p>

                <h2>Archivos de Registro (Log Files)</h2>
                 <p>Como muchos otros sitios web, nuestro servidor web puede almacenar archivos de registro (logs). La informaci√≥n dentro de los archivos de registro incluye direcciones de protocolo de internet (IP), tipo de navegador, proveedor de servicios de Internet (ISP), sello de fecha/hora, p√°ginas de referencia/salida y posiblemente el n√∫mero de clics. Esta informaci√≥n se utiliza para analizar tendencias, administrar el sitio y recopilar informaci√≥n demogr√°fica de forma an√≥nima. Las direcciones IP y otra informaci√≥n similar no est√°n vinculadas a ninguna informaci√≥n que sea personalmente identificable.</p>

                <h2>Enlaces a Otros Sitios Web</h2>
                <p>Nuestro Sitio puede contener enlaces a otros sitios web que no son operados por nosotros (por ejemplo, enlaces a redes sociales como Instagram, YouTube, TikTok, o plataformas de donaci√≥n como PayPal). Si haces clic en un enlace de un tercero, ser√°s dirigido al sitio de ese tercero. Te recomendamos encarecidamente que revises la Pol√≠tica de Privacidad de cada sitio que visites.</p>
                <p>No tenemos control ni asumimos responsabilidad por el contenido, las pol√≠ticas de privacidad o las pr√°cticas de los sitios o servicios de terceros.</p>

                 <h2>Privacidad de los Ni√±os</h2>
                <p>Nuestro Servicio no se dirige a menores de 13 a√±os (o la edad m√≠nima requerida en tu jurisdicci√≥n). No recopilamos conscientemente informaci√≥n personal identificable de ni√±os. Si eres padre/madre o tutor y sabes que tu hijo nos ha proporcionado informaci√≥n personal, por favor, cont√°ctanos. Si descubrimos que hemos recopilado informaci√≥n personal de ni√±os sin verificaci√≥n del consentimiento paterno, tomamos medidas para eliminar esa informaci√≥n de nuestros servidores.</p>
                 
                <h2>Cambios a esta Pol√≠tica de Privacidad</h2>
                <p>Podemos actualizar nuestra Pol√≠tica de Privacidad de vez en cuando. Te notificaremos cualquier cambio publicando la nueva Pol√≠tica de Privacidad en esta p√°gina y actualizando la fecha de "√öltima actualizaci√≥n" en la parte superior.</p>
                <p>Se te aconseja revisar esta Pol√≠tica de Privacidad peri√≥dicamente para cualquier cambio. Los cambios a esta Pol√≠tica de Privacidad son efectivos cuando se publican en esta p√°gina.</p>

                <h2>Contacto</h2>
                <p>Si tienes alguna pregunta sobre esta Pol√≠tica de Privacidad, puedes contactarnos:</p>
                <ul>
                    <li>Por correo electr√≥nico: kevin_turkienich@outlook.com</li> 
                    </ul>
            </div>
        </div>
    </main>
    <footer>
        <div class="container"> <div class="social-links">
                <a href="https://www.instagram.com/excel.entes" target="_blank" rel="noopener noreferrer" aria-label="Instagram Excel-ente" title="Instagram Excel-ente">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9 26.3 26.2 58 34.4 93.9 36.2 37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                </a>
                <a href="https://www.youtube.com/@excel-ente" target="_blank" rel="noopener noreferrer" aria-label="Youtube Excel-ente" title="Youtube Excel-ente"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor" height="1.5em"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg>
                </a>
                <a href="https://www.tiktok.com/@excel.entes" target="_blank" rel="noopener noreferrer" aria-label="TikTok Excel-ente" title="TikTok Excel-ente">
                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" height="1.5em"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg>
                </a>
            </div>

            <p class="footer-note">Hecho con ‚ù§Ô∏è por <a href="https://excel-ente.com/" target="_blank" rel="noopener noreferrer">Excel-ente</a> para ayudar a emprendedor@s como vos üöÄ</p> 
            
            <p class="copyright">
                ¬© <span id="current-year"></span> EXCEL-ENTE | Todos los derechos reservados | 
                <a href="politica-privacidad.html">Pol√≠tica de Privacidad</a> | 
                <a href="acerca-de.html">Acerca de</a> | 
                <a href="contacto.html">Contacto</a>
            </p>
        </div>
    </footer>

    <script>
        // Script simple para actualizar fechas (opcional, pero bueno)
        const lastUpdatedDate = new Date('2025-04-30'); // !! Actualiza esta fecha si cambias el texto !!
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('last-updated').textContent = lastUpdatedDate.toLocaleDateString('es-AR', options);
        document.getElementById('footer-current-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>

################################################################################
# ARCHIVO: .\script.js
################################################################################

/**
 * Script principal para la Calculadora de Costos de Muebles - Tu Taller Eficiente.
 * Maneja el c√°lculo r√°pido de materiales/cortes, la calculadora de gastos fijos del taller,
 * y la interactividad del ejemplo pr√°ctico de c√°lculo de un mueble.
 * v2.0 - Corregido populate de #usedUnit y c√°lculo/actualizaci√≥n de Gastos Fijos.
 */

document.addEventListener("DOMContentLoaded", () => {
    /**
     * Establece el a√±o actual en el footer.
     */
    const setCurrentYear = () => {
        const yearElement = document.getElementById("current-year");
        if (yearElement) {
            yearElement.textContent = new Date().getFullYear();
        }
        // Tambi√©n para el footer de la gu√≠a si existe
        const yearElementGuide = document.getElementById("current-year-footer");
        if (yearElementGuide) {
             yearElementGuide.textContent = new Date().getFullYear();
        }
    };

    // --- Constantes y Configuraciones Globales para MUEBLES ---
    const baseConversionFactorsMuebles = {
      // Peso
      kg:    { group: "weight", baseUnit: "g",    factor: 1000 },
      g:     { group: "weight", baseUnit: "g",    factor: 1 },
      // Longitud
      m:     { group: "length", baseUnit: "m",    factor: 1 },
      cm:    { group: "length", baseUnit: "m",    factor: 0.01 },
      mm:    { group: "length", baseUnit: "m",    factor: 0.001 },
      varilla: {group: "length_discrete", baseUnit: "varilla", factor: 1}, // Si se compra por varilla
      // Superficie
      m2:    { group: "area",   baseUnit: "m2",   factor: 1 },
      placa: { group: "area_discrete", baseUnit: "placa", factor: 1}, // Si se compra por placa
      // Volumen
      lt:    { group: "volume", baseUnit: "ml",   factor: 1000 },
      ml:    { group: "volume", baseUnit: "ml",   factor: 1 },
      // Unidades y Conjuntos
      unid:  { group: "discrete", baseUnit: "unid", factor: 1 },
      par:   { group: "discrete", baseUnit: "unid", factor: 2 },
      set:   { group: "discrete", baseUnit: "unid", factor: 1 },
      rollo: { group: "length_discrete", baseUnit: "rollo", factor: 1}
    };

    const getUnitGroupMuebles = (unit) => {
        return baseConversionFactorsMuebles[unit]?.group || null;
    };

    // --- Funciones Utilitarias ---

    const formatCurrency = (amount) => {
        if (isNaN(amount) || amount === null || amount === undefined) return "$0.00";
        // Asegurarse que no sea negativo accidentalmente por errores de c√°lculo peque√±os
        const nonNegativeAmount = Math.max(0, amount);
        return nonNegativeAmount.toLocaleString('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 2, maximumFractionDigits: 2 });
    };

    const parseFloatInput = (value, allowNegative = false) => {
        if (value === null || value === undefined || String(value).trim() === "") return 0;
        const parsed = parseFloat(String(value).replace(',', '.'));
        if (isNaN(parsed)) return 0;
        return allowNegative ? parsed : Math.max(0, parsed); // Asegura >= 0 si allowNegative es false
    };

    const parseIntInput = (value, min = 1) => {
        if (value === null || value === undefined || String(value).trim() === "") return min;
        const parsed = parseInt(String(value).replace(',', '.').trim(), 10);
        const minimum = min === 0 ? 0 : (isNaN(min) ? 1 : min);
        if (isNaN(parsed) || parsed < minimum) {
            return minimum;
        }
        return parsed;
    };

    // Verifica si las unidades pertenecen al mismo grupo conceptual (peso, longitud, etc.)
    const areUnitsCompatibleMuebles = (unit1, unit2) => {
        if (!unit1 || !unit2) return false;
        const group1 = getUnitGroupMuebles(unit1);
        const group2 = getUnitGroupMuebles(unit2);

        // Caso especial: si compro por 'placa' o 'varilla' o 'rollo', puedo querer usar 'unid' (ej. 1 placa -> 0.5 unid)
        if ((group1 === "area_discrete" || group1 === "length_discrete") && group2 === "discrete") return true;
        if ((group2 === "area_discrete" || group2 === "length_discrete") && group1 === "discrete") return true;
        // Caso especial: si compro por 'par' o 'set', puedo querer usar 'unid' (ej. 1 par -> 1 unid)
        if (group1 === "discrete" && baseConversionFactorsMuebles[unit1]?.factor > 1 && unit2 === 'unid') return true;

        // Caso general: deben pertenecer al mismo grupo est√°ndar
        return group1 === group2 && group1 !== null;
    };

    // Convierte una cantidad a la unidad base est√°ndar (g, m, ml, m2) si es posible
    const convertToStandardBase = (quantity, unit) => {
        const unitInfo = baseConversionFactorsMuebles[unit];
        if (!unitInfo) return { quantity, unit: unit, originalUnit: unit, factor: 1 };

        if (["g", "m", "ml", "m2"].includes(unitInfo.baseUnit)) {
            return { quantity: quantity * unitInfo.factor, unit: unitInfo.baseUnit, originalUnit: unit, factor: unitInfo.factor };
        }
        // Para unidades discretas o que son su propia base (placa, varilla, unid, etc.)
        return { quantity: quantity * unitInfo.factor, unit: unitInfo.baseUnit, originalUnit: unit, factor: unitInfo.factor };
    };

    // Funci√≥n para mostrar/ocultar advertencias
    const toggleWarning = (warningElement, message = "", isError = true) => {
        if (!warningElement) return;
        warningElement.textContent = message;
        warningElement.classList.toggle("hidden", !message);
        warningElement.style.color = isError ? 'var(--error-color)' : 'var(--warning-color)';
    };

    // --- Calculadora R√°pida de Materiales/Cortes (Secci√≥n #calculator) ---
    const initIndividualMaterialCalculator = () => {
        // Inputs generales
        const nameInput = document.getElementById("name");
        const totalPriceInput = document.getElementById("totalPrice");
        const materialTypeSelect = document.getElementById("materialType");
        // Contenedores condicionales
        const placaInputsDiv = document.getElementById("placaInputs");
        const generalInputsDiv = document.getElementById("generalInputs");
        // Inputs Placa
        const purchasedPlacaWidthInput = document.getElementById("purchasedPlacaWidth");
        const purchasedPlacaHeightInput = document.getElementById("purchasedPlacaHeight");
        const purchasedPlacaUnitSelect = document.getElementById("purchasedPlacaUnit");
        const cutWidthInput = document.getElementById("cutWidth");
        const cutHeightInput = document.getElementById("cutHeight");
        const placaWarning = document.getElementById("unit-warning-placa");
        // Inputs General
        const purchasedQuantityInput = document.getElementById("purchasedQuantity");
        const purchasedUnitSelect = document.getElementById("purchasedUnit");
        const usedQuantityInput = document.getElementById("usedQuantity");
        const usedUnitSelect = document.getElementById("usedUnit");
        const generalWarning = document.getElementById("unit-warning-general");
        // Resultados
        const resultDiv = document.getElementById("result");
        const resultText = document.getElementById("result-text");
        const copyBtn = document.getElementById("copy-btn");
        const shareBtn = document.getElementById("share-btn");

        if (!nameInput || !materialTypeSelect) return; // Salir si la calculadora no existe

        // *** CORREGIDO: Funci√≥n para poblar #usedUnit ***
        const updateUsedUnitOptions = () => {
            if (!purchasedUnitSelect || !usedUnitSelect) return;

            const currentUsedUnitValue = usedUnitSelect.value; // Guardar valor actual
            usedUnitSelect.innerHTML = ""; // Limpiar opciones actuales

            // Copiar todas las opciones de purchasedUnit a usedUnit
            Array.from(purchasedUnitSelect.options).forEach(option => {
                const newOption = document.createElement("option");
                newOption.value = option.value;
                newOption.textContent = option.textContent;
                usedUnitSelect.appendChild(newOption);
            });

            // Intentar reestablecer el valor previamente seleccionado
            if (Array.from(usedUnitSelect.options).some(opt => opt.value === currentUsedUnitValue)) {
                usedUnitSelect.value = currentUsedUnitValue;
            } else if (usedUnitSelect.options.length > 0) {
                // Si no se puede restablecer, seleccionar la primera opci√≥n
                usedUnitSelect.value = usedUnitSelect.options[0].value;
            }
        };

        const calculateIndividualCost = () => {
            toggleWarning(generalWarning); // Limpiar warnings previos
            toggleWarning(placaWarning);

            const name = nameInput.value.trim() || "Este material";
            const totalPrice = parseFloatInput(totalPriceInput.value);
            const materialType = materialTypeSelect.value;
            let finalCost = NaN; // Usar NaN para verificar si se calcul√≥ algo
            let calculationMessage = "";

            if (totalPrice <= 0) {
                resultDiv.classList.add("hidden");
                return;
            }

            if (materialType === "placa") {
                const purchasedPlacaWidth = parseFloatInput(purchasedPlacaWidthInput.value);
                const purchasedPlacaHeight = parseFloatInput(purchasedPlacaHeightInput.value);
                const purchasedPlacaUnit = purchasedPlacaUnitSelect.value;
                const cutWidth = parseFloatInput(cutWidthInput.value);
                const cutHeight = parseFloatInput(cutHeightInput.value);

                if (purchasedPlacaWidth <= 0 || purchasedPlacaHeight <= 0 || cutWidth <= 0 || cutHeight <= 0) {
                    resultDiv.classList.add("hidden");
                    return; // No calcular si faltan dimensiones
                }

                // Convertir dimensiones a una unidad base (mm parece bueno para placas)
                const convertToMM = (value, unit) => {
                    if (unit === "cm") return value * 10;
                    if (unit === "m") return value * 1000;
                    return value; // Asumir mm
                };

                const placaWidthMM = convertToMM(purchasedPlacaWidth, purchasedPlacaUnit);
                const placaHeightMM = convertToMM(purchasedPlacaHeight, purchasedPlacaUnit);
                const cutWidthMM = convertToMM(cutWidth, purchasedPlacaUnit);
                const cutHeightMM = convertToMM(cutHeight, purchasedPlacaUnit);

                const totalAreaPlaca = placaWidthMM * placaHeightMM;
                const areaCorte = cutWidthMM * cutHeightMM;

                if (totalAreaPlaca <= 0) {
                    toggleWarning(placaWarning, "El √°rea de la placa comprada no puede ser cero.");
                    resultDiv.classList.add("hidden");
                    return;
                }
                if (areaCorte > totalAreaPlaca) {
                    toggleWarning(placaWarning, `El √°rea del corte (${cutWidth}x${cutHeight}${purchasedPlacaUnit} = ${areaCorte/ (convertToMM(1, purchasedPlacaUnit)**2)} ${purchasedPlacaUnit}¬≤) no puede ser mayor al √°rea total de la placa (${purchasedPlacaWidth}x${purchasedPlacaHeight}${purchasedPlacaUnit} = ${totalAreaPlaca / (convertToMM(1, purchasedPlacaUnit)**2)} ${purchasedPlacaUnit}¬≤).`);
                    resultDiv.classList.add("hidden");
                    return;
                }

                finalCost = (totalPrice / totalAreaPlaca) * areaCorte;
                calculationMessage = `El costo de un corte de ${cutWidth}x${cutHeight} ${purchasedPlacaUnit} de la placa "${name}" es ${formatCurrency(finalCost)}.`;

            } else { // C√°lculo General
                const purchasedQuantity = parseFloatInput(purchasedQuantityInput.value, true); // Permitir > 0
                const purchasedUnitValue = purchasedUnitSelect.value;
                const usedQuantity = parseFloatInput(usedQuantityInput.value);
                const usedUnitValue = usedUnitSelect.value;

                 if (purchasedQuantity <= 0) {
                     toggleWarning(generalWarning, "La cantidad comprada debe ser mayor a 0.");
                     resultDiv.classList.add("hidden");
                     return;
                 }
                 // No ocultar si usedQuantity es 0, mostrar costo 0
                 // if (usedQuantity <= 0) {
                 //     resultDiv.classList.add("hidden");
                 //     return;
                 // }

                if (!areUnitsCompatibleMuebles(purchasedUnitValue, usedUnitValue)) {
                    toggleWarning(generalWarning, `Las unidades '${purchasedUnitSelect.options[purchasedUnitSelect.selectedIndex].text}' y '${usedUnitSelect.options[usedUnitSelect.selectedIndex].text}' no son directamente comparables para este c√°lculo.`);
                    resultDiv.classList.add("hidden");
                    return;
                }

                const purchasedStd = convertToStandardBase(purchasedQuantity, purchasedUnitValue);
                const usedStd = convertToStandardBase(usedQuantity, usedUnitValue);

                // Segunda validaci√≥n: las unidades BASE deben ser iguales despu√©s de la conversi√≥n
                if (purchasedStd.unit !== usedStd.unit) {
                     toggleWarning(generalWarning, `No se pudo convertir '${purchasedUnitValue}' a '${usedUnitValue}' para el c√°lculo.`);
                     resultDiv.classList.add("hidden");
                     return;
                }

                if (purchasedStd.quantity === 0) {
                    toggleWarning(generalWarning, "La cantidad comprada base es cero.");
                    resultDiv.classList.add("hidden");
                    return;
                }

                const costPerBaseUnit = totalPrice / purchasedStd.quantity;
                finalCost = costPerBaseUnit * usedStd.quantity;

                calculationMessage = `Usar ${usedQuantity} ${usedUnitSelect.options[usedUnitSelect.selectedIndex]?.text || usedUnitValue} de "${name}" te cuesta ${formatCurrency(finalCost)}.`;
            }

            // Mostrar resultado si el c√°lculo fue exitoso
            if (!isNaN(finalCost)) {
                resultText.textContent = calculationMessage;
                resultDiv.classList.remove("hidden");
            } else {
                resultDiv.classList.add("hidden");
            }
        };

        // Event listener para cambiar entre tipo de c√°lculo Placa/General
        materialTypeSelect.addEventListener("change", () => {
            const isPlaca = materialTypeSelect.value === "placa";
            placaInputsDiv.classList.toggle("hidden", !isPlaca);
            generalInputsDiv.classList.toggle("hidden", isPlaca);
            // Limpiar el resultado y warnings al cambiar de tipo
            resultDiv.classList.add("hidden");
            toggleWarning(generalWarning);
            toggleWarning(placaWarning);
            // Recalcular (o limpiar si no hay datos)
            // calculateIndividualCost(); // Opcional: recalcular inmediatamente o esperar input
        });

        // Event listeners para recalcular
        [nameInput, totalPriceInput,
         purchasedPlacaWidthInput, purchasedPlacaHeightInput, purchasedPlacaUnitSelect, cutWidthInput, cutHeightInput, // Placa
         purchasedQuantityInput, purchasedUnitSelect, usedQuantityInput, usedUnitSelect // General
        ].forEach(el => {
            el?.addEventListener("input", calculateIndividualCost);
            // 'change' es mejor para selects que 'input'
            if (el?.tagName === 'SELECT') {
                 el.removeEventListener("input", calculateIndividualCost); // Remover listener 'input' si se a√±adi√≥
                 el.addEventListener("change", calculateIndividualCost);
            }
        });

        // Listener espec√≠fico para actualizar #usedUnit cuando #purchasedUnit cambia (en modo General)
        purchasedUnitSelect?.addEventListener("change", () => {
            updateUsedUnitOptions();
            // No llamamos a calculateIndividualCost aqu√≠ porque ya lo hace el listener 'change' general del select
        });


        // Botones Copiar/Compartir
        copyBtn?.addEventListener("click", () => {
            if(resultText.textContent && !resultDiv.classList.contains('hidden')){
                navigator.clipboard.writeText(resultText.textContent)
                  .then(() => {
                    const originalText = copyBtn.textContent;
                    // Podr√≠amos quitar el icono temporalmente
                    copyBtn.innerHTML = "¬°Copiado!";
                    setTimeout(() => {
                        // Restaurar texto e icono
                        copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="currentColor" style="margin-right: 0.4em;"><path d="M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272c-8.8 0-16-7.2-16-16s7.2-16 16-16H320V256H192c-17.7 0-32-14.3-32-32V192H128V128H64z"/></svg> Copiar`;
                    }, 2000);
                  })
                  .catch(err => console.error('Error al copiar: ', err));
            }
        });
        shareBtn?.addEventListener("click", () => {
            if(resultText.textContent && !resultDiv.classList.contains('hidden')){
                const textToShare = resultText.textContent;
                if (navigator.share) { // Usar API Share si est√° disponible
                    navigator.share({
                        title: 'C√°lculo Costo Material',
                        text: textToShare,
                    }).catch(err => console.error('Error al compartir: ', err));
                } else { // Fallback a WhatsApp
                    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(textToShare)}`;
                    window.open(whatsappUrl, "_blank");
                }
            }
        });

        // Inicializaci√≥n
        // Ocultar/mostrar seg√∫n el tipo inicial
        const initialType = materialTypeSelect.value;
        placaInputsDiv.classList.toggle("hidden", initialType !== "placa");
        generalInputsDiv.classList.toggle("hidden", initialType === "placa");
        // Poblar #usedUnit inicialmente
        updateUsedUnitOptions();
        // Calcular costo inicial si hay valores
        // calculateIndividualCost(); // Descomentar si quieres un c√°lculo al cargar la p√°gina
    };

    // --- Calculadora de Gastos Fijos del Taller ---
    const initFixedCostsCalculator = () => {
        const fixedCostInputIds = [
            "rent", "services", "taxes", "salary", "marketing", "amortization", "other-fixed"
        ];
        const monthlyFixedTotalSpan = document.getElementById("monthly-fixed-total");
        const monthlyProductsInput = document.getElementById("monthly-products");
        const fixedPerProductSpan = document.getElementById("fixed-per-product");
        // Para actualizar el ejemplo
        const finalFixedCostExampleSpan = document.getElementById("final-fixed-costs-example");

        if (!monthlyFixedTotalSpan || !monthlyProductsInput || !fixedPerProductSpan) {
            console.warn("Elementos de la calculadora de gastos fijos no encontrados.");
            return;
        }

        let currentFixedCostPerProduct = 0;

        const calculateFixedCosts = () => {
            let totalMonthlyFixed = 0;
            fixedCostInputIds.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    totalMonthlyFixed += parseFloatInput(input.value); // Usar parseFloatInput para manejar errores y negativos
                } else {
                    console.warn(`Input con ID ${id} no encontrado en gastos fijos.`);
                }
            });

            // Usar textContent para mostrar, no innerHTML si no necesitas HTML
            monthlyFixedTotalSpan.textContent = formatCurrency(totalMonthlyFixed);

            const monthlyProducts = parseIntInput(monthlyProductsInput.value, 1); // Asegura que sea al menos 1
            // Evitar divisi√≥n por cero expl√≠citamente aunque parseIntInput ya previene < 1
            currentFixedCostPerProduct = monthlyProducts > 0 ? totalMonthlyFixed / monthlyProducts : 0;

            fixedPerProductSpan.textContent = formatCurrency(currentFixedCostPerProduct);

            // Actualizar tambi√©n en el ejemplo detallado, si existe
            if (finalFixedCostExampleSpan) {
                finalFixedCostExampleSpan.textContent = formatCurrency(currentFixedCostPerProduct);
                // Si el ejemplo detallado tiene una funci√≥n para recalcular todo, llamarla.
                // Asegurarse que updateFinalCostExample est√© definida globalmente o accesible.
                if (typeof window.updateFinalCostExample === "function") {
                    window.updateFinalCostExample();
                }
            }
        };

        // A√±adir listeners a todos los inputs relevantes
        fixedCostInputIds.forEach(id => {
            const input = document.getElementById(id);
            input?.addEventListener("input", calculateFixedCosts);
        });
        monthlyProductsInput?.addEventListener("input", calculateFixedCosts);

        // Calcular al cargar la p√°gina
        calculateFixedCosts();
    };


    // --- Ejemplo Pr√°ctico Mueble (Interactivo) ---
    // Esta funci√≥n se llamar√° 'updateFinalCostExample' globalmente
    window.updateFinalCostExample = () => {
        const getNumericValue = (elementId) => {
            const element = document.getElementById(elementId);
            // Limpiar formato de moneda ($ y puntos de miles) y convertir coma decimal a punto
             return element ? parseFloatInput(element.textContent?.replace(/[$.]/g, '').replace(',', '.')) : 0;
        };

        // Obtener todos los costos parciales del ejemplo
        const materialsCost = getNumericValue("materials-total-example");
        const processCost = getNumericValue("process-total-example");
        const finishesCost = getNumericValue("finishes-total-example");
        const packagingCost = getNumericValue("packaging-total-example");
        const timeCost = getNumericValue("time-value-example");
        const fixedCostPortion = getNumericValue("final-fixed-costs-example"); // Se actualiza desde fixedCosts

        const subtotalMaterialsTime = materialsCost + processCost + finishesCost + packagingCost + timeCost;
        const totalCost = subtotalMaterialsTime + fixedCostPortion;

        // Actualizar spans en la tabla final
        const subtotalSpan = document.getElementById("subtotal-example");
        const totalCostSpan = document.getElementById("total-cost-example");
        if(subtotalSpan) subtotalSpan.textContent = formatCurrency(subtotalMaterialsTime);
        if(totalCostSpan) totalCostSpan.textContent = formatCurrency(totalCost);


        // Calcular Ganancia y Precio Final
        const profitPercentageInput = document.getElementById("profit-percentage-example");
        const profitPercentageDisplay = document.getElementById("profit-percentage-value-example");
        const profitAmountSpan = document.getElementById("profit-amount-example");
        const finalPriceSpan = document.getElementById("final-price-example");
        const portionsInputEx = document.getElementById("portions-example");
        const portionPriceSpan = document.getElementById("portion-price-example");

        if (!profitPercentageInput || !profitPercentageDisplay || !profitAmountSpan || !finalPriceSpan || !portionsInputEx || !portionPriceSpan) {
             console.warn("Elementos del c√°lculo final del ejemplo no encontrados.");
             return; // Salir si falta alg√∫n elemento crucial
        }


        const profitPercentage = parseFloatInput(profitPercentageInput.value);
        profitPercentageDisplay.textContent = `${profitPercentage}%`;

        const profitAmount = totalCost * (profitPercentage / 100);
        const finalPriceTotal = totalCost + profitAmount; // Precio para todas las porciones

        const portions = parseIntInput(portionsInputEx.value, 1);
        const portionPrice = portions > 0 ? finalPriceTotal / portions : 0;

        profitAmountSpan.textContent = formatCurrency(profitAmount);
        finalPriceSpan.textContent = formatCurrency(finalPriceTotal); // Mostrar precio total calculado
        portionPriceSpan.textContent = formatCurrency(portionPrice); // Mostrar precio unitario
    };


    const initFurnitureExampleCalculator = () => {
        const tabsContainer = document.querySelector(".cake-tabs");
        if (!tabsContainer) return;

        const tabBtns = tabsContainer.querySelectorAll(".tab-btn");
        const tabContents = tabsContainer.querySelectorAll(".tab-content");
        const nextTabBtns = tabsContainer.querySelectorAll(".next-tab-btn");
        const prevTabBtns = tabsContainer.querySelectorAll(".prev-tab-btn");

        const switchTab = (targetTabId) => {
            tabContents.forEach(content => content.classList.remove("active"));
            tabBtns.forEach(btn => btn.classList.remove("active"));
            const newActiveTabContent = document.getElementById(`${targetTabId}-tab`);
            const newActiveTabBtn = tabsContainer.querySelector(`.tab-btn[data-tab="${targetTabId}"]`);

            if (newActiveTabContent) {
                newActiveTabContent.classList.add("active");
                // Scroll a la parte superior del contenido de la pesta√±a en m√≥viles
                if (window.innerWidth < 768) {
                    newActiveTabContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
            newActiveTabBtn?.classList.add("active");
        };

        tabBtns.forEach(btn => {
            btn.addEventListener("click", () => switchTab(btn.dataset.tab));
        });
        nextTabBtns.forEach(btn => {
            btn.addEventListener("click", () => switchTab(btn.dataset.next));
        });
        prevTabBtns.forEach(btn => {
            btn.addEventListener("click", () => switchTab(btn.dataset.prev));
        });

        // --- L√≥gica espec√≠fica del ejemplo ---

        // Funci√≥n auxiliar para a√±adir/eliminar filas en tablas de ejemplo
        const setupEditableTable = (tbodyId, totalSpanId, finalSpanId, addBtnId, formPrefix, updateTotalsFunc) => {
            const tbody = document.getElementById(tbodyId);
            const addBtn = document.getElementById(addBtnId);
            if (!tbody || !addBtn) return; // No continuar si los elementos no existen

            // Eliminar filas existentes
            tbody.addEventListener('click', (e) => {
                if (e.target && e.target.classList.contains('btn-delete-row')) {
                    e.target.closest('tr').remove();
                    updateTotalsFunc();
                }
            });

            // A√±adir fila (la l√≥gica espec√≠fica de a√±adir se maneja fuera)
            addBtn.addEventListener('click', () => {
                // La l√≥gica de a√±adir (addMaterialExample, addFinishExample, etc.)
                // debe llamarse aqu√≠ o estar en el listener del bot√≥n directamente.
            });
        };

        // Funci√≥n auxiliar para actualizar totales (reemplaza las individuales)
        const updateTableTotal = (tbodyId, totalSpanId, finalSpanId, costColumnIndex = 4) => {
            const tbody = document.getElementById(tbodyId);
            const totalSpan = document.getElementById(totalSpanId);
            const finalSpan = document.getElementById(finalSpanId);
            if (!tbody || !totalSpan) return 0;

            let total = 0;
            tbody.querySelectorAll("tr").forEach(row => {
                const costCell = row.cells[costColumnIndex];
                if (costCell) {
                    // Limpiar formato antes de parsear
                     total += parseFloatInput(costCell.textContent?.replace(/[$.]/g, '').replace(',', '.'));
                }
            });

            totalSpan.textContent = formatCurrency(total);
            if (finalSpan) finalSpan.textContent = formatCurrency(total);
            window.updateFinalCostExample(); // Recalcular todo el final
            return total;
        };

        // 1. Materiales (Pesta√±a 1)
        const materialsTbody = document.getElementById("materials-tbody-example");
        const addMaterialBtnEx = document.getElementById("add-material-btn-example");
        const exMatName = document.getElementById("ex-mat-name");
        const exMatTotalQty = document.getElementById("ex-mat-total-qty");
        const exMatTotalUnit = document.getElementById("ex-mat-total-unit");
        const exMatPrice = document.getElementById("ex-mat-price");
        const exMatUsedQty = document.getElementById("ex-mat-used-qty");
        const exMatUsedUnit = document.getElementById("ex-mat-used-unit");
        const exMatUnitWarning = document.getElementById("ex-mat-unit-warning");

        const updateMaterialsTotalExample = () => updateTableTotal("materials-tbody-example", "materials-total-example", "final-materials-example", 4);

        const addMaterialExample = () => {
            toggleWarning(exMatUnitWarning); // Limpiar warning
            const name = exMatName.value.trim() || "Material sin nombre";
            const totalQty = parseFloatInput(exMatTotalQty.value);
            const totalUnit = exMatTotalUnit.value;
            const price = parseFloatInput(exMatPrice.value);
            const usedQty = parseFloatInput(exMatUsedQty.value);
            const usedUnit = exMatUsedUnit.value;

            if (totalQty <= 0 || price <= 0 || usedQty < 0) { alert("Complet√° datos del material (cantidades > 0, precio > 0)."); return; }

            if (!areUnitsCompatibleMuebles(totalUnit, usedUnit)) {
                 toggleWarning(exMatUnitWarning, `Unidades '${exMatTotalUnit.options[exMatTotalUnit.selectedIndex].text}' y '${exMatUsedUnit.options[exMatUsedUnit.selectedIndex].text}' no compatibles.`);
                 return;
            }

            const baseTotal = convertToStandardBase(totalQty, totalUnit);
            const baseUsed = convertToStandardBase(usedQty, usedUnit);
            let itemCost = 0;
            if (baseTotal.quantity > 0 && baseTotal.unit === baseUsed.unit) { itemCost = (price / baseTotal.quantity) * baseUsed.quantity; }
            else { /* Error o caso no manejado */ console.warn("No se pudo calcular costo de material en ejemplo"); }


            const newRow = materialsTbody.insertRow();
            newRow.innerHTML = `
                <td>${name}</td>
                <td>${totalQty} ${exMatTotalUnit.options[exMatTotalUnit.selectedIndex].text}</td>
                <td>${formatCurrency(price)}</td>
                <td>${usedQty} ${exMatUsedUnit.options[exMatUsedUnit.selectedIndex].text}</td>
                <td>${formatCurrency(itemCost)}</td>
                <td><button class="btn-delete-row">X</button></td>`;
            // Limpiar formulario
            exMatName.value = ""; exMatTotalQty.value = ""; exMatPrice.value = ""; exMatUsedQty.value = "";
            updateMaterialsTotalExample();
        };
        addMaterialBtnEx?.addEventListener("click", addMaterialExample);
        exMatTotalUnit?.addEventListener("change", () => updateCompatibleUsedUnits(exMatTotalUnit, exMatUsedUnit)); // Usa la funci√≥n gen√©rica
        exMatUsedUnit?.addEventListener("change", () => { // Revalidar compatibilidad visualmente
            toggleWarning(exMatUnitWarning, areUnitsCompatibleMuebles(exMatTotalUnit.value, exMatUsedUnit.value) ? "" : "Unidades no compatibles.");
        });
        // Configurar eliminaci√≥n de filas iniciales y totales
        setupEditableTable("materials-tbody-example", "materials-total-example", "final-materials-example", "add-material-btn-example", "ex-mat-", updateMaterialsTotalExample);


        // 2. Procesos y Energ√≠a (Pesta√±a 2)
        const machinePowerAvgInput = document.getElementById("machine-power-avg");
        const processTimeInput = document.getElementById("process-time");
        const electricityCostKwhInput = document.getElementById("electricity-cost-kwh");
        const machineElectricityResultSpan = document.getElementById("machine-electricity-result");
        const consumablesCostInput = document.getElementById("consumables-cost");
        const consumablesResultSpan = document.getElementById("consumables-result");
        const toolTotalCostInput = document.getElementById("tool-total-cost");
        const toolLifespanProjectsInput = document.getElementById("tool-lifespan-projects");
        const toolAmortizationResultSpan = document.getElementById("tool-amortization-result");
        const processTotalSpan = document.getElementById("process-total-example");
        const finalProcessSpan = document.getElementById("final-process-example");

        const calculateProcessCostsExample = () => {
            const power = parseFloatInput(machinePowerAvgInput.value);
            const time = parseFloatInput(processTimeInput.value); // en minutos
            const costKwh = parseFloatInput(electricityCostKwhInput.value);
            const consumables = parseFloatInput(consumablesCostInput.value);
            const toolCost = parseFloatInput(toolTotalCostInput.value);
            const toolLifespan = parseIntInput(toolLifespanProjectsInput.value, 1);

            const electricityCost = (power / 1000) * (time / 60) * costKwh;
            const amortizationCost = toolLifespan > 0 ? toolCost / toolLifespan : 0;

            if(machineElectricityResultSpan) machineElectricityResultSpan.textContent = formatCurrency(electricityCost);
            if(consumablesResultSpan) consumablesResultSpan.textContent = formatCurrency(consumables);
            if(toolAmortizationResultSpan) toolAmortizationResultSpan.textContent = formatCurrency(amortizationCost);

            const totalProcess = electricityCost + consumables + amortizationCost;
            if(processTotalSpan) processTotalSpan.textContent = formatCurrency(totalProcess);
            if(finalProcessSpan) finalProcessSpan.textContent = formatCurrency(totalProcess);
            window.updateFinalCostExample();
        };
        [machinePowerAvgInput, processTimeInput, electricityCostKwhInput, consumablesCostInput, toolTotalCostInput, toolLifespanProjectsInput].forEach(el => {
            el?.addEventListener("input", calculateProcessCostsExample);
        });


        // 3. Acabados (Pesta√±a 3) - Similar a Materiales
        const finishesTbody = document.getElementById("finishes-tbody-example");
        const addFinishBtnEx = document.getElementById("add-finish-btn-example");
        const exFinishName = document.getElementById("ex-finish-name");
        const exFinishTotalQty = document.getElementById("ex-finish-total-qty");
        const exFinishTotalUnit = document.getElementById("ex-finish-total-unit");
        const exFinishPrice = document.getElementById("ex-finish-price");
        const exFinishUsedQty = document.getElementById("ex-finish-used-qty");
        const exFinishUsedUnit = document.getElementById("ex-finish-used-unit");
        const exFinishUnitWarning = document.getElementById("ex-finish-unit-warning");

        const updateFinishesTotalExample = () => updateTableTotal("finishes-tbody-example", "finishes-total-example", "final-finishes-example", 4);

        const addFinishExample = () => {
             toggleWarning(exFinishUnitWarning);
             const name = exFinishName.value.trim() || "Acabado sin nombre";
             const totalQty = parseFloatInput(exFinishTotalQty.value);
             const totalUnit = exFinishTotalUnit.value;
             const price = parseFloatInput(exFinishPrice.value);
             const usedQty = parseFloatInput(exFinishUsedQty.value);
             const usedUnit = exFinishUsedUnit.value;

             if (totalQty <= 0 || price <= 0 || usedQty < 0) { alert("Complet√° datos del acabado."); return; }
             if (!areUnitsCompatibleMuebles(totalUnit, usedUnit)) { toggleWarning(exFinishUnitWarning, `Unidades no compatibles.`); return; }

             const baseTotal = convertToStandardBase(totalQty, totalUnit);
             const baseUsed = convertToStandardBase(usedQty, usedUnit);
             let itemCost = 0;
             if (baseTotal.quantity > 0 && baseTotal.unit === baseUsed.unit) { itemCost = (price / baseTotal.quantity) * baseUsed.quantity; }

             const newRow = finishesTbody.insertRow();
             newRow.innerHTML = `
                 <td>${name}</td>
                 <td>${totalQty} ${exFinishTotalUnit.options[exFinishTotalUnit.selectedIndex].text}</td>
                 <td>${formatCurrency(price)}</td>
                 <td>${usedQty} ${exFinishUsedUnit.options[exFinishUsedUnit.selectedIndex].text}</td>
                 <td>${formatCurrency(itemCost)}</td>
                 <td><button class="btn-delete-row">X</button></td>`;
             exFinishName.value = ""; exFinishTotalQty.value = ""; exFinishPrice.value = ""; exFinishUsedQty.value = "";
             updateFinishesTotalExample();
        };
        addFinishBtnEx?.addEventListener("click", addFinishExample);
        exFinishTotalUnit?.addEventListener("change", () => updateCompatibleUsedUnits(exFinishTotalUnit, exFinishUsedUnit));
        exFinishUsedUnit?.addEventListener("change", () => { toggleWarning(exFinishUnitWarning, areUnitsCompatibleMuebles(exFinishTotalUnit.value, exFinishUsedUnit.value) ? "" : "Unidades no compatibles."); });
        setupEditableTable("finishes-tbody-example", "finishes-total-example", "final-finishes-example", "add-finish-btn-example", "ex-finish-", updateFinishesTotalExample);

        // 4. Embalaje (Pesta√±a 4)
        const packagingTbody = document.getElementById("packaging-tbody-example");
        const addPackagingBtnEx = document.getElementById("add-packaging-btn-example");
        const exPackName = document.getElementById("ex-pack-name");
        const exPackPrice = document.getElementById("ex-pack-price");
        const exPackQty = document.getElementById("ex-pack-qty");

        const updatePackagingTotalExample = () => updateTableTotal("packaging-tbody-example", "packaging-total-example", "final-packaging-example", 3); // Costo es columna 3

        const addPackagingExample = () => {
            const name = exPackName.value.trim() || "Embalaje sin nombre";
            const unitPrice = parseFloatInput(exPackPrice.value);
            const qty = parseIntInput(exPackQty.value, 1);
            if (unitPrice <= 0 || qty <= 0) { alert("Complet√° datos del embalaje."); return; }
            const itemCost = unitPrice * qty;
            const newRow = packagingTbody.insertRow();
            newRow.innerHTML = `
                <td>${name}</td>
                <td>${formatCurrency(unitPrice)}</td>
                <td>${qty}</td>
                <td>${formatCurrency(itemCost)}</td>
                <td><button class="btn-delete-row">X</button></td>`;
            exPackName.value = ""; exPackPrice.value = ""; exPackQty.value = "1";
            updatePackagingTotalExample();
        };
        addPackagingBtnEx?.addEventListener("click", addPackagingExample);
        setupEditableTable("packaging-tbody-example", "packaging-total-example", "final-packaging-example", "add-packaging-btn-example", "ex-pack-", updatePackagingTotalExample);


        // 5. Tiempo de Laburo (Pesta√±a 5)
        const timeInputsEx = tabsContainer.querySelectorAll(".time-input-example");
        const hourlyRateInputEx = document.getElementById("hourly-rate-example");
        const totalTimeSpanEx = document.getElementById("total-time-example");
        const timeValueSpanEx = document.getElementById("time-value-example");
        const finalTimeSpan = document.getElementById("final-time-example");

        const calculateTimeCostExample = () => {
            let totalMinutes = 0;
            timeInputsEx.forEach(input => {
                totalMinutes += parseIntInput(input.value, 0); // Permitir 0 minutos
            });
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            if (totalTimeSpanEx) totalTimeSpanEx.textContent = `${hours} hs ${minutes} min`;

            const hourlyRate = parseFloatInput(hourlyRateInputEx.value);
            const timeCost = (totalMinutes / 60) * hourlyRate;
            if (timeValueSpanEx) timeValueSpanEx.textContent = formatCurrency(timeCost);
            if (finalTimeSpan) finalTimeSpan.textContent = formatCurrency(timeCost);
            window.updateFinalCostExample();
        };
        timeInputsEx.forEach(input => input.addEventListener("input", calculateTimeCostExample));
        hourlyRateInputEx?.addEventListener("input", calculateTimeCostExample);


        // 6. Pesta√±a Final y Recalcular Todo el Ejemplo
        const profitPercentageInputEx = document.getElementById("profit-percentage-example");
        const portionsInputEx = document.getElementById("portions-example");
        profitPercentageInputEx?.addEventListener("input", window.updateFinalCostExample);
        portionsInputEx?.addEventListener("input", window.updateFinalCostExample);

        const recalculateExampleBtn = document.getElementById("recalculate-example-btn");
        recalculateExampleBtn?.addEventListener("click", () => {
            // Llama a todas las funciones de actualizaci√≥n de totales que a su vez llaman a updateFinalCostExample
            updateMaterialsTotalExample();
            calculateProcessCostsExample();
            updateFinishesTotalExample();
            updatePackagingTotalExample();
            calculateTimeCostExample();
            // Asegurarse que el costo fijo tambi√©n se actualice por si acaso
            const fixedCostCalcInput = document.getElementById("fixed-per-product");
            const fixedCostExampleDisplay = document.getElementById("final-fixed-costs-example");
             if(fixedCostCalcInput && fixedCostExampleDisplay) {
                fixedCostExampleDisplay.textContent = fixedCostCalcInput.textContent;
             }
            window.updateFinalCostExample(); // Llamada final expl√≠cita
        });


        // --- Inicializaci√≥n del Ejemplo ---
        // Usa la funci√≥n gen√©rica para actualizar selects dependientes
        const updateCompatibleUsedUnitsForExample = (totalUnitSelectId, usedUnitSelectId, defaultUnit = null) => {
             const totalSelect = document.getElementById(totalUnitSelectId);
             const usedSelect = document.getElementById(usedUnitSelectId);
             if (totalSelect && usedSelect) {
                 // Necesitamos una funci√≥n que copie opciones, no la de compatibilidad
                 const currentUsedUnitValue = usedSelect.value;
                 usedSelect.innerHTML = "";
                 Array.from(totalSelect.options).forEach(option => {
                     const newOption = document.createElement("option");
                     newOption.value = option.value;
                     newOption.textContent = option.textContent;
                     usedSelect.appendChild(newOption);
                 });
                 if (Array.from(usedSelect.options).some(opt => opt.value === currentUsedUnitValue)) {
                     usedSelect.value = currentUsedUnitValue;
                 } else if (defaultUnit && Array.from(usedSelect.options).some(opt => opt.value === defaultUnit)) {
                     usedSelect.value = defaultUnit;
                 } else if (usedSelect.options.length > 0) {
                     usedSelect.value = usedSelect.options[0].value;
                 }
             }
         };

        updateCompatibleUsedUnitsForExample('ex-mat-total-unit', 'ex-mat-used-unit', 'm');
        updateCompatibleUsedUnitsForExample('ex-finish-total-unit', 'ex-finish-used-unit', 'ml');


        // Calcular todos los totales iniciales del ejemplo al cargar
        updateMaterialsTotalExample();
        calculateProcessCostsExample();
        updateFinishesTotalExample();
        updatePackagingTotalExample();
        calculateTimeCostExample();
        // Llamada final para asegurar c√°lculo de precio final inicial
        window.updateFinalCostExample();
    };


    // --- Inicializaci√≥n General ---
    setCurrentYear();
    initIndividualMaterialCalculator(); // Inicializar Calculadora R√°pida
    initFixedCostsCalculator(); // Inicializar Gastos Fijos (importante que corra ANTES que el ejemplo si este depende del valor inicial)
    initFurnitureExampleCalculator(); // Inicializar Ejemplo Pr√°ctico

}); // Fin del DOMContentLoaded

################################################################################
# ARCHIVO: .\styles.css
################################################################################

/* ==================== Base Styles & Variables ==================== */
:root {
    /* Paleta de Colores Principal (Rosa/Violeta) - Puedes cambiarla si quieres */
    --pink-50: #fdf2f8;
    --pink-100: #fce7f3;
    --pink-200: #fbcfe8;
    --pink-300: #f9a8d4;
    --pink-400: #f472b6;
    --pink-500: #ec4899; /* Color Primario */
    --pink-600: #db2777;
    --pink-700: #be185d;
    --pink-800: #9d174d;
    --pink-900: #831843;

    --purple-50: #faf5ff;
    --purple-100: #f3e8ff;
    --purple-200: #e9d5ff;
    --purple-300: #d8b4fe;
    --purple-400: #c084fc;
    --purple-500: #a855f7; /* Color Secundario */
    --purple-600: #9333ea;
    --purple-700: #7e22ce; /* Color Texto Principal */
    --purple-800: #6b21a8;
    --purple-900: #581c87;

    /* Colores Neutros */
    --white: #ffffff;
    --gray-50: #f9fafb; /* M√°s claro para fondos */
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151; /* Para textos m√°s oscuros */
    --gray-800: #1f2937;
    --gray-900: #111827;


    /* Colores de Feedback */
    --success-color: #10b981; /* Un verde √©xito */
    --warning-color: #f59e0b; /* Un √°mbar advertencia */
    --error-color: #ef4444;   /* Un rojo error */

    /* Sombras y Bordes */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --radius: 0.5rem; /* Bordes redondeados consistentes */
    --border-light: 1px solid var(--gray-200); /* Borde m√°s sutil */
    --border-medium: 1px solid var(--gray-300);


    /* Tipograf√≠a */
    --font-primary: 'Poppins', sans-serif;
}

/* Reset B√°sico */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth; /* Scroll suave para enlaces internos */
}

body {
    font-family: var(--font-primary);
    line-height: 1.65; /* Un poco m√°s de interlineado para textos largos */
    color: var(--gray-700); /* Color de texto base m√°s oscuro y neutro */
    background: var(--gray-50); /* Fondo base m√°s claro */
    min-height: 100vh;
    font-size: 16px; /* Base font size */
}

/* Contenedor Principal */
.container {
    width: 100%;
    max-width: 1140px; /* Un ancho est√°ndar para mejor lectura en desktop */
    margin: 0 auto;
    padding: 0 1rem; /* Padding lateral para m√≥viles y tablets */
}

/* Tipograf√≠a */
h1, h2, h3, h4 {
    color: var(--gray-900); /* T√≠tulos m√°s oscuros */
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 1rem; /* Espaciado inferior por defecto */
}

h1 {
    font-size: clamp(2rem, 5vw, 3rem); /* Tama√±o fluido, un poco m√°s grande */
    text-align: center;
}

h2 {
    font-size: clamp(1.6rem, 4vw, 2.2rem);
    margin-bottom: 1.5rem;
    text-align: center;
    font-weight: 600;
    color: var(--purple-800); /* Mantener un toque de color distintivo */
}

h3 {
    font-size: clamp(1.3rem, 3.5vw, 1.7rem);
    color: var(--purple-700);
    font-weight: 600;
}

h4 {
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    color: var(--pink-700); /* Usar el rosa para destacar subt√≠tulos */
    font-weight: 600;
    margin-bottom: 0.75rem;
}

p {
    margin-bottom: 1.25rem; /* M√°s espacio entre p√°rrafos */
    color: var(--gray-600);
}

a {
    text-decoration: none;
    color: var(--pink-600); /* Mantener color de acento para enlaces */
    font-weight: 500;
    transition: color 0.2s ease;
}
a:hover {
    color: var(--pink-700);
    text-decoration: underline; /* Subrayar en hover para m√°s claridad */
}

ul, ol {
    padding-left: 1.5rem;
    margin-bottom: 1.5rem;
}
li {
    margin-bottom: 0.6rem; /* Un poco m√°s de espacio entre √≠tems de lista */
}
ul {
    list-style-type: disc; /* Estilo de lista est√°ndar */
}

strong {
    font-weight: 600;
    color: var(--gray-800); /* Resaltados un poco m√°s oscuros */
}

/* Secciones */
section {
    padding: 3rem 0; /* Espaciado vertical entre secciones */
}
section:nth-child(even) {
     background-color: var(--white); /* Alternar fondos */
}


/* Clases Utilitarias */
.hidden {
    display: none !important;
}
.text-center {
    text-align: center;
}
.small-text {
    font-size: 0.875rem; /* 14px si la base es 16px */
    color: var(--gray-500);
    margin-bottom: 0.5rem;
}
.instruction-text {
    font-style: italic;
    margin-bottom: 1rem;
}
.disclaimer {
    font-size: 0.8rem;
    color: var(--gray-500);
    margin-top: 1rem;
    text-align: center;
}
.full-width {
    width: 100%;
    display: block; /* Para que ocupe el ancho */
    margin-top: 0.5rem;
}
.small-margin { margin-bottom: 0.5rem !important; }
.link-highlight {
    font-weight: 600;
    color: var(--pink-600);
}

/* ==================== Botones ==================== */
.btn {
    display: inline-block;
    padding: 0.8rem 1.8rem; /* Padding ajustado */
    border-radius: var(--radius); /* Bordes est√°ndar */
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.2s ease-in-out; /* Transici√≥n m√°s suave */
    text-align: center;
    border: 1px solid transparent; /* Borde base transparente */
    line-height: 1.4; /* Mejor alineaci√≥n vertical */
    white-space: nowrap; /* Evitar que el texto salte a otra l√≠nea */
}

.btn-lg { /* Bot√≥n m√°s grande */
    padding: 1rem 2.5rem;
    font-size: 1.1rem;
}

.btn-primary {
    background-color: var(--pink-500);
    color: var(--white);
    box-shadow: var(--shadow);
}
.btn-primary:hover {
    background-color: var(--pink-600);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px); /* Efecto sutil al pasar el mouse */
}

.btn-secondary {
    background-color: var(--purple-500);
    color: var(--white);
}
.btn-secondary:hover {
    background-color: var(--purple-600);
    transform: translateY(-2px);
}

.btn-outline {
    background-color: transparent;
    border: 1px solid var(--pink-400); /* Borde m√°s visible */
    color: var(--pink-600);
    padding: 0.7rem 1.4rem; /* Ligeramente m√°s peque√±o */
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}
.btn-outline:hover {
    background-color: var(--pink-50);
    border-color: var(--pink-500);
    color: var(--pink-700);
}

.btn-delete-row {
    background-color: var(--error-color);
    color: white;
    border: none;
    border-radius: 50%;
    width: 28px; /* Un poco m√°s grande */
    height: 28px;
    font-size: 0.9rem;
    font-weight: bold;
    cursor: pointer;
    line-height: 28px; /* Centrar el 'X' */
    padding: 0;
    transition: background-color 0.2s ease, transform 0.2s ease;
}
.btn-delete-row:hover {
    background-color: #cc2222; /* Rojo m√°s oscuro */
    transform: scale(1.1);
}

.btn-link {
    background: none;
    border: none;
    color: var(--pink-600);
    text-decoration: underline;
    cursor: pointer;
    font-size: 0.85rem;
    padding: 0;
    margin-top: 0.25rem;
}
.btn-link:hover {
    color: var(--pink-700);
}

/* ==================== Estilos de Formularios ==================== */
.form-grid {
    display: grid;
    grid-template-columns: 1fr; /* Mobile first */
    gap: 1.3rem; /* Espacio entre elementos del grid */
    margin-bottom: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem; /* Espacio entre label e input */
}

.form-group label {
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--gray-700);
    display: flex; /* Para alinear tooltip */
    align-items: center;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group select,
.form-group textarea { /* A√±adido textarea */
    padding: 0.8rem 1rem; /* Padding interno */
    border: var(--border-medium);
    border-radius: var(--radius);
    font-size: 1rem;
    font-family: inherit;
    width: 100%; /* Ocupar todo el ancho disponible */
    background-color: var(--white);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.form-group input[type="number"] {
    appearance: textfield; /* Ocultar flechas en Firefox */
    -moz-appearance: textfield; /* Para Firefox */
}
.form-group input[type="number"]::-webkit-outer-spin-button,
.form-group input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none; /* Ocultar flechas en Chrome/Safari */
    margin: 0;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--pink-500); /* Color de acento en foco */
    box-shadow: 0 0 0 3px var(--pink-100); /* Indicador de foco m√°s suave */
}

.input-with-select {
    display: flex;
    gap: 0.5rem;
    align-items: center; /* Alinear verticalmente */
}
.input-with-select input {
    flex: 1; /* El input ocupa el espacio restante */
}
.input-with-select select {
    width: auto; /* Ancho autom√°tico basado en contenido */
    min-width: 110px; /* Ancho m√≠nimo para unidades un poco m√°s grande */
    flex-shrink: 0; /* Evitar que se encoja */
}

/* Estilo para Selects (Dropdowns) - SUGERENCIA */
/* Puedes descomentar y adaptar esto si quieres personalizar m√°s los selects */
/*
.form-group select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23%24{encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--gray-500').trim())}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 10px 10px;
    padding-right: 2.5rem;
}
*/

/* Tooltips */
.tooltip {
    position: relative;
    display: inline-block;
    margin-left: 0.4rem; /* Un poco m√°s de espacio */
}
.tooltip .tooltip-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px; /* Icono m√°s grande */
    height: 20px;
    background-color: var(--gray-300); /* Color m√°s neutro */
    color: var(--gray-700);
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    cursor: help;
}
.tooltip .tooltip-text {
    visibility: hidden;
    width: 240px; /* Ancho del tooltip */
    background-color: var(--gray-800); /* Fondo oscuro para tooltip */
    color: white;
    text-align: left;
    border-radius: var(--radius);
    padding: 0.8rem 1rem; /* Buen padding */
    position: absolute;
    z-index: 10;
    bottom: 140%; /* Posici√≥n arriba del icono */
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s ease, visibility 0.3s ease; /* A√±adir visibility a la transici√≥n */
    font-size: 0.85rem;
    font-weight: normal;
    box-shadow: var(--shadow-md);
    pointer-events: none; /* Evitar que interfiera con el hover */
}
.tooltip .tooltip-text::after { /* Flecha del tooltip */
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -6px; /* Ajustar para flecha m√°s grande */
    border-width: 6px;
    border-style: solid;
    border-color: var(--gray-800) transparent transparent transparent;
}
.tooltip:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

/* Advertencias de Unidades */
.unit-warning {
    color: var(--error-color);
    font-size: 0.85rem; /* Un poco m√°s visible */
    margin-top: 0.5rem; /* Espacio sobre la advertencia */
    font-weight: 500;
}
.unit-warning:not(.hidden) { /* Para que ocupe espacio solo si es visible */
    margin-bottom: 0.5rem;
}

/* Estilos espec√≠ficos para resultados de calculadora r√°pida */
.result-card {
    background-color: var(--purple-50); /* Un fondo suave diferente */
    border: 1px solid var(--purple-200);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-top: 1.5rem;
    text-align: center;
    box-shadow: var(--shadow-sm);
}
.result-card h3 {
    margin-bottom: 0.75rem; /* Ajuste */
    color: var(--purple-800);
}
.result-card p#result-text { /* ID espec√≠fico */
    font-size: 1.15rem; /* Tama√±o ajustado */
    font-weight: 600;
    color: var(--purple-700); /* Color de texto principal */
    margin-bottom: 1.25rem;
    word-wrap: break-word; /* Para que el texto no se desborde */
}
.result-actions {
    display: flex;
    justify-content: center;
    gap: 1rem; /* M√°s espacio entre botones */
    flex-wrap: wrap; /* Para que quepan en m√≥vil */
}

/* Informaci√≥n de c√°lculo (dentro de calculator-card) */
.calculation-info {
    background-color: var(--gray-50); /* Fondo muy sutil */
    border: 1px solid var(--gray-200);
    border-radius: var(--radius);
    padding: 1.25rem;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
}
.calculation-info h4 {
    margin-bottom: 0.5rem;
    color: var(--purple-700);
}
.calculation-info p {
    margin-bottom: 0.5rem;
    color: var(--gray-600); /* Texto un poco m√°s claro */
}
.calculation-formula {
    background-color: var(--white);
    padding: 0.8rem 1rem; /* Padding */
    border-radius: var(--radius);
    border: 1px solid var(--gray-300);
    text-align: center;
    font-weight: 500;
    color: var(--purple-800);
    margin-top: 0.75rem;
    font-size: 0.9rem; /* M√°s peque√±o */
    word-break: break-word; /* Para que la f√≥rmula no desborde en m√≥viles */
}

/* Divisor horizontal */
hr.section-divider {
    border: none;
    border-top: 1px solid var(--gray-200);
    margin: 1.5rem 0;
}

/* Estilos para inputs condicionales */
.conditional-inputs h4 {
    margin-top: 1rem;
    margin-bottom: 1rem;
    text-align: center;
    font-size: 1.1rem;
    color: var(--gray-700);
}
.dimensions-grid { /* Grid espec√≠fico para dimensiones */
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
}

/* ==================== Estructura General de Secciones ==================== */
.section-intro {
    max-width: 750px; /* Ancho m√°ximo para intros */
    margin: 0 auto 2.5rem; /* M√°s margen inferior */
    text-align: center;
    font-size: 1.1rem; /* Un poco m√°s grande */
    color: var(--gray-600);
}

/* Hero Section */
.hero {
    text-align: center;
    padding: 3rem 0 2rem 0; /* Menos padding inferior */
    background: linear-gradient(to bottom, var(--purple-50) 0%, var(--white) 100%); /* Degradado suave */
}
.hero h1 {
    margin-bottom: 0.75rem; /* Ajuste */
    color: var(--purple-800); /* Color distintivo */
}
.hero .intro-text {
    font-size: 1.15rem; /* Ligeramente m√°s grande */
    color: var(--gray-700);
    margin-bottom: 2.5rem;
    max-width: 700px; /* Ajuste de ancho */
    margin-left: auto;
    margin-right: auto;
}

/* Calculadora R√°pida */
.calculator-section {
    padding-bottom: 2rem;
}
.calculator-card {
    background-color: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    padding: 2rem; /* M√°s padding */
    max-width: 800px; /* Ajuste de ancho */
    margin: 0 auto;
}

/* Secci√≥n Educativa B√°sica */
.basic-concepts {
    /* background-color: var(--gray-50); */ /* Ya puesto en section:nth-child(even) */
}
.edu-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem; /* M√°s espacio */
    margin-bottom: 2.5rem;
}
.edu-card {
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
    display: flex; /* Para alinear contenido */
    flex-direction: column;
}
.edu-card-header {
    background-color: var(--purple-100); /* Color de acento suave */
    padding: 1rem 1.25rem;
    border-bottom: var(--border-light);
}
.edu-card-header h3 {
    margin: 0;
    text-align: center;
    font-size: 1.2rem;
    color: var(--purple-800);
}
.edu-card-header span { /* Para el subt√≠tulo entre par√©ntesis */
    display: block;
    text-align: center;
    font-size: 0.85rem;
    color: var(--gray-500);
    margin-top: 0.25rem;
}
.edu-card-content {
    padding: 1.25rem 1.5rem;
    flex-grow: 1; /* Para que ocupe espacio */
}
.edu-card-content p {
    font-size: 0.95rem;
    margin-bottom: 0.8rem;
}
.edu-card-content ul {
    margin-bottom: 0;
    padding-left: 1.2rem;
}
.edu-card-content li {
    font-size: 0.9rem;
    margin-bottom: 0.4rem;
    color: var(--gray-600);
}
.edu-card-content strong {
    color: var(--gray-700);
}

/* Nota sobre Valor del Tiempo */
.value-time-note {
    background-color: var(--pink-50); /* Color de acento */
    border: 1px solid var(--pink-200);
    border-radius: var(--radius);
    padding: 1.5rem 2rem; /* M√°s padding */
    text-align: center;
    margin: 2.5rem auto;
    max-width: 700px;
    box-shadow: var(--shadow-md);
}
.value-time-note h3 {
    color: var(--pink-800);
}
.value-time-note p {
    color: var(--pink-700);
    font-size: 1.05rem;
}

/* F√≥rmula Simplificada */
.formula-card.simplified {
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
    margin-bottom: 1rem;
}
.formula-card.simplified .formula-card-header {
    padding: 0.8rem 1rem;
    background-color: var(--gray-100); /* Fondo neutro */
}
.formula-card.simplified .formula-card-header h3 {
    margin: 0;
    text-align: center;
    font-size: 1.15rem; /* Un poco m√°s grande */
    color: var(--gray-800);
}
.formula-card.simplified .formula-card-content {
    padding: 1.25rem 1.5rem;
}
.formula-card.simplified .formula-box {
    background-color: var(--purple-50); /* Color de acento suave */
    border: 1px solid var(--purple-200);
    padding: 1rem; /* M√°s padding */
    text-align: center;
    margin-bottom: 1rem;
    font-weight: 500;
    color: var(--purple-800);
    border-radius: var(--radius);
}
.formula-card.simplified .formula-box p {
    margin: 0;
    font-size: 1rem; /* M√°s legible */
    line-height: 1.5;
}

/* Calculadora Gastos Fijos */
.fixed-costs-section {
    background-color: var(--purple-50); /* Fondo de secci√≥n distintivo */
}
.fixed-costs-calculator {
    background-color: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow-md);
    padding: 2rem; /* M√°s padding */
    max-width: 850px; /* M√°s ancho para esta calculadora */
    margin: 0 auto;
}
.fixed-costs-grid {
    gap: 1.25rem; /* Espacio entre campos */
}
.fixed-costs-calculator h4 {
    font-size: 1.2rem; /* Subt√≠tulos m√°s grandes */
    margin-bottom: 1.25rem;
    text-align: center;
    color: var(--purple-700);
}
.fixed-costs-total {
    background-color: var(--pink-100);
    border-radius: var(--radius);
    padding: 1.25rem; /* M√°s padding */
    text-align: center;
    margin: 1.5rem 0;
    border: 1px solid var(--pink-200);
}
.fixed-costs-total h4 {
    margin: 0;
    color: var(--purple-800);
    font-size: 1.15rem;
}
.fixed-costs-total span {
    font-weight: 700;
    color: var(--pink-700);
    font-size: 1.25rem; /* Destacar el total */
}
.fixed-costs-distribution {
    background-color: var(--white); /* Fondo limpio */
    border: 1px solid var(--gray-200);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-top: 1.5rem;
}
.distribution-result {
    margin-top: 1.25rem;
    text-align: center;
    background-color: var(--purple-50);
    padding: 1rem;
    border-radius: var(--radius);
}
.distribution-result h4 {
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
}
.distribution-result span {
    font-weight: 700;
    color: var(--purple-700);
    font-size: 1.2rem;
}
.distribution-result p {
    font-size: 0.9rem;
    margin-bottom: 0;
    color: var(--gray-600);
}


/* ==================== Ejemplo Pr√°ctico Mueble ==================== */
.cake-example-section {
    /* background-color: var(--white); Ya est√° en section:nth-child(even) */
}

.cake-tabs {
    max-width: 1000px;
    margin: 0 auto;
    border: var(--border-medium);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    background-color: var(--white);
}

/* Pesta√±as (Tabs) */
.tabs-header {
    display: flex;
    overflow-x: auto; /* Scroll horizontal en m√≥vil */
    background-color: var(--gray-100); /* Fondo m√°s neutro para pesta√±as */
    border-bottom: var(--border-medium);
    -webkit-overflow-scrolling: touch; /* Scroll suave en iOS */
    scrollbar-width: thin; /* Scrollbar fino en Firefox */
    scrollbar-color: var(--gray-400) var(--gray-100); /* Colores de scrollbar */
}
.tabs-header::-webkit-scrollbar { /* Para Chrome/Safari */
    height: 8px;
}
.tabs-header::-webkit-scrollbar-thumb {
    background: var(--gray-400);
    border-radius: 4px;
}

.tab-btn {
    padding: 0.9rem 1.25rem; /* Padding ajustado */
    background: none;
    border: none;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem; /* Un poco m√°s grande para pesta√±as */
    color: var(--gray-600); /* Color de pesta√±a inactiva */
    white-space: nowrap; /* Evitar salto de l√≠nea */
    border-bottom: 3px solid transparent;
    transition: all 0.25s ease-in-out;
    flex-shrink: 0; /* Evitar que se encojan */
}
.tab-btn:hover {
    background-color: var(--gray-200); /* Hover m√°s sutil */
    color: var(--purple-700);
}
.tab-btn.active {
    color: var(--purple-700); /* Color activo */
    border-bottom-color: var(--purple-500); /* Indicador activo */
    background-color: var(--white); /* Pesta√±a activa con fondo blanco */
}
.tabs-content {
    padding: 2rem; /* Padding interno de tabs m√°s generoso */
}
.tab-content { display: none; }
.tab-content.active {
    display: block;
    animation: fadeIn 0.4s ease-in-out; /* Animaci√≥n suave */
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Estilos para Tablas Responsivas (reutilizados) */
.responsive-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: var(--border-light); /* A√±adir borde a la tabla */
    border-radius: var(--radius); /* Redondear esquinas de la tabla */
}
.responsive-table thead th {
    background-color: var(--gray-100); /* Fondo de cabecera m√°s neutro */
    padding: 0.75rem 1rem; /* Padding de celdas */
    text-align: left;
    font-weight: 600;
    color: var(--gray-700); /* Texto de cabecera */
    border-bottom: 2px solid var(--gray-300); /* Borde inferior m√°s grueso */
}
.responsive-table tbody td {
    padding: 0.75rem 1rem;
    border-top: var(--border-light);
    vertical-align: middle;
    color: var(--gray-600);
}
.responsive-table tbody tr:nth-child(even) {
    background-color: var(--gray-50); /* Cebrado m√°s sutil */
}
.responsive-table tfoot td {
    font-weight: 600;
    background-color: var(--gray-100);
    padding: 0.75rem 1rem;
    border-top: 2px solid var(--gray-300);
}
.total-label {
    text-align: right;
    padding-right: 0.5rem;
    color: var(--gray-700);
}
.total-value {
    font-weight: 700;
    color: var(--pink-700); /* Destacar totales con color de acento */
    text-align: right;
    font-size: 1rem; /* Un poco m√°s grande el total */
}


/* Formularios dentro de las calculadoras de ejemplo/gu√≠a */
.add-ingredient-form {
    background-color: var(--gray-50); /* Fondo sutil */
    border: 1px solid var(--gray-200);
    border-radius: var(--radius);
    padding: 1.5rem; /* M√°s padding */
    margin-top: 1.5rem;
}
.add-ingredient-form h4 {
    margin-bottom: 1rem;
    text-align: center;
    color: var(--purple-700);
}
.compact-form-row { /* Para formularios con muchos campos en una fila */
    display: grid; /* Usar grid para mejor control */
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Columnas flexibles y responsivas */
    gap: 1rem; /* Espacio entre campos */
    align-items: end; /* Alinear elementos al final para que los botones queden bien */
    margin-bottom: 1rem; /* Espacio antes del bot√≥n */
}
/* Ajustar bot√≥n en compact-form-row si se necesita */
.add-ingredient-form .compact-form-row + .btn {
    display: block; /* Asegurar que sea bloque */
    width: fit-content; /* Ancho basado en contenido */
    margin-left: auto; /* Alinear a la derecha */
    margin-right: auto; /* Centrar si no hay espacio a la derecha */
}


/* Navegaci√≥n entre Pesta√±as del Ejemplo */
.next-step {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 2.5rem; /* M√°s espacio */
    flex-wrap: wrap; /* Para m√≥vil */
    gap: 1rem;
    border-top: var(--border-medium);
    padding-top: 1.5rem;
}
.next-step p {
    margin-bottom: 0;
    font-size: 0.9rem;
    color: var(--gray-600);
}

/* Estilos Espec√≠ficos Pesta√±a Procesos/Energ√≠a (Adaptado de Horneado) */
.baking-calculator .baking-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Adaptable */
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}
.baking-card {
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    padding: 1.5rem; /* M√°s padding */
    box-shadow: var(--shadow);
}
.result-box {
    background-color: var(--purple-50); /* Color de acento suave */
    border: 1px solid var(--purple-200);
    border-radius: var(--radius);
    padding: 1rem;
    margin-top: 1rem;
    text-align: center;
}
.result-box p { margin: 0; font-size: 1rem; font-weight: 500; color: var(--purple-700); }
.result-box span { font-weight: 700; color: var(--purple-700); } /* Mantener consistencia */

.baking-total {
    background-color: var(--purple-100); /* Color de acento */
    border-radius: var(--radius);
    padding: 1.25rem;
    text-align: center;
    font-weight: 600;
    font-size: 1.1rem; /* Destacar el total de esta secci√≥n */
}
.baking-total span { color: var(--purple-800); font-weight: 700; }


/* Estilos Espec√≠ficos Pesta√±a Tiempo (Mano de Obra) */
.time-calculator .time-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}
.time-card { /* Reutilizar estilo de baking-card */
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    padding: 1.5rem;
    box-shadow: var(--shadow);
}
.time-results {
    background-color: var(--pink-50);
    border: 1px solid var(--pink-200);
    border-radius: var(--radius);
    padding: 1.25rem; /* M√°s padding */
    margin-top: 1rem;
}
.result-item { /* Estilo para cada l√≠nea de resultado */
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem; /* M√°s espacio */
    font-size: 1rem; /* Texto m√°s grande */
    padding-bottom: 0.75rem;
    border-bottom: 1px dashed var(--pink-200);
    flex-wrap: wrap; /* Para que quepan en m√≥vil */
}
.result-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.result-item span:first-child { color: var(--gray-700); padding-right: 0.5rem; }
.result-item span:last-child, .result-item strong { color: var(--pink-700); font-weight: 700; text-align: right; }
.result-item.highlight span:last-child {
    font-size: 1.2rem; /* Destacar costo de mano de obra */
    color: var(--pink-800);
}

/* Estilos Espec√≠ficos Pesta√±a Total (C√°lculo Final) */
.total-calculator .total-summary {
    display: grid;
    grid-template-columns: 1fr; /* Mobile first */
    gap: 2rem; /* Espacio entre tabla de costos y calculadora de ganancia */
    margin-bottom: 2rem;
}
.total-table tbody tr td:first-child { /* Concepto del gasto */
    font-weight: 500;
    color: var(--gray-700);
}
.total-table tbody tr td:last-child { /* Costo */
    font-weight: 600;
    text-align: right;
}
.subtotal-row td {
    background-color: var(--gray-100) !important; /* Fondo para subtotal */
    font-weight: 700 !important;
    color: var(--gray-800) !important;
    border-top: 2px solid var(--gray-300) !important;
}
.total-row td {
    background-color: var(--purple-100) !important; /* Fondo para costo total */
    font-weight: 700 !important;
    font-size: 1.1rem !important; /* Destacar costo total */
    color: var(--purple-800) !important;
    border-top: 2px solid var(--purple-300) !important;
}

.profit-calculator {
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    padding: 1.5rem 2rem; /* Buen padding */
    box-shadow: var(--shadow);
}
.profit-calculator h4 { text-align: center; }

.range-container { /* Para alinear range y display */
    display: flex;
    align-items: center;
    gap: 1rem;
}
.percentage-display { /* Para mostrar el % de la ganancia */
    display: inline-block;
    font-weight: 700;
    color: var(--pink-600);
    font-size: 1.1rem; /* Destacar el porcentaje */
    min-width: 50px; /* Para que no salte el layout */
    text-align: right;
}
input[type="range"] {
    flex-grow: 1; /* Ocupar espacio disponible */
    height: 8px;
    cursor: pointer;
    appearance: none;
    background: var(--gray-200);
    border-radius: 5px;
    outline: none;
}
input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--pink-500);
    border-radius: 50%;
    cursor: pointer;
}
input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--pink-500);
    border-radius: 50%;
    cursor: pointer;
    border: none;
}


.profit-result {
    background-color: var(--pink-50);
    border: 1px solid var(--pink-200);
    border-radius: var(--radius);
    padding: 1.25rem;
    margin-top: 1.5rem;
}
.profit-result .result-item.highlight {
    font-size: 1.15rem; /* Resaltar precio final */
    color: var(--pink-800);
}
.profit-result .result-item.highlight span:last-child {
    font-size: 1.3rem; /* Destacar mucho el precio de venta */
    color: var(--success-color); /* Verde para el precio final */
}

/* Tips (para secciones de Acabados, Embalaje, Precios, etc.) */
.packaging-tips, .pricing-tips { /* Clases gen√©ricas para recuadros de tips */
    background-color: var(--purple-50);
    border: 1px solid var(--purple-200);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin: 2rem 0;
    font-size: 0.95rem; /* Texto de tips un poco m√°s grande */
}
.packaging-tips h4, .pricing-tips h4 {
    color: var(--purple-700);
    margin-bottom: 1rem; /* M√°s espacio bajo el t√≠tulo del tip */
    font-size: 1.1rem;
}
.packaging-tips ul, .pricing-tips ul {
    list-style: none; /* Quitar bullets por defecto */
    padding-left: 0;
    margin-bottom: 0;
}
.packaging-tips li, .pricing-tips li {
    margin-bottom: 0.5rem; /* Espacio entre tips */
    padding-left: 1.5rem; /* Espacio para el icono */
    color: var(--gray-700);
    position: relative;
}
.packaging-tips li::before, .pricing-tips li::before { /* Usar pseudo-elemento para el icono */
    content: 'üëâ';
    position: absolute;
    left: 0;
    top: 0;
}

/* ==================== Estrategias de Precios ==================== */
.pricing-strategies-section {
    /* background-color: var(--gray-50); */ /* Ya est√° en even */
}
.strategies-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 2.5rem;
}
.strategy-card {
    background-color: var(--white);
    border: var(--border-light);
    border-radius: var(--radius);
    padding: 1.75rem; /* M√°s padding */
    box-shadow: var(--shadow);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    display: flex;
    flex-direction: column;
    text-align: center; /* Centrar contenido */
}
.strategy-card:hover {
    transform: translateY(-5px); /* Efecto hover m√°s pronunciado */
    box-shadow: var(--shadow-md);
}
.strategy-icon {
    font-size: 2.5rem; /* Icono m√°s grande */
    margin-bottom: 1rem;
    color: var(--purple-500); /* Color de icono */
}
.strategy-card h3 {
    text-align: center;
    margin-bottom: 0.8rem;
    font-size: 1.2rem; /* T√≠tulo de estrategia */
    color: var(--purple-700);
}
.strategy-card p {
    font-size: 0.95rem;
    flex-grow: 1; /* Texto ocupa espacio */
    color: var(--gray-600);
}
.strategy-card p strong {
    color: var(--pink-700); /* Destacar parte del texto */
}

.pricing-recommendation {
    background-color: var(--pink-100); /* Color de acento */
    border: 1px solid var(--pink-200);
    border-radius: var(--radius);
    padding: 2rem; /* M√°s padding */
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
}
.pricing-recommendation h3 {
    margin-bottom: 1rem;
    color: var(--pink-800);
    font-size: 1.3rem;
}
.pricing-recommendation p {
    font-size: 1.05rem;
    color: var(--pink-700);
}
.pricing-recommendation strong {
    color: var(--pink-900); /* Texto fuerte m√°s oscuro */
}


/* ==================== Recursos y Descargas (Planillas) ==================== */
.articles-section {
    background-color: var(--purple-50);
}
.download-card {
  background-color: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  margin: 2.5rem auto;
  max-width: 850px;
  display: flex;
  flex-direction: column; /* Apilado en m√≥vil por defecto */
}

.download-visual {
  line-height: 0;
  background-color: var(--gray-100); /* Fondo para la imagen */
  flex-shrink: 0;
}

.download-visual img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  max-height: 300px; /* Limitar altura de la imagen en m√≥vil */
}

.download-content {
  padding: 2rem; /* Padding generoso */
  text-align: center; /* Centrado en m√≥vil */
  display: flex;
  flex-direction: column;
  justify-content: center; /* Centrar contenido verticalmente */
  flex-grow: 1;
}

.download-content h2 {
  font-size: 1.6rem; /* T√≠tulo m√°s grande */
  color: var(--purple-800);
  margin-bottom: 0.75rem;
}

.download-content p {
  font-size: 1rem;
  color: var(--gray-700);
  margin-bottom: 0.5rem;
  line-height: 1.6;
}
.download-content p small {
  font-size: 0.85rem;
  color: var(--gray-500);
  display: block;
  margin-top: 0.5rem; /* M√°s espacio para el texto peque√±o */
}
.download-content p small a {
    font-weight: 600; /* Destacar el enlace del tutorial */
}

.download-content .btn-primary {
  margin-top: 1.5rem;
  padding: 0.9rem 2rem; /* Bot√≥n de descarga m√°s prominente */
  font-size: 1rem;
  align-self: center; /* Centrar bot√≥n si el contenedor es flex */
  display: inline-flex; /* Para alinear icono */
  align-items: center;
}


/* ==================== Footer ==================== */
footer {
    background-color: var(--gray-800); /* Footer oscuro */
    padding: 3rem 0 2rem; /* Padding */
    text-align: center;
    margin-top: 3rem;
    color: var(--gray-300); /* Texto claro en footer */
}
.subscribe-pitch p {
    font-size: 1rem;
    color: var(--gray-200);
    max-width: 650px;
    margin: 0 auto 2rem; /* Espaciado */
    line-height: 1.7;
}
.subscribe-pitch strong {
    color: var(--white);
}
.subscribe-pitch .btn { /* Estilo para el bot√≥n del footer */
    margin-top: 1rem;
}

.social-links {
    display: flex;
    justify-content: center;
    gap: 1.5rem; /* M√°s espacio entre iconos */
    margin: 1.5rem 0 2rem; /* Ajustar m√°rgenes */
}
.social-links a svg {
    width: 28px; /* Iconos m√°s grandes */
    height: 28px;
    color: var(--gray-400); /* Color de icono */
    transition: color 0.2s ease, transform 0.2s ease;
}
.social-links a:hover svg {
    color: var(--white); /* Color al pasar el mouse */
    transform: scale(1.15); /* Efecto sutil */
}
.footer-note {
    max-width: 500px;
    margin: 0 auto 1.5rem;
    font-size: 0.9rem;
    color: var(--gray-400);
}
.footer-note a {
    color: var(--pink-400); /* Enlaces en footer con acento */
    font-weight: 600;
}
.footer-note a:hover {
    color: var(--pink-300);
}
.copyright {
    font-size: 0.85rem;
    color: var(--gray-500);
}
.copyright a {
    color: var(--gray-400);
    text-decoration: none;
}
.copyright a:hover {
    color: var(--white);
    text-decoration: underline;
}

/* ==================== Estructura del Header y Logo ==================== */
.site-header {
    padding: 1rem 0; /* Header m√°s compacto */
    background-color: var(--white); /* Fondo blanco para el header */
    box-shadow: var(--shadow-sm); /* Sombra sutil */
    position: sticky; /* Header pegajoso */
    top: 0;
    z-index: 1000; /* Para que est√© sobre otros elementos */
}

.logo-container {
    text-align: center;
}

.logo-image {
    max-height: 50px; /* Altura m√°xima del logo, ajustar seg√∫n tu logo */
    width: auto; /* Mantener proporci√≥n */
}


/* ==================== Bot√≥n Flotante (FAB) Link ==================== */
.fab.fab-link {
    position: fixed;
    bottom: 30px; /* M√°s arriba */
    right: 30px;
    width: 60px; /* Tama√±o est√°ndar */
    height: 60px;
    background-color: var(--purple-600); /* Color secundario para FAB */
    color: var(--white);
    border-radius: 50%;
    box-shadow: var(--shadow-lg);
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    z-index: 999; /* Un poco menos que el header si es sticky */
    transition: transform 0.25s ease-in-out, background-color 0.25s ease-in-out;
}

.fab.fab-link:hover {
    background-color: var(--purple-700); /* Oscurecer en hover */
    transform: scale(1.1) rotate(5deg); /* Efecto divertido */
    color: var(--white); /* Asegurar color en hover */
}

.fab.fab-link svg {
    width: 30px;
    height: 30px;
    fill: currentColor;
}


/* ==================== Media Queries para Responsividad ==================== */
@media (min-width: 768px) {
    /* Ajustes para Tablets y Escritorio */
    .container { padding: 0 1.5rem; }
    .form-grid:not(.compact-form-row):not(.fixed-costs-grid):not(.dimensions-grid) {
        grid-template-columns: 1fr 1fr; /* 2 columnas en formularios generales */
    }
    .fixed-costs-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* M√°s flexible para gastos fijos */
    }
    .edu-grid { grid-template-columns: 1fr 1fr; }
    .total-calculator .total-summary { grid-template-columns: 2fr 1fr; } /* M√°s espacio para la tabla de costos */
    .strategies-grid { grid-template-columns: repeat(3, 1fr); }
    .dimensions-grid {
        grid-template-columns: repeat(3, 1fr); /* Tres columnas para dimensiones en desktop */
    }

    .download-card { /* Layout horizontal para tarjeta de descarga en desktop */
        flex-direction: row;
        align-items: center; /* Centrar verticalmente */
    }
    .download-visual {
        flex-basis: 40%; /* La imagen ocupa el 40% del ancho */
        max-height: none; /* Permitir que la imagen tome altura completa de la tarjeta */
    }
    .download-visual img {
        max-height: none;
        height: 100%; /* Imagen ocupa altura completa de su contenedor */
        border-radius: var(--radius) 0 0 var(--radius); /* Redondear solo esquinas izquierdas */
    }
    .download-content {
        flex-basis: 60%;
        text-align: left; /* Alinear texto a la izquierda en desktop */
        padding: 2.5rem; /* Ajustar padding */
    }
    .download-content .btn-primary {
        align-self: flex-start; /* Alinear bot√≥n a la izquierda */
    }
    .logo-container { text-align: left; } /* Logo a la izquierda en desktop */
    .site-header .container { display: flex; justify-content: space-between; align-items: center; } /* Para alinear logo y nav si se a√±ade */

}

@media (min-width: 1024px) {
    /* Ajustes para Escritorio Grande */
    .compact-form-row {
        /* grid-template-columns: repeat(4, 1fr); Puede ser demasiado */
    }
    .logo-image {
        max-height: 60px; /* Logo un poco m√°s grande en desktop */
    }

}

